var e=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,o=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),s=(e,i,o,s)=>{if(i&&typeof i==`object`||typeof i==`function`)for(var c=r(i),l=0,u=c.length,d;l<u;l++)d=c[l],!a.call(e,d)&&d!==o&&t(e,d,{get:(e=>i[e]).bind(null,d),enumerable:!(s=n(i,d))||s.enumerable});return e},c=(n,r,a)=>(a=n==null?{}:e(i(n)),s(r||!n||!n.__esModule?t(a,`default`,{value:n,enumerable:!0}):a,n));(function(){let e=document.createElement(`link`).relList;if(e&&e.supports&&e.supports(`modulepreload`))return;for(let e of document.querySelectorAll(`link[rel="modulepreload"]`))n(e);new MutationObserver(e=>{for(let t of e)if(t.type===`childList`)for(let e of t.addedNodes)e.tagName===`LINK`&&e.rel===`modulepreload`&&n(e)}).observe(document,{childList:!0,subtree:!0});function t(e){let t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin===`use-credentials`?t.credentials=`include`:e.crossOrigin===`anonymous`?t.credentials=`omit`:t.credentials=`same-origin`,t}function n(e){if(e.ep)return;e.ep=!0;let n=t(e);fetch(e.href,n)}})();function l(e){let t=Object.create(null);for(let n of e.split(`,`))t[n]=1;return e=>e in t}var u={},d=[],f=()=>{},p=()=>!1,m=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),h=e=>e.startsWith(`onUpdate:`),g=Object.assign,_=(e,t)=>{let n=e.indexOf(t);n>-1&&e.splice(n,1)},v=Object.prototype.hasOwnProperty,y=(e,t)=>v.call(e,t),b=Array.isArray,x=e=>k(e)===`[object Map]`,S=e=>k(e)===`[object Set]`,C=e=>typeof e==`function`,w=e=>typeof e==`string`,T=e=>typeof e==`symbol`,E=e=>typeof e==`object`&&!!e,D=e=>(E(e)||C(e))&&C(e.then)&&C(e.catch),O=Object.prototype.toString,k=e=>O.call(e),A=e=>k(e).slice(8,-1),ee=e=>k(e)===`[object Object]`,j=e=>w(e)&&e!==`NaN`&&e[0]!==`-`&&``+parseInt(e,10)===e,te=l(`,key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted`),M=e=>{let t=Object.create(null);return(n=>t[n]||(t[n]=e(n)))},N=/-\w/g,P=M(e=>e.replace(N,e=>e.slice(1).toUpperCase())),ne=/\B([A-Z])/g,F=M(e=>e.replace(ne,`-$1`).toLowerCase()),I=M(e=>e.charAt(0).toUpperCase()+e.slice(1)),R=M(e=>e?`on${I(e)}`:``),re=(e,t)=>!Object.is(e,t),ie=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},ae=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},oe=e=>{let t=parseFloat(e);return isNaN(t)?e:t},se,ce=()=>se||=typeof globalThis<`u`?globalThis:typeof self<`u`?self:typeof window<`u`?window:typeof global<`u`?global:{};function le(e){if(b(e)){let t={};for(let n=0;n<e.length;n++){let r=e[n],i=w(r)?pe(r):le(r);if(i)for(let e in i)t[e]=i[e]}return t}else if(w(e)||E(e))return e}var ue=/;(?![^(]*\))/g,de=/:([^]+)/,fe=/\/\*[^]*?\*\//g;function pe(e){let t={};return e.replace(fe,``).split(ue).forEach(e=>{if(e){let n=e.split(de);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function me(e){let t=``;if(w(e))t=e;else if(b(e))for(let n=0;n<e.length;n++){let r=me(e[n]);r&&(t+=r+` `)}else if(E(e))for(let n in e)e[n]&&(t+=n+` `);return t.trim()}var he=`itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly`,ge=l(he);he+``;function _e(e){return!!e||e===``}var ve=e=>!!(e&&e.__v_isRef===!0),ye=e=>w(e)?e:e==null?``:b(e)||E(e)&&(e.toString===O||!C(e.toString))?ve(e)?ye(e.value):JSON.stringify(e,be,2):String(e),be=(e,t)=>ve(t)?be(e,t.value):x(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[t,n],r)=>(e[xe(t,r)+` =>`]=n,e),{})}:S(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>xe(e))}:T(t)?xe(t):E(t)&&!b(t)&&!ee(t)?String(t):t,xe=(e,t=``)=>T(e)?`Symbol(${e.description??t})`:e,Se,Ce=class{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Se,!e&&Se&&(this.index=(Se.scopes||=[]).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){let t=Se;try{return Se=this,e()}finally{Se=t}}}on(){++this._on===1&&(this.prevScope=Se,Se=this)}off(){this._on>0&&--this._on===0&&(Se=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let t,n;for(t=0,n=this.effects.length;t<n;t++)this.effects[t].stop();for(this.effects.length=0,t=0,n=this.cleanups.length;t<n;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){let e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.parent=void 0}}};function we(){return Se}var z,Te=new WeakSet,Ee=class{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Se&&Se.active&&Se.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Te.has(this)&&(Te.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Ae(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ue(this),Ne(this);let e=z,t=ze;z=this,ze=!0;try{return this.fn()}finally{Pe(this),z=e,ze=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Le(e);this.deps=this.depsTail=void 0,Ue(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Te.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Fe(this)&&this.run()}get dirty(){return Fe(this)}},De=0,Oe,ke;function Ae(e,t=!1){if(e.flags|=8,t){e.next=ke,ke=e;return}e.next=Oe,Oe=e}function je(){De++}function Me(){if(--De>0)return;if(ke){let e=ke;for(ke=void 0;e;){let t=e.next;e.next=void 0,e.flags&=-9,e=t}}let e;for(;Oe;){let t=Oe;for(Oe=void 0;t;){let n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(t){e||=t}t=n}}if(e)throw e}function Ne(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Pe(e){let t,n=e.depsTail,r=n;for(;r;){let e=r.prevDep;r.version===-1?(r===n&&(n=e),Le(r),Re(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=e}e.deps=t,e.depsTail=n}function Fe(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Ie(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function Ie(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===We)||(e.globalVersion=We,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!Fe(e))))return;e.flags|=2;let t=e.dep,n=z,r=ze;z=e,ze=!0;try{Ne(e);let n=e.fn(e._value);(t.version===0||re(n,e._value))&&(e.flags|=128,e._value=n,t.version++)}catch(e){throw t.version++,e}finally{z=n,ze=r,Pe(e),e.flags&=-3}}function Le(e,t=!1){let{dep:n,prevSub:r,nextSub:i}=e;if(r&&(r.nextSub=i,e.prevSub=void 0),i&&(i.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let e=n.computed.deps;e;e=e.nextDep)Le(e,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function Re(e){let{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}var ze=!0,Be=[];function Ve(){Be.push(ze),ze=!1}function He(){let e=Be.pop();ze=e===void 0?!0:e}function Ue(e){let{cleanup:t}=e;if(e.cleanup=void 0,t){let e=z;z=void 0;try{t()}finally{z=e}}}var We=0,Ge=class{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}},Ke=class{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!z||!ze||z===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==z)t=this.activeLink=new Ge(z,this),z.deps?(t.prevDep=z.depsTail,z.depsTail.nextDep=t,z.depsTail=t):z.deps=z.depsTail=t,qe(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){let e=t.nextDep;e.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=e),t.prevDep=z.depsTail,t.nextDep=void 0,z.depsTail.nextDep=t,z.depsTail=t,z.deps===t&&(z.deps=e)}return t}trigger(e){this.version++,We++,this.notify(e)}notify(e){je();try{for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{Me()}}};function qe(e){if(e.dep.sc++,e.sub.flags&4){let t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let e=t.deps;e;e=e.nextDep)qe(e)}let n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}var Je=new WeakMap,Ye=Symbol(``),B=Symbol(``),Xe=Symbol(``);function Ze(e,t,n){if(ze&&z){let t=Je.get(e);t||Je.set(e,t=new Map);let r=t.get(n);r||(t.set(n,r=new Ke),r.map=t,r.key=n),r.track()}}function Qe(e,t,n,r,i,a){let o=Je.get(e);if(!o){We++;return}let s=e=>{e&&e.trigger()};if(je(),t===`clear`)o.forEach(s);else{let i=b(e),a=i&&j(n);if(i&&n===`length`){let e=Number(r);o.forEach((t,n)=>{(n===`length`||n===Xe||!T(n)&&n>=e)&&s(t)})}else switch((n!==void 0||o.has(void 0))&&s(o.get(n)),a&&s(o.get(Xe)),t){case`add`:i?a&&s(o.get(`length`)):(s(o.get(Ye)),x(e)&&s(o.get(B)));break;case`delete`:i||(s(o.get(Ye)),x(e)&&s(o.get(B)));break;case`set`:x(e)&&s(o.get(Ye));break}}Me()}function $e(e){let t=U(e);return t===e?t:(Ze(t,`iterate`,Xe),Lt(e)?t:t.map(Bt))}function et(e){return Ze(e=U(e),`iterate`,Xe),e}function tt(e,t){return It(e)?Ft(e)?Vt(Bt(t)):Vt(t):Bt(t)}var nt={__proto__:null,[Symbol.iterator](){return rt(this,Symbol.iterator,e=>tt(this,e))},concat(...e){return $e(this).concat(...e.map(e=>b(e)?$e(e):e))},entries(){return rt(this,`entries`,e=>(e[1]=tt(this,e[1]),e))},every(e,t){return at(this,`every`,e,t,void 0,arguments)},filter(e,t){return at(this,`filter`,e,t,e=>e.map(e=>tt(this,e)),arguments)},find(e,t){return at(this,`find`,e,t,e=>tt(this,e),arguments)},findIndex(e,t){return at(this,`findIndex`,e,t,void 0,arguments)},findLast(e,t){return at(this,`findLast`,e,t,e=>tt(this,e),arguments)},findLastIndex(e,t){return at(this,`findLastIndex`,e,t,void 0,arguments)},forEach(e,t){return at(this,`forEach`,e,t,void 0,arguments)},includes(...e){return st(this,`includes`,e)},indexOf(...e){return st(this,`indexOf`,e)},join(e){return $e(this).join(e)},lastIndexOf(...e){return st(this,`lastIndexOf`,e)},map(e,t){return at(this,`map`,e,t,void 0,arguments)},pop(){return ct(this,`pop`)},push(...e){return ct(this,`push`,e)},reduce(e,...t){return ot(this,`reduce`,e,t)},reduceRight(e,...t){return ot(this,`reduceRight`,e,t)},shift(){return ct(this,`shift`)},some(e,t){return at(this,`some`,e,t,void 0,arguments)},splice(...e){return ct(this,`splice`,e)},toReversed(){return $e(this).toReversed()},toSorted(e){return $e(this).toSorted(e)},toSpliced(...e){return $e(this).toSpliced(...e)},unshift(...e){return ct(this,`unshift`,e)},values(){return rt(this,`values`,e=>tt(this,e))}};function rt(e,t,n){let r=et(e),i=r[t]();return r!==e&&!Lt(e)&&(i._next=i.next,i.next=()=>{let e=i._next();return e.done||(e.value=n(e.value)),e}),i}var it=Array.prototype;function at(e,t,n,r,i,a){let o=et(e),s=o!==e&&!Lt(e),c=o[t];if(c!==it[t]){let t=c.apply(e,a);return s?Bt(t):t}let l=n;o!==e&&(s?l=function(t,r){return n.call(this,tt(e,t),r,e)}:n.length>2&&(l=function(t,r){return n.call(this,t,r,e)}));let u=c.call(o,l,r);return s&&i?i(u):u}function ot(e,t,n,r){let i=et(e),a=n;return i!==e&&(Lt(e)?n.length>3&&(a=function(t,r,i){return n.call(this,t,r,i,e)}):a=function(t,r,i){return n.call(this,t,tt(e,r),i,e)}),i[t](a,...r)}function st(e,t,n){let r=U(e);Ze(r,`iterate`,Xe);let i=r[t](...n);return(i===-1||i===!1)&&Rt(n[0])?(n[0]=U(n[0]),r[t](...n)):i}function ct(e,t,n=[]){Ve(),je();let r=U(e)[t].apply(e,n);return Me(),He(),r}var lt=l(`__proto__,__v_isRef,__isVue`),ut=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!==`arguments`&&e!==`caller`).map(e=>Symbol[e]).filter(T));function dt(e){T(e)||(e=String(e));let t=U(this);return Ze(t,`has`,e),t.hasOwnProperty(e)}var ft=class{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,n){if(t===`__v_skip`)return e.__v_skip;let r=this._isReadonly,i=this._isShallow;if(t===`__v_isReactive`)return!r;if(t===`__v_isReadonly`)return r;if(t===`__v_isShallow`)return i;if(t===`__v_raw`)return n===(r?i?Ot:Dt:i?Et:H).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(n)?e:void 0;let a=b(e);if(!r){let e;if(a&&(e=nt[t]))return e;if(t===`hasOwnProperty`)return dt}let o=Reflect.get(e,t,Ht(e)?e:n);if((T(t)?ut.has(t):lt(t))||(r||Ze(e,`get`,t),i))return o;if(Ht(o)){let e=a&&j(t)?o:o.value;return r&&E(e)?Nt(e):e}return E(o)?r?Nt(o):jt(o):o}},pt=class extends ft{constructor(e=!1){super(!1,e)}set(e,t,n,r){let i=e[t],a=b(e)&&j(t);if(!this._isShallow){let e=It(i);if(!Lt(n)&&!It(n)&&(i=U(i),n=U(n)),!a&&Ht(i)&&!Ht(n))return e||(i.value=n),!0}let o=a?Number(t)<e.length:y(e,t),s=Reflect.set(e,t,n,Ht(e)?e:r);return e===U(r)&&(o?re(n,i)&&Qe(e,`set`,t,n,i):Qe(e,`add`,t,n)),s}deleteProperty(e,t){let n=y(e,t),r=e[t],i=Reflect.deleteProperty(e,t);return i&&n&&Qe(e,`delete`,t,void 0,r),i}has(e,t){let n=Reflect.has(e,t);return(!T(t)||!ut.has(t))&&Ze(e,`has`,t),n}ownKeys(e){return Ze(e,`iterate`,b(e)?`length`:Ye),Reflect.ownKeys(e)}},mt=class extends ft{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}},ht=new pt,gt=new mt,_t=new pt(!0),vt=e=>e,yt=e=>Reflect.getPrototypeOf(e);function bt(e,t,n){return function(...r){let i=this.__v_raw,a=U(i),o=x(a),s=e===`entries`||e===Symbol.iterator&&o,c=e===`keys`&&o,l=i[e](...r),u=n?vt:t?Vt:Bt;return!t&&Ze(a,`iterate`,c?B:Ye),{next(){let{value:e,done:t}=l.next();return t?{value:e,done:t}:{value:s?[u(e[0]),u(e[1])]:u(e),done:t}},[Symbol.iterator](){return this}}}}function V(e){return function(...t){return e===`delete`?!1:e===`clear`?void 0:this}}function xt(e,t){let n={get(n){let r=this.__v_raw,i=U(r),a=U(n);e||(re(n,a)&&Ze(i,`get`,n),Ze(i,`get`,a));let{has:o}=yt(i),s=t?vt:e?Vt:Bt;if(o.call(i,n))return s(r.get(n));if(o.call(i,a))return s(r.get(a));r!==i&&r.get(n)},get size(){let t=this.__v_raw;return!e&&Ze(U(t),`iterate`,Ye),t.size},has(t){let n=this.__v_raw,r=U(n),i=U(t);return e||(re(t,i)&&Ze(r,`has`,t),Ze(r,`has`,i)),t===i?n.has(t):n.has(t)||n.has(i)},forEach(n,r){let i=this,a=i.__v_raw,o=U(a),s=t?vt:e?Vt:Bt;return!e&&Ze(o,`iterate`,Ye),a.forEach((e,t)=>n.call(r,s(e),s(t),i))}};return g(n,e?{add:V(`add`),set:V(`set`),delete:V(`delete`),clear:V(`clear`)}:{add(e){!t&&!Lt(e)&&!It(e)&&(e=U(e));let n=U(this);return yt(n).has.call(n,e)||(n.add(e),Qe(n,`add`,e,e)),this},set(e,n){!t&&!Lt(n)&&!It(n)&&(n=U(n));let r=U(this),{has:i,get:a}=yt(r),o=i.call(r,e);o||=(e=U(e),i.call(r,e));let s=a.call(r,e);return r.set(e,n),o?re(n,s)&&Qe(r,`set`,e,n,s):Qe(r,`add`,e,n),this},delete(e){let t=U(this),{has:n,get:r}=yt(t),i=n.call(t,e);i||=(e=U(e),n.call(t,e));let a=r?r.call(t,e):void 0,o=t.delete(e);return i&&Qe(t,`delete`,e,void 0,a),o},clear(){let e=U(this),t=e.size!==0,n=e.clear();return t&&Qe(e,`clear`,void 0,void 0,void 0),n}}),[`keys`,`values`,`entries`,Symbol.iterator].forEach(r=>{n[r]=bt(r,e,t)}),n}function St(e,t){let n=xt(e,t);return(t,r,i)=>r===`__v_isReactive`?!e:r===`__v_isReadonly`?e:r===`__v_raw`?t:Reflect.get(y(n,r)&&r in t?n:t,r,i)}var Ct={get:St(!1,!1)},wt={get:St(!1,!0)},Tt={get:St(!0,!1)},H=new WeakMap,Et=new WeakMap,Dt=new WeakMap,Ot=new WeakMap;function kt(e){switch(e){case`Object`:case`Array`:return 1;case`Map`:case`Set`:case`WeakMap`:case`WeakSet`:return 2;default:return 0}}function At(e){return e.__v_skip||!Object.isExtensible(e)?0:kt(A(e))}function jt(e){return It(e)?e:Pt(e,!1,ht,Ct,H)}function Mt(e){return Pt(e,!1,_t,wt,Et)}function Nt(e){return Pt(e,!0,gt,Tt,Dt)}function Pt(e,t,n,r,i){if(!E(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;let a=At(e);if(a===0)return e;let o=i.get(e);if(o)return o;let s=new Proxy(e,a===2?r:n);return i.set(e,s),s}function Ft(e){return It(e)?Ft(e.__v_raw):!!(e&&e.__v_isReactive)}function It(e){return!!(e&&e.__v_isReadonly)}function Lt(e){return!!(e&&e.__v_isShallow)}function Rt(e){return e?!!e.__v_raw:!1}function U(e){let t=e&&e.__v_raw;return t?U(t):e}function zt(e){return!y(e,`__v_skip`)&&Object.isExtensible(e)&&ae(e,`__v_skip`,!0),e}var Bt=e=>E(e)?jt(e):e,Vt=e=>E(e)?Nt(e):e;function Ht(e){return e?e.__v_isRef===!0:!1}function Ut(e){return W(e,!1)}function Wt(e){return W(e,!0)}function W(e,t){return Ht(e)?e:new Gt(e,t)}var Gt=class{constructor(e,t){this.dep=new Ke,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:U(e),this._value=t?e:Bt(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){let t=this._rawValue,n=this.__v_isShallow||Lt(e)||It(e);e=n?e:U(e),re(e,t)&&(this._rawValue=e,this._value=n?e:Bt(e),this.dep.trigger())}};function G(e){return Ht(e)?e.value:e}var Kt={get:(e,t,n)=>t===`__v_raw`?e:G(Reflect.get(e,t,n)),set:(e,t,n,r)=>{let i=e[t];return Ht(i)&&!Ht(n)?(i.value=n,!0):Reflect.set(e,t,n,r)}};function K(e){return Ft(e)?e:new Proxy(e,Kt)}var qt=class{constructor(e,t,n){this.fn=e,this.setter=t,this._value=void 0,this.dep=new Ke(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=We-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=n}notify(){if(this.flags|=16,!(this.flags&8)&&z!==this)return Ae(this,!0),!0}get value(){let e=this.dep.track();return Ie(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}};function Jt(e,t,n=!1){let r,i;return C(e)?r=e:(r=e.get,i=e.set),new qt(r,i,n)}var Yt={},Xt=new WeakMap,Zt=void 0;function Qt(e,t=!1,n=Zt){if(n){let t=Xt.get(n);t||Xt.set(n,t=[]),t.push(e)}}function $t(e,t,n=u){let{immediate:r,deep:i,once:a,scheduler:o,augmentJob:s,call:c}=n,l=e=>i?e:Lt(e)||i===!1||i===0?en(e,1):en(e),d,p,m,h,g=!1,v=!1;if(Ht(e)?(p=()=>e.value,g=Lt(e)):Ft(e)?(p=()=>l(e),g=!0):b(e)?(v=!0,g=e.some(e=>Ft(e)||Lt(e)),p=()=>e.map(e=>{if(Ht(e))return e.value;if(Ft(e))return l(e);if(C(e))return c?c(e,2):e()})):p=C(e)?t?c?()=>c(e,2):e:()=>{if(m){Ve();try{m()}finally{He()}}let t=Zt;Zt=d;try{return c?c(e,3,[h]):e(h)}finally{Zt=t}}:f,t&&i){let e=p,t=i===!0?1/0:i;p=()=>en(e(),t)}let y=we(),x=()=>{d.stop(),y&&y.active&&_(y.effects,d)};if(a&&t){let e=t;t=(...t)=>{e(...t),x()}}let S=v?Array(e.length).fill(Yt):Yt,w=e=>{if(!(!(d.flags&1)||!d.dirty&&!e))if(t){let e=d.run();if(i||g||(v?e.some((e,t)=>re(e,S[t])):re(e,S))){m&&m();let n=Zt;Zt=d;try{let n=[e,S===Yt?void 0:v&&S[0]===Yt?[]:S,h];S=e,c?c(t,3,n):t(...n)}finally{Zt=n}}}else d.run()};return s&&s(w),d=new Ee(p),d.scheduler=o?()=>o(w,!1):w,h=e=>Qt(e,!1,d),m=d.onStop=()=>{let e=Xt.get(d);if(e){if(c)c(e,4);else for(let t of e)t();Xt.delete(d)}},t?r?w(!0):S=d.run():o?o(w.bind(null,!0),!0):d.run(),x.pause=d.pause.bind(d),x.resume=d.resume.bind(d),x.stop=x,x}function en(e,t=1/0,n){if(t<=0||!E(e)||e.__v_skip||(n||=new Map,(n.get(e)||0)>=t))return e;if(n.set(e,t),t--,Ht(e))en(e.value,t,n);else if(b(e))for(let r=0;r<e.length;r++)en(e[r],t,n);else if(S(e)||x(e))e.forEach(e=>{en(e,t,n)});else if(ee(e)){for(let r in e)en(e[r],t,n);for(let r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&en(e[r],t,n)}return e}function tn(e,t,n,r){try{return r?e(...r):e()}catch(e){rn(e,t,n)}}function nn(e,t,n,r){if(C(e)){let i=tn(e,t,n,r);return i&&D(i)&&i.catch(e=>{rn(e,t,n)}),i}if(b(e)){let i=[];for(let a=0;a<e.length;a++)i.push(nn(e[a],t,n,r));return i}}function rn(e,t,n,r=!0){let i=t?t.vnode:null,{errorHandler:a,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||u;if(t){let r=t.parent,i=t.proxy,o=`https://vuejs.org/error-reference/#runtime-${n}`;for(;r;){let t=r.ec;if(t){for(let n=0;n<t.length;n++)if(t[n](e,i,o)===!1)return}r=r.parent}if(a){Ve(),tn(a,null,10,[e,i,o]),He();return}}an(e,n,i,r,o)}function an(e,t,n,r=!0,i=!1){if(i)throw e;console.error(e)}var on=[],q=-1,sn=[],cn=null,J=0,ln=Promise.resolve(),un=null;function dn(e){let t=un||ln;return e?t.then(this?e.bind(this):e):t}function fn(e){let t=q+1,n=on.length;for(;t<n;){let r=t+n>>>1,i=on[r],a=vn(i);a<e||a===e&&i.flags&2?t=r+1:n=r}return t}function pn(e){if(!(e.flags&1)){let t=vn(e),n=on[on.length-1];!n||!(e.flags&2)&&t>=vn(n)?on.push(e):on.splice(fn(t),0,e),e.flags|=1,mn()}}function mn(){un||=ln.then(yn)}function hn(e){b(e)?sn.push(...e):cn&&e.id===-1?cn.splice(J+1,0,e):e.flags&1||(sn.push(e),e.flags|=1),mn()}function gn(e,t,n=q+1){for(;n<on.length;n++){let t=on[n];if(t&&t.flags&2){if(e&&t.id!==e.uid)continue;on.splice(n,1),n--,t.flags&4&&(t.flags&=-2),t(),t.flags&4||(t.flags&=-2)}}}function _n(e){if(sn.length){let e=[...new Set(sn)].sort((e,t)=>vn(e)-vn(t));if(sn.length=0,cn){cn.push(...e);return}for(cn=e,J=0;J<cn.length;J++){let e=cn[J];e.flags&4&&(e.flags&=-2),e.flags&8||e(),e.flags&=-2}cn=null,J=0}}var vn=e=>e.id==null?e.flags&2?-1:1/0:e.id;function yn(e){try{for(q=0;q<on.length;q++){let e=on[q];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),tn(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;q<on.length;q++){let e=on[q];e&&(e.flags&=-2)}q=-1,on.length=0,_n(e),un=null,(on.length||sn.length)&&yn(e)}}var bn=null,xn=null;function Sn(e){let t=bn;return bn=e,xn=e&&e.type.__scopeId||null,t}function Cn(e,t=bn,n){if(!t||e._n)return e;let r=(...n)=>{r._d&&Ei(-1);let i=Sn(t),a;try{a=e(...n)}finally{Sn(i),r._d&&Ei(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function wn(e,t){if(bn===null)return e;let n=da(bn),r=e.dirs||=[];for(let e=0;e<t.length;e++){let[i,a,o,s=u]=t[e];i&&(C(i)&&(i={mounted:i,updated:i}),i.deep&&en(a),r.push({dir:i,instance:n,value:a,oldValue:void 0,arg:o,modifiers:s}))}return e}function Tn(e,t,n,r){let i=e.dirs,a=t&&t.dirs;for(let o=0;o<i.length;o++){let s=i[o];a&&(s.oldValue=a[o].value);let c=s.dir[r];c&&(Ve(),nn(c,n,8,[e.el,s,e,t]),He())}}function En(e,t){if(Yi){let n=Yi.provides,r=Yi.parent&&Yi.parent.provides;r===n&&(n=Yi.provides=Object.create(r)),n[e]=t}}function Dn(e,t,n=!1){let r=Xi();if(r||Ar){let i=Ar?Ar._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(i&&e in i)return i[e];if(arguments.length>1)return n&&C(t)?t.call(r&&r.proxy):t}}var On=Symbol.for(`v-scx`),kn=()=>Dn(On);function An(e,t,n){return jn(e,t,n)}function jn(e,t,n=u){let{immediate:r,deep:i,flush:a,once:o}=n,s=g({},n),c=t&&r||!t&&a!==`post`,l;if(na){if(a===`sync`){let e=kn();l=e.__watcherHandles||=[]}else if(!c){let e=()=>{};return e.stop=f,e.resume=f,e.pause=f,e}}let d=Yi;s.call=(e,t,n)=>nn(e,d,t,n);let p=!1;a===`post`?s.scheduler=e=>{oi(e,d&&d.suspense)}:a!==`sync`&&(p=!0,s.scheduler=(e,t)=>{t?e():pn(e)}),s.augmentJob=e=>{t&&(e.flags|=4),p&&(e.flags|=2,d&&(e.id=d.uid,e.i=d))};let m=$t(e,t,s);return na&&(l?l.push(m):c&&m()),m}function Mn(e,t,n){let r=this.proxy,i=w(e)?e.includes(`.`)?Nn(r,e):()=>r[e]:e.bind(r,r),a;C(t)?a=t:(a=t.handler,n=t);let o=$i(this),s=jn(i,a.bind(r),n);return o(),s}function Nn(e,t){let n=t.split(`.`);return()=>{let t=e;for(let e=0;e<n.length&&t;e++)t=t[n[e]];return t}}var Pn=Symbol(`_vte`),Fn=e=>e.__isTeleport,In=Symbol(`_leaveCb`);function Ln(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Ln(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Rn(e,t){return C(e)?(()=>g({name:e.name},t,{setup:e}))():e}function zn(e){e.ids=[e.ids[0]+ e.ids[2]+++`-`,0,0]}var Bn=new WeakMap;function Vn(e,t,n,r,i=!1){if(b(e)){e.forEach((e,a)=>Vn(e,t&&(b(t)?t[a]:t),n,r,i));return}if(Un(r)&&!i){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Vn(e,t,n,r.component.subTree);return}let a=r.shapeFlag&4?da(r.component):r.el,o=i?null:a,{i:s,r:c}=e,l=t&&t.r,d=s.refs===u?s.refs={}:s.refs,f=s.setupState,m=U(f),h=f===u?p:e=>y(m,e),g=e=>!0;if(l!=null&&l!==c){if(Hn(t),w(l))d[l]=null,h(l)&&(f[l]=null);else if(Ht(l)){g(l)&&(l.value=null);let e=t;e.k&&(d[e.k]=null)}}if(C(c))tn(c,s,12,[o,d]);else{let t=w(c),r=Ht(c);if(t||r){let s=()=>{if(e.f){let n=t?h(c)?f[c]:d[c]:g(c)||!e.k?c.value:d[e.k];if(i)b(n)&&_(n,a);else if(b(n))n.includes(a)||n.push(a);else if(t)d[c]=[a],h(c)&&(f[c]=d[c]);else{let t=[a];g(c)&&(c.value=t),e.k&&(d[e.k]=t)}}else t?(d[c]=o,h(c)&&(f[c]=o)):r&&(g(c)&&(c.value=o),e.k&&(d[e.k]=o))};if(o){let t=()=>{s(),Bn.delete(e)};t.id=-1,Bn.set(e,t),oi(t,n)}else Hn(e),s()}}}function Hn(e){let t=Bn.get(e);t&&(t.flags|=8,Bn.delete(e))}ce().requestIdleCallback,ce().cancelIdleCallback;var Un=e=>!!e.type.__asyncLoader,Wn=e=>e.type.__isKeepAlive;function Gn(e,t){qn(e,`a`,t)}function Kn(e,t){qn(e,`da`,t)}function qn(e,t,n=Yi){let r=e.__wdc||=()=>{let t=n;for(;t;){if(t.isDeactivated)return;t=t.parent}return e()};if(Yn(t,r,n),n){let e=n.parent;for(;e&&e.parent;)Wn(e.parent.vnode)&&Jn(r,t,n,e),e=e.parent}}function Jn(e,t,n,r){let i=Yn(t,e,r,!0);nr(()=>{_(r[t],i)},n)}function Yn(e,t,n=Yi,r=!1){if(n){let i=n[e]||(n[e]=[]),a=t.__weh||=(...r)=>{Ve();let i=$i(n),a=nn(t,n,e,r);return i(),He(),a};return r?i.unshift(a):i.push(a),a}}var Xn=e=>(t,n=Yi)=>{(!na||e===`sp`)&&Yn(e,(...e)=>t(...e),n)},Zn=Xn(`bm`),Qn=Xn(`m`),$n=Xn(`bu`),er=Xn(`u`),tr=Xn(`bum`),nr=Xn(`um`),rr=Xn(`sp`),ir=Xn(`rtg`),ar=Xn(`rtc`);function or(e,t=Yi){Yn(`ec`,e,t)}var sr=Symbol.for(`v-ndc`);function cr(e,t,n,r){let i,a=n&&n[r],o=b(e);if(o||w(e)){let n=o&&Ft(e),r=!1,s=!1;n&&(r=!Lt(e),s=It(e),e=et(e)),i=Array(e.length);for(let n=0,o=e.length;n<o;n++)i[n]=t(r?s?Vt(Bt(e[n])):Bt(e[n]):e[n],n,void 0,a&&a[n])}else if(typeof e==`number`){i=Array(e);for(let n=0;n<e;n++)i[n]=t(n+1,n,void 0,a&&a[n])}else if(E(e))if(e[Symbol.iterator])i=Array.from(e,(e,n)=>t(e,n,void 0,a&&a[n]));else{let n=Object.keys(e);i=Array(n.length);for(let r=0,o=n.length;r<o;r++){let o=n[r];i[r]=t(e[o],o,r,a&&a[r])}}else i=[];return n&&(n[r]=i),i}var lr=e=>e?ta(e)?da(e):lr(e.parent):null,ur=g(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>lr(e.parent),$root:e=>lr(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>yr(e),$forceUpdate:e=>e.f||=()=>{pn(e.update)},$nextTick:e=>e.n||=dn.bind(e.proxy),$watch:e=>Mn.bind(e)}),dr=(e,t)=>e!==u&&!e.__isScriptSetup&&y(e,t),fr={get({_:e},t){if(t===`__v_skip`)return!0;let{ctx:n,setupState:r,data:i,props:a,accessCache:o,type:s,appContext:c}=e;if(t[0]!==`$`){let e=o[t];if(e!==void 0)switch(e){case 1:return r[t];case 2:return i[t];case 4:return n[t];case 3:return a[t]}else if(dr(r,t))return o[t]=1,r[t];else if(i!==u&&y(i,t))return o[t]=2,i[t];else if(y(a,t))return o[t]=3,a[t];else if(n!==u&&y(n,t))return o[t]=4,n[t];else mr&&(o[t]=0)}let l=ur[t],d,f;if(l)return t===`$attrs`&&Ze(e.attrs,`get`,``),l(e);if((d=s.__cssModules)&&(d=d[t]))return d;if(n!==u&&y(n,t))return o[t]=4,n[t];if(f=c.config.globalProperties,y(f,t))return f[t]},set({_:e},t,n){let{data:r,setupState:i,ctx:a}=e;return dr(i,t)?(i[t]=n,!0):r!==u&&y(r,t)?(r[t]=n,!0):y(e.props,t)||t[0]===`$`&&t.slice(1)in e?!1:(a[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:i,props:a,type:o}},s){let c;return!!(n[s]||e!==u&&s[0]!==`$`&&y(e,s)||dr(t,s)||y(a,s)||y(r,s)||y(ur,s)||y(i.config.globalProperties,s)||(c=o.__cssModules)&&c[s])},defineProperty(e,t,n){return n.get==null?y(n,`value`)&&this.set(e,t,n.value,null):e._.accessCache[t]=0,Reflect.defineProperty(e,t,n)}};function pr(e){return b(e)?e.reduce((e,t)=>(e[t]=null,e),{}):e}var mr=!0;function hr(e){let t=yr(e),n=e.proxy,r=e.ctx;mr=!1,t.beforeCreate&&_r(t.beforeCreate,e,`bc`);let{data:i,computed:a,methods:o,watch:s,provide:c,inject:l,created:u,beforeMount:d,mounted:p,beforeUpdate:m,updated:h,activated:g,deactivated:_,beforeDestroy:v,beforeUnmount:y,destroyed:x,unmounted:S,render:w,renderTracked:T,renderTriggered:D,errorCaptured:O,serverPrefetch:k,expose:A,inheritAttrs:ee,components:j,directives:te,filters:M}=t;if(l&&gr(l,r,null),o)for(let e in o){let t=o[e];C(t)&&(r[e]=t.bind(n))}if(i){let t=i.call(n,n);E(t)&&(e.data=jt(t))}if(mr=!0,a)for(let e in a){let t=a[e],i=pa({get:C(t)?t.bind(n,n):C(t.get)?t.get.bind(n,n):f,set:!C(t)&&C(t.set)?t.set.bind(n):f});Object.defineProperty(r,e,{enumerable:!0,configurable:!0,get:()=>i.value,set:e=>i.value=e})}if(s)for(let e in s)vr(s[e],r,n,e);if(c){let e=C(c)?c.call(n):c;Reflect.ownKeys(e).forEach(t=>{En(t,e[t])})}u&&_r(u,e,`c`);function N(e,t){b(t)?t.forEach(t=>e(t.bind(n))):t&&e(t.bind(n))}if(N(Zn,d),N(Qn,p),N($n,m),N(er,h),N(Gn,g),N(Kn,_),N(or,O),N(ar,T),N(ir,D),N(tr,y),N(nr,S),N(rr,k),b(A))if(A.length){let t=e.exposed||={};A.forEach(e=>{Object.defineProperty(t,e,{get:()=>n[e],set:t=>n[e]=t,enumerable:!0})})}else e.exposed||={};w&&e.render===f&&(e.render=w),ee!=null&&(e.inheritAttrs=ee),j&&(e.components=j),te&&(e.directives=te),k&&zn(e)}function gr(e,t,n=f){for(let n in b(e)&&(e=wr(e)),e){let r=e[n],i;i=E(r)?`default`in r?Dn(r.from||n,r.default,!0):Dn(r.from||n):Dn(r),Ht(i)?Object.defineProperty(t,n,{enumerable:!0,configurable:!0,get:()=>i.value,set:e=>i.value=e}):t[n]=i}}function _r(e,t,n){nn(b(e)?e.map(e=>e.bind(t.proxy)):e.bind(t.proxy),t,n)}function vr(e,t,n,r){let i=r.includes(`.`)?Nn(n,r):()=>n[r];if(w(e)){let n=t[e];C(n)&&An(i,n)}else if(C(e))An(i,e.bind(n));else if(E(e))if(b(e))e.forEach(e=>vr(e,t,n,r));else{let r=C(e.handler)?e.handler.bind(n):t[e.handler];C(r)&&An(i,r,e)}}function yr(e){let t=e.type,{mixins:n,extends:r}=t,{mixins:i,optionsCache:a,config:{optionMergeStrategies:o}}=e.appContext,s=a.get(t),c;return s?c=s:!i.length&&!n&&!r?c=t:(c={},i.length&&i.forEach(e=>br(c,e,o,!0)),br(c,t,o)),E(t)&&a.set(t,c),c}function br(e,t,n,r=!1){let{mixins:i,extends:a}=t;for(let o in a&&br(e,a,n,!0),i&&i.forEach(t=>br(e,t,n,!0)),t)if(!(r&&o===`expose`)){let r=xr[o]||n&&n[o];e[o]=r?r(e[o],t[o]):t[o]}return e}var xr={data:Sr,props:Er,emits:Er,methods:Tr,computed:Tr,beforeCreate:Y,created:Y,beforeMount:Y,mounted:Y,beforeUpdate:Y,updated:Y,beforeDestroy:Y,beforeUnmount:Y,destroyed:Y,unmounted:Y,activated:Y,deactivated:Y,errorCaptured:Y,serverPrefetch:Y,components:Tr,directives:Tr,watch:Dr,provide:Sr,inject:Cr};function Sr(e,t){return t?e?function(){return g(C(e)?e.call(this,this):e,C(t)?t.call(this,this):t)}:t:e}function Cr(e,t){return Tr(wr(e),wr(t))}function wr(e){if(b(e)){let t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function Y(e,t){return e?[...new Set([].concat(e,t))]:t}function Tr(e,t){return e?g(Object.create(null),e,t):t}function Er(e,t){return e?b(e)&&b(t)?[...new Set([...e,...t])]:g(Object.create(null),pr(e),pr(t??{})):t}function Dr(e,t){if(!e)return t;if(!t)return e;let n=g(Object.create(null),e);for(let r in t)n[r]=Y(e[r],t[r]);return n}function Or(){return{app:null,config:{isNativeTag:p,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}var X=0;function kr(e,t){return function(n,r=null){C(n)||(n=g({},n)),r!=null&&!E(r)&&(r=null);let i=Or(),a=new WeakSet,o=[],s=!1,c=i.app={_uid:X++,_component:n,_props:r,_container:null,_context:i,_instance:null,version:ma,get config(){return i.config},set config(e){},use(e,...t){return a.has(e)||(e&&C(e.install)?(a.add(e),e.install(c,...t)):C(e)&&(a.add(e),e(c,...t))),c},mixin(e){return i.mixins.includes(e)||i.mixins.push(e),c},component(e,t){return t?(i.components[e]=t,c):i.components[e]},directive(e,t){return t?(i.directives[e]=t,c):i.directives[e]},mount(a,o,l){if(!s){let u=c._ceVNode||Pi(n,r);return u.appContext=i,l===!0?l=`svg`:l===!1&&(l=void 0),o&&t?t(u,a):e(u,a,l),s=!0,c._container=a,a.__vue_app__=c,da(u.component)}},onUnmount(e){o.push(e)},unmount(){s&&(nn(o,c._instance,16),e(null,c._container),delete c._container.__vue_app__)},provide(e,t){return i.provides[e]=t,c},runWithContext(e){let t=Ar;Ar=c;try{return e()}finally{Ar=t}}};return c}}var Ar=null,jr=(e,t)=>t===`modelValue`||t===`model-value`?e.modelModifiers:e[`${t}Modifiers`]||e[`${P(t)}Modifiers`]||e[`${F(t)}Modifiers`];function Mr(e,t,...n){if(e.isUnmounted)return;let r=e.vnode.props||u,i=n,a=t.startsWith(`update:`),o=a&&jr(r,t.slice(7));o&&(o.trim&&(i=n.map(e=>w(e)?e.trim():e)),o.number&&(i=n.map(oe)));let s,c=r[s=R(t)]||r[s=R(P(t))];!c&&a&&(c=r[s=R(F(t))]),c&&nn(c,e,6,i);let l=r[s+`Once`];if(l){if(!e.emitted)e.emitted={};else if(e.emitted[s])return;e.emitted[s]=!0,nn(l,e,6,i)}}var Nr=new WeakMap;function Pr(e,t,n=!1){let r=n?Nr:t.emitsCache,i=r.get(e);if(i!==void 0)return i;let a=e.emits,o={},s=!1;if(!C(e)){let r=e=>{let n=Pr(e,t,!0);n&&(s=!0,g(o,n))};!n&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}return!a&&!s?(E(e)&&r.set(e,null),null):(b(a)?a.forEach(e=>o[e]=null):g(o,a),E(e)&&r.set(e,o),o)}function Fr(e,t){return!e||!m(t)?!1:(t=t.slice(2).replace(/Once$/,``),y(e,t[0].toLowerCase()+t.slice(1))||y(e,F(t))||y(e,t))}function Ir(e){let{type:t,vnode:n,proxy:r,withProxy:i,propsOptions:[a],slots:o,attrs:s,emit:c,render:l,renderCache:u,props:d,data:f,setupState:p,ctx:m,inheritAttrs:g}=e,_=Sn(e),v,y;try{if(n.shapeFlag&4){let e=i||r,t=e;v=Vi(l.call(t,e,u,d,p,f,m)),y=s}else{let e=t;v=Vi(e.length>1?e(d,{attrs:s,slots:o,emit:c}):e(d,null)),y=t.props?s:Lr(s)}}catch(t){xi.length=0,rn(t,e,1),v=Pi(yi)}let b=v;if(y&&g!==!1){let e=Object.keys(y),{shapeFlag:t}=b;e.length&&t&7&&(a&&e.some(h)&&(y=Rr(y,a)),b=Li(b,y,!1,!0))}return n.dirs&&(b=Li(b,null,!1,!0),b.dirs=b.dirs?b.dirs.concat(n.dirs):n.dirs),n.transition&&Ln(b,n.transition),v=b,Sn(_),v}var Lr=e=>{let t;for(let n in e)(n===`class`||n===`style`||m(n))&&((t||={})[n]=e[n]);return t},Rr=(e,t)=>{let n={};for(let r in e)(!h(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function zr(e,t,n){let{props:r,children:i,component:a}=e,{props:o,children:s,patchFlag:c}=t,l=a.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?Br(r,o,l):!!o;if(c&8){let e=t.dynamicProps;for(let t=0;t<e.length;t++){let n=e[t];if(o[n]!==r[n]&&!Fr(l,n))return!0}}}else return(i||s)&&(!s||!s.$stable)?!0:r===o?!1:r?o?Br(r,o,l):!0:!!o;return!1}function Br(e,t,n){let r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let i=0;i<r.length;i++){let a=r[i];if(t[a]!==e[a]&&!Fr(n,a))return!0}return!1}function Vr({vnode:e,parent:t},n){for(;t;){let r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}var Hr={},Ur=()=>Object.create(Hr),Wr=e=>Object.getPrototypeOf(e)===Hr;function Gr(e,t,n,r=!1){let i={},a=Ur();for(let n in e.propsDefaults=Object.create(null),qr(e,t,i,a),e.propsOptions[0])n in i||(i[n]=void 0);n?e.props=r?i:Mt(i):e.type.props?e.props=i:e.props=a,e.attrs=a}function Kr(e,t,n,r){let{props:i,attrs:a,vnode:{patchFlag:o}}=e,s=U(i),[c]=e.propsOptions,l=!1;if((r||o>0)&&!(o&16)){if(o&8){let n=e.vnode.dynamicProps;for(let r=0;r<n.length;r++){let o=n[r];if(Fr(e.emitsOptions,o))continue;let u=t[o];if(c)if(y(a,o))u!==a[o]&&(a[o]=u,l=!0);else{let t=P(o);i[t]=Jr(c,s,t,u,e,!1)}else u!==a[o]&&(a[o]=u,l=!0)}}}else{qr(e,t,i,a)&&(l=!0);let r;for(let a in s)(!t||!y(t,a)&&((r=F(a))===a||!y(t,r)))&&(c?n&&(n[a]!==void 0||n[r]!==void 0)&&(i[a]=Jr(c,s,a,void 0,e,!0)):delete i[a]);if(a!==s)for(let e in a)(!t||!y(t,e))&&(delete a[e],l=!0)}l&&Qe(e.attrs,`set`,``)}function qr(e,t,n,r){let[i,a]=e.propsOptions,o=!1,s;if(t)for(let c in t){if(te(c))continue;let l=t[c],u;i&&y(i,u=P(c))?!a||!a.includes(u)?n[u]=l:(s||={})[u]=l:Fr(e.emitsOptions,c)||(!(c in r)||l!==r[c])&&(r[c]=l,o=!0)}if(a){let t=U(n),r=s||u;for(let o=0;o<a.length;o++){let s=a[o];n[s]=Jr(i,t,s,r[s],e,!y(r,s))}}return o}function Jr(e,t,n,r,i,a){let o=e[n];if(o!=null){let e=y(o,`default`);if(e&&r===void 0){let e=o.default;if(o.type!==Function&&!o.skipFactory&&C(e)){let{propsDefaults:a}=i;if(n in a)r=a[n];else{let o=$i(i);r=a[n]=e.call(null,t),o()}}else r=e;i.ce&&i.ce._setProp(n,r)}o[0]&&(a&&!e?r=!1:o[1]&&(r===``||r===F(n))&&(r=!0))}return r}var Yr=new WeakMap;function Xr(e,t,n=!1){let r=n?Yr:t.propsCache,i=r.get(e);if(i)return i;let a=e.props,o={},s=[],c=!1;if(!C(e)){let r=e=>{c=!0;let[n,r]=Xr(e,t,!0);g(o,n),r&&s.push(...r)};!n&&t.mixins.length&&t.mixins.forEach(r),e.extends&&r(e.extends),e.mixins&&e.mixins.forEach(r)}if(!a&&!c)return E(e)&&r.set(e,d),d;if(b(a))for(let e=0;e<a.length;e++){let t=P(a[e]);Zr(t)&&(o[t]=u)}else if(a)for(let e in a){let t=P(e);if(Zr(t)){let n=a[e],r=o[t]=b(n)||C(n)?{type:n}:g({},n),i=r.type,c=!1,l=!0;if(b(i))for(let e=0;e<i.length;++e){let t=i[e],n=C(t)&&t.name;if(n===`Boolean`){c=!0;break}else n===`String`&&(l=!1)}else c=C(i)&&i.name===`Boolean`;r[0]=c,r[1]=l,(c||y(r,`default`))&&s.push(t)}}let l=[o,s];return E(e)&&r.set(e,l),l}function Zr(e){return e[0]!==`$`&&!te(e)}var Qr=e=>e===`_`||e===`_ctx`||e===`$stable`,$r=e=>b(e)?e.map(Vi):[Vi(e)],ei=(e,t,n)=>{if(t._n)return t;let r=Cn((...e)=>$r(t(...e)),n);return r._c=!1,r},ti=(e,t,n)=>{let r=e._ctx;for(let n in e){if(Qr(n))continue;let i=e[n];if(C(i))t[n]=ei(n,i,r);else if(i!=null){let e=$r(i);t[n]=()=>e}}},ni=(e,t)=>{let n=$r(t);e.slots.default=()=>n},ri=(e,t,n)=>{for(let r in t)(n||!Qr(r))&&(e[r]=t[r])},ii=(e,t,n)=>{let r=e.slots=Ur();if(e.vnode.shapeFlag&32){let e=t._;e?(ri(r,t,n),n&&ae(r,`_`,e,!0)):ti(t,r)}else t&&ni(e,t)},ai=(e,t,n)=>{let{vnode:r,slots:i}=e,a=!0,o=u;if(r.shapeFlag&32){let e=t._;e?n&&e===1?a=!1:ri(i,t,n):(a=!t.$stable,ti(t,i)),o=t}else t&&(ni(e,t),o={default:1});if(a)for(let e in i)!Qr(e)&&o[e]==null&&delete i[e]},oi=_i;function si(e){return ci(e)}function ci(e,t){let n=ce();n.__VUE__=!0;let{insert:r,remove:i,patchProp:a,createElement:o,createText:s,createComment:c,setText:l,setElementText:p,parentNode:m,nextSibling:h,setScopeId:g=f,insertStaticContent:_}=e,v=(e,t,n,r=null,i=null,a=null,o=void 0,s=null,c=!!t.dynamicChildren)=>{if(e===t)return;e&&!ji(e,t)&&(r=de(e),ae(e,i,a,!0),e=null),t.patchFlag===-2&&(c=!1,t.dynamicChildren=null);let{type:l,ref:u,shapeFlag:d}=t;switch(l){case vi:y(e,t,n,r);break;case yi:b(e,t,n,r);break;case bi:e??x(t,n,r,o);break;case Q:ee(e,t,n,r,i,a,o,s,c);break;default:d&1?w(e,t,n,r,i,a,o,s,c):d&6?j(e,t,n,r,i,a,o,s,c):(d&64||d&128)&&l.process(e,t,n,r,i,a,o,s,c,me)}u!=null&&i?Vn(u,e&&e.ref,a,t||e,!t):u==null&&e&&e.ref!=null&&Vn(e.ref,null,a,e,!0)},y=(e,t,n,i)=>{if(e==null)r(t.el=s(t.children),n,i);else{let n=t.el=e.el;t.children!==e.children&&l(n,t.children)}},b=(e,t,n,i)=>{e==null?r(t.el=c(t.children||``),n,i):t.el=e.el},x=(e,t,n,r)=>{[e.el,e.anchor]=_(e.children,t,n,r,e.el,e.anchor)},S=({el:e,anchor:t},n,i)=>{let a;for(;e&&e!==t;)a=h(e),r(e,n,i),e=a;r(t,n,i)},C=({el:e,anchor:t})=>{let n;for(;e&&e!==t;)n=h(e),i(e),e=n;i(t)},w=(e,t,n,r,i,a,o,s,c)=>{if(t.type===`svg`?o=`svg`:t.type===`math`&&(o=`mathml`),e==null)T(t,n,r,i,a,o,s,c);else{let n=e.el&&e.el._isVueCE?e.el:null;try{n&&n._beginPatch(),O(e,t,i,a,o,s,c)}finally{n&&n._endPatch()}}},T=(e,t,n,i,s,c,l,u)=>{let d,f,{props:m,shapeFlag:h,transition:g,dirs:_}=e;if(d=e.el=o(e.type,c,m&&m.is,m),h&8?p(d,e.children):h&16&&D(e.children,d,null,i,s,li(e,c),l,u),_&&Tn(e,null,i,`created`),E(d,e,e.scopeId,l,i),m){for(let e in m)e!==`value`&&!te(e)&&a(d,e,null,m[e],c,i);`value`in m&&a(d,`value`,null,m.value,c),(f=m.onVnodeBeforeMount)&&Gi(f,i,e)}_&&Tn(e,null,i,`beforeMount`);let v=ui(s,g);v&&g.beforeEnter(d),r(d,t,n),((f=m&&m.onVnodeMounted)||v||_)&&oi(()=>{f&&Gi(f,i,e),v&&g.enter(d),_&&Tn(e,null,i,`mounted`)},s)},E=(e,t,n,r,i)=>{if(n&&g(e,n),r)for(let t=0;t<r.length;t++)g(e,r[t]);if(i){let n=i.subTree;if(t===n||gi(n.type)&&(n.ssContent===t||n.ssFallback===t)){let t=i.vnode;E(e,t,t.scopeId,t.slotScopeIds,i.parent)}}},D=(e,t,n,r,i,a,o,s,c=0)=>{for(let l=c;l<e.length;l++)v(null,e[l]=s?Hi(e[l]):Vi(e[l]),t,n,r,i,a,o,s)},O=(e,t,n,r,i,o,s)=>{let c=t.el=e.el,{patchFlag:l,dynamicChildren:d,dirs:f}=t;l|=e.patchFlag&16;let m=e.props||u,h=t.props||u,g;if(n&&Z(n,!1),(g=h.onVnodeBeforeUpdate)&&Gi(g,n,t,e),f&&Tn(t,e,n,`beforeUpdate`),n&&Z(n,!0),(m.innerHTML&&h.innerHTML==null||m.textContent&&h.textContent==null)&&p(c,``),d?k(e.dynamicChildren,d,c,n,r,li(t,i),o):s||F(e,t,c,null,n,r,li(t,i),o,!1),l>0){if(l&16)A(c,m,h,n,i);else if(l&2&&m.class!==h.class&&a(c,`class`,null,h.class,i),l&4&&a(c,`style`,m.style,h.style,i),l&8){let e=t.dynamicProps;for(let t=0;t<e.length;t++){let r=e[t],o=m[r],s=h[r];(s!==o||r===`value`)&&a(c,r,o,s,i,n)}}l&1&&e.children!==t.children&&p(c,t.children)}else !s&&d==null&&A(c,m,h,n,i);((g=h.onVnodeUpdated)||f)&&oi(()=>{g&&Gi(g,n,t,e),f&&Tn(t,e,n,`updated`)},r)},k=(e,t,n,r,i,a,o)=>{for(let s=0;s<t.length;s++){let c=e[s],l=t[s];v(c,l,c.el&&(c.type===Q||!ji(c,l)||c.shapeFlag&198)?m(c.el):n,null,r,i,a,o,!0)}},A=(e,t,n,r,i)=>{if(t!==n){if(t!==u)for(let o in t)!te(o)&&!(o in n)&&a(e,o,t[o],null,i,r);for(let o in n){if(te(o))continue;let s=n[o],c=t[o];s!==c&&o!==`value`&&a(e,o,c,s,i,r)}`value`in n&&a(e,`value`,t.value,n.value,i)}},ee=(e,t,n,i,a,o,c,l,u)=>{let d=t.el=e?e.el:s(``),f=t.anchor=e?e.anchor:s(``),{patchFlag:p,dynamicChildren:m,slotScopeIds:h}=t;h&&(l=l?l.concat(h):h),e==null?(r(d,n,i),r(f,n,i),D(t.children||[],n,f,a,o,c,l,u)):p>0&&p&64&&m&&e.dynamicChildren&&e.dynamicChildren.length===m.length?(k(e.dynamicChildren,m,n,a,o,c,l),(t.key!=null||a&&t===a.subTree)&&di(e,t,!0)):F(e,t,n,f,a,o,c,l,u)},j=(e,t,n,r,i,a,o,s,c)=>{t.slotScopeIds=s,e==null?t.shapeFlag&512?i.ctx.activate(t,n,r,o,c):M(t,n,r,i,a,o,c):N(e,t,c)},M=(e,t,n,r,i,a,o)=>{let s=e.component=Ji(e,r,i);if(Wn(e)&&(s.ctx.renderer=me),ra(s,!1,o),s.asyncDep){if(i&&i.registerDep(s,P,o),!e.el){let r=s.subTree=Pi(yi);b(null,r,t,n),e.placeholder=r.el}}else P(s,e,t,n,i,a,o)},N=(e,t,n)=>{let r=t.component=e.component;if(zr(e,t,n))if(r.asyncDep&&!r.asyncResolved){ne(r,t,n);return}else r.next=t,r.update();else t.el=e.el,r.vnode=t},P=(e,t,n,r,i,a,o)=>{let s=()=>{if(e.isMounted){let{next:t,bu:n,u:r,parent:c,vnode:l}=e;{let n=pi(e);if(n){t&&(t.el=l.el,ne(e,t,o)),n.asyncDep.then(()=>{e.isUnmounted||s()});return}}let u=t,d;Z(e,!1),t?(t.el=l.el,ne(e,t,o)):t=l,n&&ie(n),(d=t.props&&t.props.onVnodeBeforeUpdate)&&Gi(d,c,t,l),Z(e,!0);let f=Ir(e),p=e.subTree;e.subTree=f,v(p,f,m(p.el),de(p),e,i,a),t.el=f.el,u===null&&Vr(e,f.el),r&&oi(r,i),(d=t.props&&t.props.onVnodeUpdated)&&oi(()=>Gi(d,c,t,l),i)}else{let o,{el:s,props:c}=t,{bm:l,m:u,parent:d,root:f,type:p}=e,m=Un(t);if(Z(e,!1),l&&ie(l),!m&&(o=c&&c.onVnodeBeforeMount)&&Gi(o,d,t),Z(e,!0),s&&ge){let t=()=>{e.subTree=Ir(e),ge(s,e.subTree,e,i,null)};m&&p.__asyncHydrate?p.__asyncHydrate(s,e,t):t()}else{f.ce&&f.ce._def.shadowRoot!==!1&&f.ce._injectChildStyle(p);let o=e.subTree=Ir(e);v(null,o,n,r,e,i,a),t.el=o.el}if(u&&oi(u,i),!m&&(o=c&&c.onVnodeMounted)){let e=t;oi(()=>Gi(o,d,e),i)}(t.shapeFlag&256||d&&Un(d.vnode)&&d.vnode.shapeFlag&256)&&e.a&&oi(e.a,i),e.isMounted=!0,t=n=r=null}};e.scope.on();let c=e.effect=new Ee(s);e.scope.off();let l=e.update=c.run.bind(c),u=e.job=c.runIfDirty.bind(c);u.i=e,u.id=e.uid,c.scheduler=()=>pn(u),Z(e,!0),l()},ne=(e,t,n)=>{t.component=e;let r=e.vnode.props;e.vnode=t,e.next=null,Kr(e,t.props,r,n),ai(e,t.children,n),Ve(),gn(e),He()},F=(e,t,n,r,i,a,o,s,c=!1)=>{let l=e&&e.children,u=e?e.shapeFlag:0,d=t.children,{patchFlag:f,shapeFlag:m}=t;if(f>0){if(f&128){R(l,d,n,r,i,a,o,s,c);return}else if(f&256){I(l,d,n,r,i,a,o,s,c);return}}m&8?(u&16&&ue(l,i,a),d!==l&&p(n,d)):u&16?m&16?R(l,d,n,r,i,a,o,s,c):ue(l,i,a,!0):(u&8&&p(n,``),m&16&&D(d,n,r,i,a,o,s,c))},I=(e,t,n,r,i,a,o,s,c)=>{e||=d,t||=d;let l=e.length,u=t.length,f=Math.min(l,u),p;for(p=0;p<f;p++){let r=t[p]=c?Hi(t[p]):Vi(t[p]);v(e[p],r,n,null,i,a,o,s,c)}l>u?ue(e,i,a,!0,!1,f):D(t,n,r,i,a,o,s,c,f)},R=(e,t,n,r,i,a,o,s,c)=>{let l=0,u=t.length,f=e.length-1,p=u-1;for(;l<=f&&l<=p;){let r=e[l],u=t[l]=c?Hi(t[l]):Vi(t[l]);if(ji(r,u))v(r,u,n,null,i,a,o,s,c);else break;l++}for(;l<=f&&l<=p;){let r=e[f],l=t[p]=c?Hi(t[p]):Vi(t[p]);if(ji(r,l))v(r,l,n,null,i,a,o,s,c);else break;f--,p--}if(l>f){if(l<=p){let e=p+1,d=e<u?t[e].el:r;for(;l<=p;)v(null,t[l]=c?Hi(t[l]):Vi(t[l]),n,d,i,a,o,s,c),l++}}else if(l>p)for(;l<=f;)ae(e[l],i,a,!0),l++;else{let m=l,h=l,g=new Map;for(l=h;l<=p;l++){let e=t[l]=c?Hi(t[l]):Vi(t[l]);e.key!=null&&g.set(e.key,l)}let _,y=0,b=p-h+1,x=!1,S=0,C=Array(b);for(l=0;l<b;l++)C[l]=0;for(l=m;l<=f;l++){let r=e[l];if(y>=b){ae(r,i,a,!0);continue}let u;if(r.key!=null)u=g.get(r.key);else for(_=h;_<=p;_++)if(C[_-h]===0&&ji(r,t[_])){u=_;break}u===void 0?ae(r,i,a,!0):(C[u-h]=l+1,u>=S?S=u:x=!0,v(r,t[u],n,null,i,a,o,s,c),y++)}let w=x?fi(C):d;for(_=w.length-1,l=b-1;l>=0;l--){let e=h+l,d=t[e],f=t[e+1],p=e+1<u?f.el||hi(f):r;C[l]===0?v(null,d,n,p,i,a,o,s,c):x&&(_<0||l!==w[_]?re(d,n,p,2):_--)}}},re=(e,t,n,a,o=null)=>{let{el:s,type:c,transition:l,children:u,shapeFlag:d}=e;if(d&6){re(e.component.subTree,t,n,a);return}if(d&128){e.suspense.move(t,n,a);return}if(d&64){c.move(e,t,n,me);return}if(c===Q){r(s,t,n);for(let e=0;e<u.length;e++)re(u[e],t,n,a);r(e.anchor,t,n);return}if(c===bi){S(e,t,n);return}if(a!==2&&d&1&&l)if(a===0)l.beforeEnter(s),r(s,t,n),oi(()=>l.enter(s),o);else{let{leave:a,delayLeave:o,afterLeave:c}=l,u=()=>{e.ctx.isUnmounted?i(s):r(s,t,n)},d=()=>{s._isLeaving&&s[In](!0),a(s,()=>{u(),c&&c()})};o?o(s,u,d):d()}else r(s,t,n)},ae=(e,t,n,r=!1,i=!1)=>{let{type:a,props:o,ref:s,children:c,dynamicChildren:l,shapeFlag:u,patchFlag:d,dirs:f,cacheIndex:p}=e;if(d===-2&&(i=!1),s!=null&&(Ve(),Vn(s,null,n,e,!0),He()),p!=null&&(t.renderCache[p]=void 0),u&256){t.ctx.deactivate(e);return}let m=u&1&&f,h=!Un(e),g;if(h&&(g=o&&o.onVnodeBeforeUnmount)&&Gi(g,t,e),u&6)le(e.component,n,r);else{if(u&128){e.suspense.unmount(n,r);return}m&&Tn(e,null,t,`beforeUnmount`),u&64?e.type.remove(e,t,n,me,r):l&&!l.hasOnce&&(a!==Q||d>0&&d&64)?ue(l,t,n,!1,!0):(a===Q&&d&384||!i&&u&16)&&ue(c,t,n),r&&oe(e)}(h&&(g=o&&o.onVnodeUnmounted)||m)&&oi(()=>{g&&Gi(g,t,e),m&&Tn(e,null,t,`unmounted`)},n)},oe=e=>{let{type:t,el:n,anchor:r,transition:a}=e;if(t===Q){se(n,r);return}if(t===bi){C(e);return}let o=()=>{i(n),a&&!a.persisted&&a.afterLeave&&a.afterLeave()};if(e.shapeFlag&1&&a&&!a.persisted){let{leave:t,delayLeave:r}=a,i=()=>t(n,o);r?r(e.el,o,i):i()}else o()},se=(e,t)=>{let n;for(;e!==t;)n=h(e),i(e),e=n;i(t)},le=(e,t,n)=>{let{bum:r,scope:i,job:a,subTree:o,um:s,m:c,a:l}=e;mi(c),mi(l),r&&ie(r),i.stop(),a&&(a.flags|=8,ae(o,e,t,n)),s&&oi(s,t),oi(()=>{e.isUnmounted=!0},t)},ue=(e,t,n,r=!1,i=!1,a=0)=>{for(let o=a;o<e.length;o++)ae(e[o],t,n,r,i)},de=e=>{if(e.shapeFlag&6)return de(e.component.subTree);if(e.shapeFlag&128)return e.suspense.next();let t=h(e.anchor||e.el),n=t&&t[Pn];return n?h(n):t},fe=!1,pe=(e,t,n)=>{let r;e==null?t._vnode&&(ae(t._vnode,null,null,!0),r=t._vnode.component):v(t._vnode||null,e,t,null,null,null,n),t._vnode=e,fe||=(fe=!0,gn(r),_n(),!1)},me={p:v,um:ae,m:re,r:oe,mt:M,mc:D,pc:F,pbc:k,n:de,o:e},he,ge;return t&&([he,ge]=t(me)),{render:pe,hydrate:he,createApp:kr(pe,he)}}function li({type:e,props:t},n){return n===`svg`&&e===`foreignObject`||n===`mathml`&&e===`annotation-xml`&&t&&t.encoding&&t.encoding.includes(`html`)?void 0:n}function Z({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function ui(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function di(e,t,n=!1){let r=e.children,i=t.children;if(b(r)&&b(i))for(let t=0;t<r.length;t++){let a=r[t],o=i[t];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=i[t]=Hi(i[t]),o.el=a.el),!n&&o.patchFlag!==-2&&di(a,o)),o.type===vi&&(o.patchFlag===-1?o.__elIndex=t+(e.type===Q?1:0):o.el=a.el),o.type===yi&&!o.el&&(o.el=a.el)}}function fi(e){let t=e.slice(),n=[0],r,i,a,o,s,c=e.length;for(r=0;r<c;r++){let c=e[r];if(c!==0){if(i=n[n.length-1],e[i]<c){t[r]=i,n.push(r);continue}for(a=0,o=n.length-1;a<o;)s=a+o>>1,e[n[s]]<c?a=s+1:o=s;c<e[n[a]]&&(a>0&&(t[r]=n[a-1]),n[a]=r)}}for(a=n.length,o=n[a-1];a-- >0;)n[a]=o,o=t[o];return n}function pi(e){let t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:pi(t)}function mi(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}function hi(e){if(e.placeholder)return e.placeholder;let t=e.component;return t?hi(t.subTree):null}var gi=e=>e.__isSuspense;function _i(e,t){t&&t.pendingBranch?b(e)?t.effects.push(...e):t.effects.push(e):hn(e)}var Q=Symbol.for(`v-fgt`),vi=Symbol.for(`v-txt`),yi=Symbol.for(`v-cmt`),bi=Symbol.for(`v-stc`),xi=[],Si=null;function Ci(e=!1){xi.push(Si=e?null:[])}function wi(){xi.pop(),Si=xi[xi.length-1]||null}var Ti=1;function Ei(e,t=!1){Ti+=e,e<0&&Si&&t&&(Si.hasOnce=!0)}function Di(e){return e.dynamicChildren=Ti>0?Si||d:null,wi(),Ti>0&&Si&&Si.push(e),e}function Oi(e,t,n,r,i,a){return Di($(e,t,n,r,i,a,!0))}function ki(e,t,n,r,i){return Di(Pi(e,t,n,r,i,!0))}function Ai(e){return e?e.__v_isVNode===!0:!1}function ji(e,t){return e.type===t.type&&e.key===t.key}var Mi=({key:e})=>e??null,Ni=({ref:e,ref_key:t,ref_for:n})=>(typeof e==`number`&&(e=``+e),e==null?null:w(e)||Ht(e)||C(e)?{i:bn,r:e,k:t,f:!!n}:e);function $(e,t=null,n=null,r=0,i=null,a=e===Q?0:1,o=!1,s=!1){let c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Mi(t),ref:t&&Ni(t),scopeId:xn,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:a,patchFlag:r,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:bn};return s?(Ui(c,n),a&128&&e.normalize(c)):n&&(c.shapeFlag|=w(n)?8:16),Ti>0&&!o&&Si&&(c.patchFlag>0||a&6)&&c.patchFlag!==32&&Si.push(c),c}var Pi=Fi;function Fi(e,t=null,n=null,r=0,i=null,a=!1){if((!e||e===sr)&&(e=yi),Ai(e)){let r=Li(e,t,!0);return n&&Ui(r,n),Ti>0&&!a&&Si&&(r.shapeFlag&6?Si[Si.indexOf(e)]=r:Si.push(r)),r.patchFlag=-2,r}if(fa(e)&&(e=e.__vccOpts),t){t=Ii(t);let{class:e,style:n}=t;e&&!w(e)&&(t.class=me(e)),E(n)&&(Rt(n)&&!b(n)&&(n=g({},n)),t.style=le(n))}let o=w(e)?1:gi(e)?128:Fn(e)?64:E(e)?4:C(e)?2:0;return $(e,t,n,r,i,o,a,!0)}function Ii(e){return e?Rt(e)||Wr(e)?g({},e):e:null}function Li(e,t,n=!1,r=!1){let{props:i,ref:a,patchFlag:o,children:s,transition:c}=e,l=t?Wi(i||{},t):i,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:l,key:l&&Mi(l),ref:t&&t.ref?n&&a?b(a)?a.concat(Ni(t)):[a,Ni(t)]:Ni(t):a,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:s,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Q?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Li(e.ssContent),ssFallback:e.ssFallback&&Li(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&r&&Ln(u,c.clone(u)),u}function Ri(e=` `,t=0){return Pi(vi,null,e,t)}function zi(e,t){let n=Pi(bi,null,e);return n.staticCount=t,n}function Bi(e=``,t=!1){return t?(Ci(),ki(yi,null,e)):Pi(yi,null,e)}function Vi(e){return e==null||typeof e==`boolean`?Pi(yi):b(e)?Pi(Q,null,e.slice()):Ai(e)?Hi(e):Pi(vi,null,String(e))}function Hi(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:Li(e)}function Ui(e,t){let n=0,{shapeFlag:r}=e;if(t==null)t=null;else if(b(t))n=16;else if(typeof t==`object`)if(r&65){let n=t.default;n&&(n._c&&(n._d=!1),Ui(e,n()),n._c&&(n._d=!0));return}else{n=32;let r=t._;!r&&!Wr(t)?t._ctx=bn:r===3&&bn&&(bn.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else C(t)?(t={default:t,_ctx:bn},n=32):(t=String(t),r&64?(n=16,t=[Ri(t)]):n=8);e.children=t,e.shapeFlag|=n}function Wi(...e){let t={};for(let n=0;n<e.length;n++){let r=e[n];for(let e in r)if(e===`class`)t.class!==r.class&&(t.class=me([t.class,r.class]));else if(e===`style`)t.style=le([t.style,r.style]);else if(m(e)){let n=t[e],i=r[e];i&&n!==i&&!(b(n)&&n.includes(i))&&(t[e]=n?[].concat(n,i):i)}else e!==``&&(t[e]=r[e])}return t}function Gi(e,t,n,r=null){nn(e,t,7,[n,r])}var Ki=Or(),qi=0;function Ji(e,t,n){let r=e.type,i=(t?t.appContext:e.appContext)||Ki,a={uid:qi++,vnode:e,type:r,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Ce(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:[``,0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Xr(r,i),emitsOptions:Pr(r,i),emit:null,emitted:null,propsDefaults:u,inheritAttrs:r.inheritAttrs,ctx:u,data:u,props:u,attrs:u,slots:u,refs:u,setupState:u,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=t?t.root:a,a.emit=Mr.bind(null,a),e.ce&&e.ce(a),a}var Yi=null,Xi=()=>Yi||bn,Zi,Qi;{let e=ce(),t=(t,n)=>{let r;return(r=e[t])||(r=e[t]=[]),r.push(n),e=>{r.length>1?r.forEach(t=>t(e)):r[0](e)}};Zi=t(`__VUE_INSTANCE_SETTERS__`,e=>Yi=e),Qi=t(`__VUE_SSR_SETTERS__`,e=>na=e)}var $i=e=>{let t=Yi;return Zi(e),e.scope.on(),()=>{e.scope.off(),Zi(t)}},ea=()=>{Yi&&Yi.scope.off(),Zi(null)};function ta(e){return e.vnode.shapeFlag&4}var na=!1;function ra(e,t=!1,n=!1){t&&Qi(t);let{props:r,children:i}=e.vnode,a=ta(e);Gr(e,r,a,t),ii(e,i,n||t);let o=a?ia(e,t):void 0;return t&&Qi(!1),o}function ia(e,t){let n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,fr);let{setup:r}=n;if(r){Ve();let n=e.setupContext=r.length>1?ua(e):null,i=$i(e),a=tn(r,e,0,[e.props,n]),o=D(a);if(He(),i(),(o||e.sp)&&!Un(e)&&zn(e),o){if(a.then(ea,ea),t)return a.then(n=>{aa(e,n,t)}).catch(t=>{rn(t,e,0)});e.asyncDep=a}else aa(e,a,t)}else ca(e,t)}function aa(e,t,n){C(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:E(t)&&(e.setupState=K(t)),ca(e,n)}var oa,sa;function ca(e,t,n){let r=e.type;if(!e.render){if(!t&&oa&&!r.render){let t=r.template||yr(e).template;if(t){let{isCustomElement:n,compilerOptions:i}=e.appContext.config,{delimiters:a,compilerOptions:o}=r;r.render=oa(t,g(g({isCustomElement:n,delimiters:a},i),o))}}e.render=r.render||f,sa&&sa(e)}{let t=$i(e);Ve();try{hr(e)}finally{He(),t()}}}var la={get(e,t){return Ze(e,`get`,``),e[t]}};function ua(e){return{attrs:new Proxy(e.attrs,la),slots:e.slots,emit:e.emit,expose:t=>{e.exposed=t||{}}}}function da(e){return e.exposed?e.exposeProxy||=new Proxy(K(zt(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in ur)return ur[n](e)},has(e,t){return t in e||t in ur}}):e.proxy}function fa(e){return C(e)&&`__vccOpts`in e}var pa=(e,t)=>Jt(e,t,na),ma=`3.5.26`,ha=void 0,ga=typeof window<`u`&&window.trustedTypes;if(ga)try{ha=ga.createPolicy(`vue`,{createHTML:e=>e})}catch{}var _a=ha?e=>ha.createHTML(e):e=>e,va=`http://www.w3.org/2000/svg`,ya=`http://www.w3.org/1998/Math/MathML`,ba=typeof document<`u`?document:null,xa=ba&&ba.createElement(`template`),Sa={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{let t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{let i=t===`svg`?ba.createElementNS(va,e):t===`mathml`?ba.createElementNS(ya,e):n?ba.createElement(e,{is:n}):ba.createElement(e);return e===`select`&&r&&r.multiple!=null&&i.setAttribute(`multiple`,r.multiple),i},createText:e=>ba.createTextNode(e),createComment:e=>ba.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>ba.querySelector(e),setScopeId(e,t){e.setAttribute(t,``)},insertStaticContent(e,t,n,r,i,a){let o=n?n.previousSibling:t.lastChild;if(i&&(i===a||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),n),!(i===a||!(i=i.nextSibling)););else{xa.innerHTML=_a(r===`svg`?`<svg>${e}</svg>`:r===`mathml`?`<math>${e}</math>`:e);let i=xa.content;if(r===`svg`||r===`mathml`){let e=i.firstChild;for(;e.firstChild;)i.appendChild(e.firstChild);i.removeChild(e)}t.insertBefore(i,n)}return[o?o.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Ca=Symbol(`_vtc`);function wa(e,t,n){let r=e[Ca];r&&(t=(t?[t,...r]:[...r]).join(` `)),t==null?e.removeAttribute(`class`):n?e.setAttribute(`class`,t):e.className=t}var Ta=Symbol(`_vod`),Ea=Symbol(`_vsh`),Da={name:`show`,beforeMount(e,{value:t},{transition:n}){e[Ta]=e.style.display===`none`?``:e.style.display,n&&t?n.beforeEnter(e):Oa(e,t)},mounted(e,{value:t},{transition:n}){n&&t&&n.enter(e)},updated(e,{value:t,oldValue:n},{transition:r}){!t!=!n&&(r?t?(r.beforeEnter(e),Oa(e,!0),r.enter(e)):r.leave(e,()=>{Oa(e,!1)}):Oa(e,t))},beforeUnmount(e,{value:t}){Oa(e,t)}};function Oa(e,t){e.style.display=t?e[Ta]:`none`,e[Ea]=!t}var ka=Symbol(``),Aa=/(?:^|;)\s*display\s*:/;function ja(e,t,n){let r=e.style,i=w(n),a=!1;if(n&&!i){if(t)if(w(t))for(let e of t.split(`;`)){let t=e.slice(0,e.indexOf(`:`)).trim();n[t]??Na(r,t,``)}else for(let e in t)n[e]??Na(r,e,``);for(let e in n)e===`display`&&(a=!0),Na(r,e,n[e])}else if(i){if(t!==n){let e=r[ka];e&&(n+=`;`+e),r.cssText=n,a=Aa.test(n)}}else t&&e.removeAttribute(`style`);Ta in e&&(e[Ta]=a?r.display:``,e[Ea]&&(r.display=`none`))}var Ma=/\s*!important$/;function Na(e,t,n){if(b(n))n.forEach(n=>Na(e,t,n));else if(n??=``,t.startsWith(`--`))e.setProperty(t,n);else{let r=Ia(e,t);Ma.test(n)?e.setProperty(F(r),n.replace(Ma,``),`important`):e[r]=n}}var Pa=[`Webkit`,`Moz`,`ms`],Fa={};function Ia(e,t){let n=Fa[t];if(n)return n;let r=P(t);if(r!==`filter`&&r in e)return Fa[t]=r;r=I(r);for(let n=0;n<Pa.length;n++){let i=Pa[n]+r;if(i in e)return Fa[t]=i}return t}var La=`http://www.w3.org/1999/xlink`;function Ra(e,t,n,r,i,a=ge(t)){r&&t.startsWith(`xlink:`)?n==null?e.removeAttributeNS(La,t.slice(6,t.length)):e.setAttributeNS(La,t,n):n==null||a&&!_e(n)?e.removeAttribute(t):e.setAttribute(t,a?``:T(n)?String(n):n)}function za(e,t,n,r,i){if(t===`innerHTML`||t===`textContent`){n!=null&&(e[t]=t===`innerHTML`?_a(n):n);return}let a=e.tagName;if(t===`value`&&a!==`PROGRESS`&&!a.includes(`-`)){let r=a===`OPTION`?e.getAttribute(`value`)||``:e.value,i=n==null?e.type===`checkbox`?`on`:``:String(n);(r!==i||!(`_value`in e))&&(e.value=i),n??e.removeAttribute(t),e._value=n;return}let o=!1;if(n===``||n==null){let r=typeof e[t];r===`boolean`?n=_e(n):n==null&&r===`string`?(n=``,o=!0):r===`number`&&(n=0,o=!0)}try{e[t]=n}catch{}o&&e.removeAttribute(i||t)}function Ba(e,t,n,r){e.addEventListener(t,n,r)}function Va(e,t,n,r){e.removeEventListener(t,n,r)}var Ha=Symbol(`_vei`);function Ua(e,t,n,r,i=null){let a=e[Ha]||(e[Ha]={}),o=a[t];if(r&&o)o.value=r;else{let[n,s]=Ga(t);r?Ba(e,n,a[t]=Ya(r,i),s):o&&(Va(e,n,o,s),a[t]=void 0)}}var Wa=/(?:Once|Passive|Capture)$/;function Ga(e){let t;if(Wa.test(e)){t={};let n;for(;n=e.match(Wa);)e=e.slice(0,e.length-n[0].length),t[n[0].toLowerCase()]=!0}return[e[2]===`:`?e.slice(3):F(e.slice(2)),t]}var Ka=0,qa=Promise.resolve(),Ja=()=>Ka||=(qa.then(()=>Ka=0),Date.now());function Ya(e,t){let n=e=>{if(!e._vts)e._vts=Date.now();else if(e._vts<=n.attached)return;nn(Xa(e,n.value),t,5,[e])};return n.value=e,n.attached=Ja(),n}function Xa(e,t){if(b(t)){let n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(e=>t=>!t._stopped&&e&&e(t))}else return t}var Za=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Qa=(e,t,n,r,i,a)=>{let o=i===`svg`;t===`class`?wa(e,r,o):t===`style`?ja(e,n,r):m(t)?h(t)||Ua(e,t,n,r,a):(t[0]===`.`?(t=t.slice(1),!0):t[0]===`^`?(t=t.slice(1),!1):$a(e,t,r,o))?(za(e,t,r),!e.tagName.includes(`-`)&&(t===`value`||t===`checked`||t===`selected`)&&Ra(e,t,r,o,a,t!==`value`)):e._isVueCE&&(/[A-Z]/.test(t)||!w(r))?za(e,P(t),r,a,t):(t===`true-value`?e._trueValue=r:t===`false-value`&&(e._falseValue=r),Ra(e,t,r,o))};function $a(e,t,n,r){if(r)return!!(t===`innerHTML`||t===`textContent`||t in e&&Za(t)&&C(n));if(t===`spellcheck`||t===`draggable`||t===`translate`||t===`autocorrect`||t===`sandbox`&&e.tagName===`IFRAME`||t===`form`||t===`list`&&e.tagName===`INPUT`||t===`type`&&e.tagName===`TEXTAREA`)return!1;if(t===`width`||t===`height`){let t=e.tagName;if(t===`IMG`||t===`VIDEO`||t===`CANVAS`||t===`SOURCE`)return!1}return Za(t)&&w(n)?!1:t in e}var eo=e=>{let t=e.props[`onUpdate:modelValue`]||!1;return b(t)?e=>ie(t,e):t};function to(e){e.target.composing=!0}function no(e){let t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event(`input`)))}var ro=Symbol(`_assign`);function io(e,t,n){return t&&(e=e.trim()),n&&(e=oe(e)),e}var ao={created(e,{modifiers:{lazy:t,trim:n,number:r}},i){e[ro]=eo(i);let a=r||i.props&&i.props.type===`number`;Ba(e,t?`change`:`input`,t=>{t.target.composing||e[ro](io(e.value,n,a))}),(n||a)&&Ba(e,`change`,()=>{e.value=io(e.value,n,a)}),t||(Ba(e,`compositionstart`,to),Ba(e,`compositionend`,no),Ba(e,`change`,no))},mounted(e,{value:t}){e.value=t??``},beforeUpdate(e,{value:t,oldValue:n,modifiers:{lazy:r,trim:i,number:a}},o){if(e[ro]=eo(o),e.composing)return;let s=(a||e.type===`number`)&&!/^0\d/.test(e.value)?oe(e.value):e.value,c=t??``;s!==c&&(document.activeElement===e&&e.type!==`range`&&(r&&t===n||i&&e.value.trim()===c)||(e.value=c))}},oo=[`ctrl`,`shift`,`alt`,`meta`],so={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>`button`in e&&e.button!==0,middle:e=>`button`in e&&e.button!==1,right:e=>`button`in e&&e.button!==2,exact:(e,t)=>oo.some(n=>e[`${n}Key`]&&!t.includes(n))},co=(e,t)=>{let n=e._withMods||={},r=t.join(`.`);return n[r]||(n[r]=((n,...r)=>{for(let e=0;e<t.length;e++){let r=so[t[e]];if(r&&r(n,t))return}return e(n,...r)}))},lo=g({patchProp:Qa},Sa),uo;function fo(){return uo||=si(lo)}var po=((...e)=>{let t=fo().createApp(...e),{mount:n}=t;return t.mount=e=>{let r=ho(e);if(!r)return;let i=t._component;!C(i)&&!i.render&&!i.template&&(i.template=r.innerHTML),r.nodeType===1&&(r.textContent=``);let a=n(r,!1,mo(r));return r instanceof Element&&(r.removeAttribute(`v-cloak`),r.setAttribute(`data-v-app`,``)),a},t});function mo(e){if(e instanceof SVGElement)return`svg`;if(typeof MathMLElement==`function`&&e instanceof MathMLElement)return`mathml`}function ho(e){return w(e)?document.querySelector(e):e}var go={class:`relative w-full`,ref:`containerRef`},_o=[`value`,`placeholder`,`disabled`],vo={class:`absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-xl shadow-lg overflow-hidden`},yo={key:0,class:`py-4 text-center text-gray-400 text-sm`},bo=[`onClick`],xo={class:`ml-2 text-[10px] text-gray-400 uppercase`},So={key:0,class:`ml-auto text-blue-600`},Co=Rn({__name:`Select`,props:{modelValue:{},options:{default:()=>[]},placeholder:{default:``},itemHeight:{default:34},dropdownHeight:{default:256},disabled:{type:Boolean,default:!1}},emits:[`update:modelValue`],setup(e,{emit:t}){let n=e,r=t,i=Ut(!1),a=Ut(null),o=Ut(null),s=Ut(``),c=Ut(0),l=pa(()=>{let e=n.options.find(e=>e.adcode===n.modelValue);return e?e.name:``}),u=pa(()=>i.value?s.value:l.value),d=pa(()=>{if(!s.value)return n.options;let e=s.value.toLowerCase();return n.options.filter(t=>String(t.name).toLowerCase().includes(e))}),f=pa(()=>d.value.length*n.itemHeight),p=pa(()=>Math.ceil(n.dropdownHeight/n.itemHeight)+4),m=pa(()=>Math.floor(c.value/n.itemHeight)),h=pa(()=>Math.min(m.value+p.value,d.value.length)),g=pa(()=>d.value.slice(m.value,h.value)),_=pa(()=>m.value*n.itemHeight),v=e=>{c.value=e.target.scrollTop},y=()=>{n.disabled||a.value?.focus()},b=()=>{i.value=!0,s.value=``,dn(()=>{c.value=0,o.value&&(o.value.scrollTop=0)})},x=e=>{s.value=e.target.value,c.value=0,o.value&&(o.value.scrollTop=0)},S=e=>{r(`update:modelValue`,e.adcode),i.value=!1,s.value=``,a.value?.blur()},C=()=>{i.value=!1,s.value=``};return(t,n)=>(Ci(),Oi(`div`,go,[$(`div`,{class:me([`relative flex items-center w-full bg-white border rounded-xl cursor-text transition-all duration-200`,[i.value?`border-blue-500 ring-2 ring-blue-100`:`border-gray-300 hover:border-blue-400`,e.disabled?`bg-gray-100 cursor-not-allowed`:``]]),onClick:y},[$(`input`,{ref_key:`inputRef`,ref:a,type:`text`,value:u.value,placeholder:l.value?``:e.placeholder,disabled:e.disabled,class:`w-full px-3 py-2 bg-transparent outline-none text-sm text-gray-700 placeholder-gray-400`,onInput:x,onFocus:b,onBlur:C},null,40,_o),$(`span`,{class:me([`absolute right-3 text-gray-400 pointer-events-none transition-transform duration-200`,{"rotate-180":i.value}])},[...n[1]||=[$(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`12`,height:`12`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[$(`polyline`,{points:`6 9 12 15 18 9`})],-1)]],2)],2),wn($(`div`,vo,[d.value.length===0?(Ci(),Oi(`div`,yo,`  `)):(Ci(),Oi(`div`,{key:1,ref_key:`dropdownRef`,ref:o,class:`overflow-y-auto custom-scrollbar`,style:le({height:`${e.dropdownHeight}px`}),onScroll:v,onMousedown:n[0]||=co(()=>{},[`prevent`])},[$(`div`,{style:le({height:`${f.value}px`,position:`relative`})},[$(`div`,{style:le({transform:`translateY(${_.value}px)`})},[(Ci(!0),Oi(Q,null,cr(g.value,t=>(Ci(),Oi(`div`,{key:t.adcode,class:me([`px-3 flex items-center text-sm cursor-pointer transition-colors duration-150 truncate`,[e.modelValue===t.adcode?`bg-blue-50 font-medium text-blue-600`:`text-gray-700 hover:bg-gray-100`]]),style:le({height:`${e.itemHeight}px`}),onClick:e=>S(t)},[Ri(ye(t.name)+` `,1),$(`span`,xo,ye(t.level),1),e.modelValue===t.adcode?(Ci(),Oi(`span`,So,[...n[2]||=[$(`svg`,{xmlns:`http://www.w3.org/2000/svg`,width:`16`,height:`16`,viewBox:`0 0 24 24`,fill:`none`,stroke:`currentColor`,"stroke-width":`2`,"stroke-linecap":`round`,"stroke-linejoin":`round`},[$(`polyline`,{points:`20 6 9 17 4 12`})],-1)]])):Bi(``,!0)],14,bo))),128))],4)],4)],36))],512),[[Da,i.value]])],512))}}),wo=(e,t)=>{let n=e.__vccOpts||e;for(let[e,r]of t)n[e]=r;return n},To=wo(Co,[[`__scopeId`,`data-v-c3ca3fda`]]),Eo=c(o(((e,t)=>{(function(n,r){typeof e==`object`&&t!==void 0?r(e):typeof define==`function`&&define.amd?define([`exports`],r):(n=typeof globalThis<`u`?globalThis:n||self,r(n.leaflet={}))})(e,(function(e){var t=`1.9.4`;function n(e){var t,n,r,i;for(n=1,r=arguments.length;n<r;n++)for(t in i=arguments[n],i)e[t]=i[t];return e}var r=Object.create||(function(){function e(){}return function(t){return e.prototype=t,new e}})();function i(e,t){var n=Array.prototype.slice;if(e.bind)return e.bind.apply(e,n.call(arguments,1));var r=n.call(arguments,2);return function(){return e.apply(t,r.length?r.concat(n.call(arguments)):arguments)}}var a=0;function o(e){return`_leaflet_id`in e||(e._leaflet_id=++a),e._leaflet_id}function s(e,t,n){var r,i,a,o=function(){r=!1,i&&=(a.apply(n,i),!1)};return a=function(){r?i=arguments:(e.apply(n,arguments),setTimeout(o,t),r=!0)},a}function c(e,t,n){var r=t[1],i=t[0],a=r-i;return e===r&&n?e:((e-i)%a+a)%a+i}function l(){return!1}function u(e,t){if(t===!1)return e;var n=10**(t===void 0?6:t);return Math.round(e*n)/n}function d(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,``)}function f(e){return d(e).split(/\s+/)}function p(e,t){for(var n in Object.prototype.hasOwnProperty.call(e,`options`)||(e.options=e.options?r(e.options):{}),t)e.options[n]=t[n];return e.options}function m(e,t,n){var r=[];for(var i in e)r.push(encodeURIComponent(n?i.toUpperCase():i)+`=`+encodeURIComponent(e[i]));return(!t||t.indexOf(`?`)===-1?`?`:`&`)+r.join(`&`)}var h=/\{ *([\w_ -]+) *\}/g;function g(e,t){return e.replace(h,function(e,n){var r=t[n];if(r===void 0)throw Error(`No value provided for variable `+e);return typeof r==`function`&&(r=r(t)),r})}var _=Array.isArray||function(e){return Object.prototype.toString.call(e)===`[object Array]`};function v(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1}var y=`data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=`;function b(e){return window[`webkit`+e]||window[`moz`+e]||window[`ms`+e]}var x=0;function S(e){var t=+new Date,n=Math.max(0,16-(t-x));return x=t+n,window.setTimeout(e,n)}var C=window.requestAnimationFrame||b(`RequestAnimationFrame`)||S,w=window.cancelAnimationFrame||b(`CancelAnimationFrame`)||b(`CancelRequestAnimationFrame`)||function(e){window.clearTimeout(e)};function T(e,t,n){if(n&&C===S)e.call(t);else return C.call(window,i(e,t))}function E(e){e&&w.call(window,e)}var D={__proto__:null,extend:n,create:r,bind:i,get lastId(){return a},stamp:o,throttle:s,wrapNum:c,falseFn:l,formatNum:u,trim:d,splitWords:f,setOptions:p,getParamString:m,template:g,isArray:_,indexOf:v,emptyImageUrl:y,requestFn:C,cancelFn:w,requestAnimFrame:T,cancelAnimFrame:E};function O(){}O.extend=function(e){var t=function(){p(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},i=t.__super__=this.prototype,a=r(i);for(var o in a.constructor=t,t.prototype=a,this)Object.prototype.hasOwnProperty.call(this,o)&&o!==`prototype`&&o!==`__super__`&&(t[o]=this[o]);return e.statics&&n(t,e.statics),e.includes&&(k(e.includes),n.apply(null,[a].concat(e.includes))),n(a,e),delete a.statics,delete a.includes,a.options&&(a.options=i.options?r(i.options):{},n(a.options,e.options)),a._initHooks=[],a.callInitHooks=function(){if(!this._initHooksCalled){i.callInitHooks&&i.callInitHooks.call(this),this._initHooksCalled=!0;for(var e=0,t=a._initHooks.length;e<t;e++)a._initHooks[e].call(this)}},t},O.include=function(e){var t=this.prototype.options;return n(this.prototype,e),e.options&&(this.prototype.options=t,this.mergeOptions(e.options)),this},O.mergeOptions=function(e){return n(this.prototype.options,e),this},O.addInitHook=function(e){var t=Array.prototype.slice.call(arguments,1),n=typeof e==`function`?e:function(){this[e].apply(this,t)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(n),this};function k(e){if(!(typeof L>`u`||!L||!L.Mixin)){e=_(e)?e:[e];for(var t=0;t<e.length;t++)e[t]===L.Mixin.Events&&console.warn(`Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.`,Error().stack)}}var A={on:function(e,t,n){if(typeof e==`object`)for(var r in e)this._on(r,e[r],t);else{e=f(e);for(var i=0,a=e.length;i<a;i++)this._on(e[i],t,n)}return this},off:function(e,t,n){if(!arguments.length)delete this._events;else if(typeof e==`object`)for(var r in e)this._off(r,e[r],t);else{e=f(e);for(var i=arguments.length===1,a=0,o=e.length;a<o;a++)i?this._off(e[a]):this._off(e[a],t,n)}return this},_on:function(e,t,n,r){if(typeof t!=`function`){console.warn(`wrong listener type: `+typeof t);return}if(this._listens(e,t,n)===!1){n===this&&(n=void 0);var i={fn:t,ctx:n};r&&(i.once=!0),this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(i)}},_off:function(e,t,n){var r,i,a;if(this._events&&(r=this._events[e],r)){if(arguments.length===1){if(this._firingCount)for(i=0,a=r.length;i<a;i++)r[i].fn=l;delete this._events[e];return}if(typeof t!=`function`){console.warn(`wrong listener type: `+typeof t);return}var o=this._listens(e,t,n);if(o!==!1){var s=r[o];this._firingCount&&(s.fn=l,this._events[e]=r=r.slice()),r.splice(o,1)}}},fire:function(e,t,r){if(!this.listens(e,r))return this;var i=n({},t,{type:e,target:this,sourceTarget:t&&t.sourceTarget||this});if(this._events){var a=this._events[e];if(a){this._firingCount=this._firingCount+1||1;for(var o=0,s=a.length;o<s;o++){var c=a[o],l=c.fn;c.once&&this.off(e,l,c.ctx),l.call(c.ctx||this,i)}this._firingCount--}}return r&&this._propagateEvent(i),this},listens:function(e,t,n,r){typeof e!=`string`&&console.warn(`"string" type argument expected`);var i=t;typeof t!=`function`&&(r=!!t,i=void 0,n=void 0);var a=this._events&&this._events[e];if(a&&a.length&&this._listens(e,i,n)!==!1)return!0;if(r){for(var o in this._eventParents)if(this._eventParents[o].listens(e,t,n,r))return!0}return!1},_listens:function(e,t,n){if(!this._events)return!1;var r=this._events[e]||[];if(!t)return!!r.length;n===this&&(n=void 0);for(var i=0,a=r.length;i<a;i++)if(r[i].fn===t&&r[i].ctx===n)return i;return!1},once:function(e,t,n){if(typeof e==`object`)for(var r in e)this._on(r,e[r],t,!0);else{e=f(e);for(var i=0,a=e.length;i<a;i++)this._on(e[i],t,n,!0)}return this},addEventParent:function(e){return this._eventParents=this._eventParents||{},this._eventParents[o(e)]=e,this},removeEventParent:function(e){return this._eventParents&&delete this._eventParents[o(e)],this},_propagateEvent:function(e){for(var t in this._eventParents)this._eventParents[t].fire(e.type,n({layer:e.target,propagatedFrom:e.target},e),!0)}};A.addEventListener=A.on,A.removeEventListener=A.clearAllEventListeners=A.off,A.addOneTimeEventListener=A.once,A.fireEvent=A.fire,A.hasEventListeners=A.listens;var ee=O.extend(A);function j(e,t,n){this.x=n?Math.round(e):e,this.y=n?Math.round(t):t}var te=Math.trunc||function(e){return e>0?Math.floor(e):Math.ceil(e)};j.prototype={clone:function(){return new j(this.x,this.y)},add:function(e){return this.clone()._add(M(e))},_add:function(e){return this.x+=e.x,this.y+=e.y,this},subtract:function(e){return this.clone()._subtract(M(e))},_subtract:function(e){return this.x-=e.x,this.y-=e.y,this},divideBy:function(e){return this.clone()._divideBy(e)},_divideBy:function(e){return this.x/=e,this.y/=e,this},multiplyBy:function(e){return this.clone()._multiplyBy(e)},_multiplyBy:function(e){return this.x*=e,this.y*=e,this},scaleBy:function(e){return new j(this.x*e.x,this.y*e.y)},unscaleBy:function(e){return new j(this.x/e.x,this.y/e.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=te(this.x),this.y=te(this.y),this},distanceTo:function(e){e=M(e);var t=e.x-this.x,n=e.y-this.y;return Math.sqrt(t*t+n*n)},equals:function(e){return e=M(e),e.x===this.x&&e.y===this.y},contains:function(e){return e=M(e),Math.abs(e.x)<=Math.abs(this.x)&&Math.abs(e.y)<=Math.abs(this.y)},toString:function(){return`Point(`+u(this.x)+`, `+u(this.y)+`)`}};function M(e,t,n){return e instanceof j?e:_(e)?new j(e[0],e[1]):e==null?e:typeof e==`object`&&`x`in e&&`y`in e?new j(e.x,e.y):new j(e,t,n)}function N(e,t){if(e)for(var n=t?[e,t]:e,r=0,i=n.length;r<i;r++)this.extend(n[r])}N.prototype={extend:function(e){var t,n;if(!e)return this;if(e instanceof j||typeof e[0]==`number`||`x`in e)t=n=M(e);else if(e=P(e),t=e.min,n=e.max,!t||!n)return this;return!this.min&&!this.max?(this.min=t.clone(),this.max=n.clone()):(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(n.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(n.y,this.max.y)),this},getCenter:function(e){return M((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,e)},getBottomLeft:function(){return M(this.min.x,this.max.y)},getTopRight:function(){return M(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(e){var t,n;return e=typeof e[0]==`number`||e instanceof j?M(e):P(e),e instanceof N?(t=e.min,n=e.max):t=n=e,t.x>=this.min.x&&n.x<=this.max.x&&t.y>=this.min.y&&n.y<=this.max.y},intersects:function(e){e=P(e);var t=this.min,n=this.max,r=e.min,i=e.max,a=i.x>=t.x&&r.x<=n.x,o=i.y>=t.y&&r.y<=n.y;return a&&o},overlaps:function(e){e=P(e);var t=this.min,n=this.max,r=e.min,i=e.max,a=i.x>t.x&&r.x<n.x,o=i.y>t.y&&r.y<n.y;return a&&o},isValid:function(){return!!(this.min&&this.max)},pad:function(e){var t=this.min,n=this.max,r=Math.abs(t.x-n.x)*e,i=Math.abs(t.y-n.y)*e;return P(M(t.x-r,t.y-i),M(n.x+r,n.y+i))},equals:function(e){return e?(e=P(e),this.min.equals(e.getTopLeft())&&this.max.equals(e.getBottomRight())):!1}};function P(e,t){return!e||e instanceof N?e:new N(e,t)}function ne(e,t){if(e)for(var n=t?[e,t]:e,r=0,i=n.length;r<i;r++)this.extend(n[r])}ne.prototype={extend:function(e){var t=this._southWest,n=this._northEast,r,i;if(e instanceof I)r=e,i=e;else if(e instanceof ne){if(r=e._southWest,i=e._northEast,!r||!i)return this}else return e?this.extend(R(e)||F(e)):this;return!t&&!n?(this._southWest=new I(r.lat,r.lng),this._northEast=new I(i.lat,i.lng)):(t.lat=Math.min(r.lat,t.lat),t.lng=Math.min(r.lng,t.lng),n.lat=Math.max(i.lat,n.lat),n.lng=Math.max(i.lng,n.lng)),this},pad:function(e){var t=this._southWest,n=this._northEast,r=Math.abs(t.lat-n.lat)*e,i=Math.abs(t.lng-n.lng)*e;return new ne(new I(t.lat-r,t.lng-i),new I(n.lat+r,n.lng+i))},getCenter:function(){return new I((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new I(this.getNorth(),this.getWest())},getSouthEast:function(){return new I(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(e){e=typeof e[0]==`number`||e instanceof I||`lat`in e?R(e):F(e);var t=this._southWest,n=this._northEast,r,i;return e instanceof ne?(r=e.getSouthWest(),i=e.getNorthEast()):r=i=e,r.lat>=t.lat&&i.lat<=n.lat&&r.lng>=t.lng&&i.lng<=n.lng},intersects:function(e){e=F(e);var t=this._southWest,n=this._northEast,r=e.getSouthWest(),i=e.getNorthEast(),a=i.lat>=t.lat&&r.lat<=n.lat,o=i.lng>=t.lng&&r.lng<=n.lng;return a&&o},overlaps:function(e){e=F(e);var t=this._southWest,n=this._northEast,r=e.getSouthWest(),i=e.getNorthEast(),a=i.lat>t.lat&&r.lat<n.lat,o=i.lng>t.lng&&r.lng<n.lng;return a&&o},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(`,`)},equals:function(e,t){return e?(e=F(e),this._southWest.equals(e.getSouthWest(),t)&&this._northEast.equals(e.getNorthEast(),t)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function F(e,t){return e instanceof ne?e:new ne(e,t)}function I(e,t,n){if(isNaN(e)||isNaN(t))throw Error(`Invalid LatLng object: (`+e+`, `+t+`)`);this.lat=+e,this.lng=+t,n!==void 0&&(this.alt=+n)}I.prototype={equals:function(e,t){return e?(e=R(e),Math.max(Math.abs(this.lat-e.lat),Math.abs(this.lng-e.lng))<=(t===void 0?1e-9:t)):!1},toString:function(e){return`LatLng(`+u(this.lat,e)+`, `+u(this.lng,e)+`)`},distanceTo:function(e){return ie.distance(this,R(e))},wrap:function(){return ie.wrapLatLng(this)},toBounds:function(e){var t=180*e/40075017,n=t/Math.cos(Math.PI/180*this.lat);return F([this.lat-t,this.lng-n],[this.lat+t,this.lng+n])},clone:function(){return new I(this.lat,this.lng,this.alt)}};function R(e,t,n){return e instanceof I?e:_(e)&&typeof e[0]!=`object`?e.length===3?new I(e[0],e[1],e[2]):e.length===2?new I(e[0],e[1]):null:e==null?e:typeof e==`object`&&`lat`in e?new I(e.lat,`lng`in e?e.lng:e.lon,e.alt):t===void 0?null:new I(e,t,n)}var re={latLngToPoint:function(e,t){var n=this.projection.project(e),r=this.scale(t);return this.transformation._transform(n,r)},pointToLatLng:function(e,t){var n=this.scale(t),r=this.transformation.untransform(e,n);return this.projection.unproject(r)},project:function(e){return this.projection.project(e)},unproject:function(e){return this.projection.unproject(e)},scale:function(e){return 256*2**e},zoom:function(e){return Math.log(e/256)/Math.LN2},getProjectedBounds:function(e){if(this.infinite)return null;var t=this.projection.bounds,n=this.scale(e);return new N(this.transformation.transform(t.min,n),this.transformation.transform(t.max,n))},infinite:!1,wrapLatLng:function(e){var t=this.wrapLng?c(e.lng,this.wrapLng,!0):e.lng,n=this.wrapLat?c(e.lat,this.wrapLat,!0):e.lat,r=e.alt;return new I(n,t,r)},wrapLatLngBounds:function(e){var t=e.getCenter(),n=this.wrapLatLng(t),r=t.lat-n.lat,i=t.lng-n.lng;if(r===0&&i===0)return e;var a=e.getSouthWest(),o=e.getNorthEast();return new ne(new I(a.lat-r,a.lng-i),new I(o.lat-r,o.lng-i))}},ie=n({},re,{wrapLng:[-180,180],R:6371e3,distance:function(e,t){var n=Math.PI/180,r=e.lat*n,i=t.lat*n,a=Math.sin((t.lat-e.lat)*n/2),o=Math.sin((t.lng-e.lng)*n/2),s=a*a+Math.cos(r)*Math.cos(i)*o*o,c=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return this.R*c}}),ae=6378137,oe={R:ae,MAX_LATITUDE:85.0511287798,project:function(e){var t=Math.PI/180,n=this.MAX_LATITUDE,r=Math.max(Math.min(n,e.lat),-n),i=Math.sin(r*t);return new j(this.R*e.lng*t,this.R*Math.log((1+i)/(1-i))/2)},unproject:function(e){var t=180/Math.PI;return new I((2*Math.atan(Math.exp(e.y/this.R))-Math.PI/2)*t,e.x*t/this.R)},bounds:(function(){var e=ae*Math.PI;return new N([-e,-e],[e,e])})()};function se(e,t,n,r){if(_(e)){this._a=e[0],this._b=e[1],this._c=e[2],this._d=e[3];return}this._a=e,this._b=t,this._c=n,this._d=r}se.prototype={transform:function(e,t){return this._transform(e.clone(),t)},_transform:function(e,t){return t||=1,e.x=t*(this._a*e.x+this._b),e.y=t*(this._c*e.y+this._d),e},untransform:function(e,t){return t||=1,new j((e.x/t-this._b)/this._a,(e.y/t-this._d)/this._c)}};function ce(e,t,n,r){return new se(e,t,n,r)}var le=n({},ie,{code:`EPSG:3857`,projection:oe,transformation:function(){var e=.5/(Math.PI*oe.R);return ce(e,.5,-e,.5)}()}),ue=n({},le,{code:`EPSG:900913`});function de(e){return document.createElementNS(`http://www.w3.org/2000/svg`,e)}function fe(e,t){var n=``,r,i,a,o,s,c;for(r=0,a=e.length;r<a;r++){for(s=e[r],i=0,o=s.length;i<o;i++)c=s[i],n+=(i?`L`:`M`)+c.x+` `+c.y;n+=t?B.svg?`z`:`x`:``}return n||`M0 0`}var pe=document.documentElement.style,me=`ActiveXObject`in window,he=me&&!document.addEventListener,ge=`msLaunchUri`in navigator&&!(`documentMode`in document),_e=Ye(`webkit`),ve=Ye(`android`),ye=Ye(`android 2`)||Ye(`android 3`),be=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),xe=ve&&Ye(`Google`)&&be<537&&!(`AudioNode`in window),Se=!!window.opera,Ce=!ge&&Ye(`chrome`),we=Ye(`gecko`)&&!_e&&!Se&&!me,z=!Ce&&Ye(`safari`),Te=Ye(`phantom`),Ee=`OTransition`in pe,De=navigator.platform.indexOf(`Win`)===0,Oe=me&&`transition`in pe,ke=`WebKitCSSMatrix`in window&&`m11`in new window.WebKitCSSMatrix&&!ye,Ae=`MozPerspective`in pe,je=!window.L_DISABLE_3D&&(Oe||ke||Ae)&&!Ee&&!Te,Me=typeof orientation<`u`||Ye(`mobile`),Ne=Me&&_e,Pe=Me&&ke,Fe=!window.PointerEvent&&window.MSPointerEvent,Ie=!!(window.PointerEvent||Fe),Le=`ontouchstart`in window||!!window.TouchEvent,Re=!window.L_NO_TOUCH&&(Le||Ie),ze=Me&&Se,Be=Me&&we,Ve=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,He=function(){var e=!1;try{var t=Object.defineProperty({},`passive`,{get:function(){e=!0}});window.addEventListener(`testPassiveEventSupport`,l,t),window.removeEventListener(`testPassiveEventSupport`,l,t)}catch{}return e}(),Ue=function(){return!!document.createElement(`canvas`).getContext}(),We=!!(document.createElementNS&&de(`svg`).createSVGRect),Ge=!!We&&(function(){var e=document.createElement(`div`);return e.innerHTML=`<svg/>`,(e.firstChild&&e.firstChild.namespaceURI)===`http://www.w3.org/2000/svg`})(),Ke=!We&&function(){try{var e=document.createElement(`div`);e.innerHTML=`<v:shape adj="1"/>`;var t=e.firstChild;return t.style.behavior=`url(#default#VML)`,t&&typeof t.adj==`object`}catch{return!1}}(),qe=navigator.platform.indexOf(`Mac`)===0,Je=navigator.platform.indexOf(`Linux`)===0;function Ye(e){return navigator.userAgent.toLowerCase().indexOf(e)>=0}var B={ie:me,ielt9:he,edge:ge,webkit:_e,android:ve,android23:ye,androidStock:xe,opera:Se,chrome:Ce,gecko:we,safari:z,phantom:Te,opera12:Ee,win:De,ie3d:Oe,webkit3d:ke,gecko3d:Ae,any3d:je,mobile:Me,mobileWebkit:Ne,mobileWebkit3d:Pe,msPointer:Fe,pointer:Ie,touch:Re,touchNative:Le,mobileOpera:ze,mobileGecko:Be,retina:Ve,passiveEvents:He,canvas:Ue,svg:We,vml:Ke,inlineSvg:Ge,mac:qe,linux:Je},Xe=B.msPointer?`MSPointerDown`:`pointerdown`,Ze=B.msPointer?`MSPointerMove`:`pointermove`,Qe=B.msPointer?`MSPointerUp`:`pointerup`,$e=B.msPointer?`MSPointerCancel`:`pointercancel`,et={touchstart:Xe,touchmove:Ze,touchend:Qe,touchcancel:$e},tt={touchstart:dt,touchmove:ut,touchend:ut,touchcancel:ut},nt={},rt=!1;function it(e,t,n){return t===`touchstart`&&lt(),tt[t]?(n=tt[t].bind(this,n),e.addEventListener(et[t],n,!1),n):(console.warn(`wrong event specified:`,t),l)}function at(e,t,n){if(!et[t]){console.warn(`wrong event specified:`,t);return}e.removeEventListener(et[t],n,!1)}function ot(e){nt[e.pointerId]=e}function st(e){nt[e.pointerId]&&(nt[e.pointerId]=e)}function ct(e){delete nt[e.pointerId]}function lt(){rt||=(document.addEventListener(Xe,ot,!0),document.addEventListener(Ze,st,!0),document.addEventListener(Qe,ct,!0),document.addEventListener($e,ct,!0),!0)}function ut(e,t){if(t.pointerType!==(t.MSPOINTER_TYPE_MOUSE||`mouse`)){for(var n in t.touches=[],nt)t.touches.push(nt[n]);t.changedTouches=[t],e(t)}}function dt(e,t){t.MSPOINTER_TYPE_TOUCH&&t.pointerType===t.MSPOINTER_TYPE_TOUCH&&en(t),ut(e,t)}function ft(e){var t={},n,r;for(r in e)n=e[r],t[r]=n&&n.bind?n.bind(e):n;return e=t,t.type=`dblclick`,t.detail=2,t.isTrusted=!1,t._simulated=!0,t}var pt=200;function mt(e,t){e.addEventListener(`dblclick`,t);var n=0,r;function i(e){if(e.detail!==1){r=e.detail;return}if(!(e.pointerType===`mouse`||e.sourceCapabilities&&!e.sourceCapabilities.firesTouchEvents)){var i=nn(e);if(!(i.some(function(e){return e instanceof HTMLLabelElement&&e.attributes.for})&&!i.some(function(e){return e instanceof HTMLInputElement||e instanceof HTMLSelectElement}))){var a=Date.now();a-n<=pt?(r++,r===2&&t(ft(e))):r=1,n=a}}}return e.addEventListener(`click`,i),{dblclick:t,simDblclick:i}}function ht(e,t){e.removeEventListener(`dblclick`,t.dblclick),e.removeEventListener(`click`,t.simDblclick)}var gt=jt([`transform`,`webkitTransform`,`OTransform`,`MozTransform`,`msTransform`]),_t=jt([`webkitTransition`,`transition`,`OTransition`,`MozTransition`,`msTransition`]),vt=_t===`webkitTransition`||_t===`OTransition`?_t+`End`:`transitionend`;function yt(e){return typeof e==`string`?document.getElementById(e):e}function bt(e,t){var n=e.style[t]||e.currentStyle&&e.currentStyle[t];if((!n||n===`auto`)&&document.defaultView){var r=document.defaultView.getComputedStyle(e,null);n=r?r[t]:null}return n===`auto`?null:n}function V(e,t,n){var r=document.createElement(e);return r.className=t||``,n&&n.appendChild(r),r}function xt(e){var t=e.parentNode;t&&t.removeChild(e)}function St(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function Ct(e){var t=e.parentNode;t&&t.lastChild!==e&&t.appendChild(e)}function wt(e){var t=e.parentNode;t&&t.firstChild!==e&&t.insertBefore(e,t.firstChild)}function Tt(e,t){if(e.classList!==void 0)return e.classList.contains(t);var n=Ot(e);return n.length>0&&RegExp(`(^|\\s)`+t+`(\\s|$)`).test(n)}function H(e,t){if(e.classList!==void 0)for(var n=f(t),r=0,i=n.length;r<i;r++)e.classList.add(n[r]);else if(!Tt(e,t)){var a=Ot(e);Dt(e,(a?a+` `:``)+t)}}function Et(e,t){e.classList===void 0?Dt(e,d((` `+Ot(e)+` `).replace(` `+t+` `,` `))):e.classList.remove(t)}function Dt(e,t){e.className.baseVal===void 0?e.className=t:e.className.baseVal=t}function Ot(e){return e.correspondingElement&&(e=e.correspondingElement),e.className.baseVal===void 0?e.className:e.className.baseVal}function kt(e,t){`opacity`in e.style?e.style.opacity=t:`filter`in e.style&&At(e,t)}function At(e,t){var n=!1,r=`DXImageTransform.Microsoft.Alpha`;try{n=e.filters.item(r)}catch{if(t===1)return}t=Math.round(t*100),n?(n.Enabled=t!==100,n.Opacity=t):e.style.filter+=` progid:`+r+`(opacity=`+t+`)`}function jt(e){for(var t=document.documentElement.style,n=0;n<e.length;n++)if(e[n]in t)return e[n];return!1}function Mt(e,t,n){var r=t||new j(0,0);e.style[gt]=(B.ie3d?`translate(`+r.x+`px,`+r.y+`px)`:`translate3d(`+r.x+`px,`+r.y+`px,0)`)+(n?` scale(`+n+`)`:``)}function Nt(e,t){e._leaflet_pos=t,B.any3d?Mt(e,t):(e.style.left=t.x+`px`,e.style.top=t.y+`px`)}function Pt(e){return e._leaflet_pos||new j(0,0)}var Ft,It,Lt;if(`onselectstart`in document)Ft=function(){G(window,`selectstart`,en)},It=function(){K(window,`selectstart`,en)};else{var Rt=jt([`userSelect`,`WebkitUserSelect`,`OUserSelect`,`MozUserSelect`,`msUserSelect`]);Ft=function(){if(Rt){var e=document.documentElement.style;Lt=e[Rt],e[Rt]=`none`}},It=function(){Rt&&(document.documentElement.style[Rt]=Lt,Lt=void 0)}}function U(){G(window,`dragstart`,en)}function zt(){K(window,`dragstart`,en)}var Bt,Vt;function Ht(e){for(;e.tabIndex===-1;)e=e.parentNode;e.style&&(Ut(),Bt=e,Vt=e.style.outlineStyle,e.style.outlineStyle=`none`,G(window,`keydown`,Ut))}function Ut(){Bt&&(Bt.style.outlineStyle=Vt,Bt=void 0,Vt=void 0,K(window,`keydown`,Ut))}function Wt(e){do e=e.parentNode;while((!e.offsetWidth||!e.offsetHeight)&&e!==document.body);return e}function W(e){var t=e.getBoundingClientRect();return{x:t.width/e.offsetWidth||1,y:t.height/e.offsetHeight||1,boundingClientRect:t}}var Gt={__proto__:null,TRANSFORM:gt,TRANSITION:_t,TRANSITION_END:vt,get:yt,getStyle:bt,create:V,remove:xt,empty:St,toFront:Ct,toBack:wt,hasClass:Tt,addClass:H,removeClass:Et,setClass:Dt,getClass:Ot,setOpacity:kt,testProp:jt,setTransform:Mt,setPosition:Nt,getPosition:Pt,get disableTextSelection(){return Ft},get enableTextSelection(){return It},disableImageDrag:U,enableImageDrag:zt,preventOutline:Ht,restoreOutline:Ut,getSizedParentNode:Wt,getScale:W};function G(e,t,n,r){if(t&&typeof t==`object`)for(var i in t)Yt(e,i,t[i],n);else{t=f(t);for(var a=0,o=t.length;a<o;a++)Yt(e,t[a],n,r)}return this}var Kt=`_leaflet_events`;function K(e,t,n,r){if(arguments.length===1)qt(e),delete e[Kt];else if(t&&typeof t==`object`)for(var i in t)Xt(e,i,t[i],n);else if(t=f(t),arguments.length===2)qt(e,function(e){return v(t,e)!==-1});else for(var a=0,o=t.length;a<o;a++)Xt(e,t[a],n,r);return this}function qt(e,t){for(var n in e[Kt]){var r=n.split(/\d/)[0];(!t||t(r))&&Xt(e,r,null,null,n)}}var Jt={mouseenter:`mouseover`,mouseleave:`mouseout`,wheel:!(`onwheel`in window)&&`mousewheel`};function Yt(e,t,n,r){var i=t+o(n)+(r?`_`+o(r):``);if(e[Kt]&&e[Kt][i])return this;var a=function(t){return n.call(r||e,t||window.event)},s=a;!B.touchNative&&B.pointer&&t.indexOf(`touch`)===0?a=it(e,t,a):B.touch&&t===`dblclick`?a=mt(e,a):`addEventListener`in e?t===`touchstart`||t===`touchmove`||t===`wheel`||t===`mousewheel`?e.addEventListener(Jt[t]||t,a,B.passiveEvents?{passive:!1}:!1):t===`mouseenter`||t===`mouseleave`?(a=function(t){t||=window.event,q(e,t)&&s(t)},e.addEventListener(Jt[t],a,!1)):e.addEventListener(t,s,!1):e.attachEvent(`on`+t,a),e[Kt]=e[Kt]||{},e[Kt][i]=a}function Xt(e,t,n,r,i){i||=t+o(n)+(r?`_`+o(r):``);var a=e[Kt]&&e[Kt][i];if(!a)return this;!B.touchNative&&B.pointer&&t.indexOf(`touch`)===0?at(e,t,a):B.touch&&t===`dblclick`?ht(e,a):`removeEventListener`in e?e.removeEventListener(Jt[t]||t,a,!1):e.detachEvent(`on`+t,a),e[Kt][i]=null}function Zt(e){return e.stopPropagation?e.stopPropagation():e.originalEvent?e.originalEvent._stopped=!0:e.cancelBubble=!0,this}function Qt(e){return Yt(e,`wheel`,Zt),this}function $t(e){return G(e,`mousedown touchstart dblclick contextmenu`,Zt),e._leaflet_disable_click=!0,this}function en(e){return e.preventDefault?e.preventDefault():e.returnValue=!1,this}function tn(e){return en(e),Zt(e),this}function nn(e){if(e.composedPath)return e.composedPath();for(var t=[],n=e.target;n;)t.push(n),n=n.parentNode;return t}function rn(e,t){if(!t)return new j(e.clientX,e.clientY);var n=W(t),r=n.boundingClientRect;return new j((e.clientX-r.left)/n.x-t.clientLeft,(e.clientY-r.top)/n.y-t.clientTop)}var an=B.linux&&B.chrome?window.devicePixelRatio:B.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function on(e){return B.edge?e.wheelDeltaY/2:e.deltaY&&e.deltaMode===0?-e.deltaY/an:e.deltaY&&e.deltaMode===1?-e.deltaY*20:e.deltaY&&e.deltaMode===2?-e.deltaY*60:e.deltaX||e.deltaZ?0:e.wheelDelta?(e.wheelDeltaY||e.wheelDelta)/2:e.detail&&Math.abs(e.detail)<32765?-e.detail*20:e.detail?e.detail/-32765*60:0}function q(e,t){var n=t.relatedTarget;if(!n)return!0;try{for(;n&&n!==e;)n=n.parentNode}catch{return!1}return n!==e}var sn={__proto__:null,on:G,off:K,stopPropagation:Zt,disableScrollPropagation:Qt,disableClickPropagation:$t,preventDefault:en,stop:tn,getPropagationPath:nn,getMousePosition:rn,getWheelDelta:on,isExternalTarget:q,addListener:G,removeListener:K},cn=ee.extend({run:function(e,t,n,r){this.stop(),this._el=e,this._inProgress=!0,this._duration=n||.25,this._easeOutPower=1/Math.max(r||.5,.2),this._startPos=Pt(e),this._offset=t.subtract(this._startPos),this._startTime=+new Date,this.fire(`start`),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=T(this._animate,this),this._step()},_step:function(e){var t=+new Date-this._startTime,n=this._duration*1e3;t<n?this._runFrame(this._easeOut(t/n),e):(this._runFrame(1),this._complete())},_runFrame:function(e,t){var n=this._startPos.add(this._offset.multiplyBy(e));t&&n._round(),Nt(this._el,n),this.fire(`step`)},_complete:function(){E(this._animId),this._inProgress=!1,this.fire(`end`)},_easeOut:function(e){return 1-(1-e)**this._easeOutPower}}),J=ee.extend({options:{crs:le,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(e,t){t=p(this,t),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(e),this._initLayout(),this._onResize=i(this._onResize,this),this._initEvents(),t.maxBounds&&this.setMaxBounds(t.maxBounds),t.zoom!==void 0&&(this._zoom=this._limitZoom(t.zoom)),t.center&&t.zoom!==void 0&&this.setView(R(t.center),t.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=_t&&B.any3d&&!B.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),G(this._proxy,vt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(e,t,r){return t=t===void 0?this._zoom:this._limitZoom(t),e=this._limitCenter(R(e),t,this.options.maxBounds),r||={},this._stop(),this._loaded&&!r.reset&&r!==!0&&(r.animate!==void 0&&(r.zoom=n({animate:r.animate},r.zoom),r.pan=n({animate:r.animate,duration:r.duration},r.pan)),this._zoom===t?this._tryAnimatedPan(e,r.pan):this._tryAnimatedZoom&&this._tryAnimatedZoom(e,t,r.zoom))?(clearTimeout(this._sizeTimer),this):(this._resetView(e,t,r.pan&&r.pan.noMoveStart),this)},setZoom:function(e,t){return this._loaded?this.setView(this.getCenter(),e,{zoom:t}):(this._zoom=e,this)},zoomIn:function(e,t){return e||=B.any3d?this.options.zoomDelta:1,this.setZoom(this._zoom+e,t)},zoomOut:function(e,t){return e||=B.any3d?this.options.zoomDelta:1,this.setZoom(this._zoom-e,t)},setZoomAround:function(e,t,n){var r=this.getZoomScale(t),i=this.getSize().divideBy(2),a=(e instanceof j?e:this.latLngToContainerPoint(e)).subtract(i).multiplyBy(1-1/r),o=this.containerPointToLatLng(i.add(a));return this.setView(o,t,{zoom:n})},_getBoundsCenterZoom:function(e,t){t||={},e=e.getBounds?e.getBounds():F(e);var n=M(t.paddingTopLeft||t.padding||[0,0]),r=M(t.paddingBottomRight||t.padding||[0,0]),i=this.getBoundsZoom(e,!1,n.add(r));if(i=typeof t.maxZoom==`number`?Math.min(t.maxZoom,i):i,i===1/0)return{center:e.getCenter(),zoom:i};var a=r.subtract(n).divideBy(2),o=this.project(e.getSouthWest(),i),s=this.project(e.getNorthEast(),i);return{center:this.unproject(o.add(s).divideBy(2).add(a),i),zoom:i}},fitBounds:function(e,t){if(e=F(e),!e.isValid())throw Error(`Bounds are not valid.`);var n=this._getBoundsCenterZoom(e,t);return this.setView(n.center,n.zoom,t)},fitWorld:function(e){return this.fitBounds([[-90,-180],[90,180]],e)},panTo:function(e,t){return this.setView(e,this._zoom,{pan:t})},panBy:function(e,t){if(e=M(e).round(),t||={},!e.x&&!e.y)return this.fire(`moveend`);if(t.animate!==!0&&!this.getSize().contains(e))return this._resetView(this.unproject(this.project(this.getCenter()).add(e)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new cn,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),t.noMoveStart||this.fire(`movestart`),t.animate!==!1){H(this._mapPane,`leaflet-pan-anim`);var n=this._getMapPanePos().subtract(e).round();this._panAnim.run(this._mapPane,n,t.duration||.25,t.easeLinearity)}else this._rawPanBy(e),this.fire(`move`).fire(`moveend`);return this},flyTo:function(e,t,n){if(n||={},n.animate===!1||!B.any3d)return this.setView(e,t,n);this._stop();var r=this.project(this.getCenter()),i=this.project(e),a=this.getSize(),o=this._zoom;e=R(e),t=t===void 0?o:t;var s=Math.max(a.x,a.y),c=s*this.getZoomScale(o,t),l=i.distanceTo(r)||1,u=1.42,d=u*u;function f(e){var t=e?-1:1,n=e?c:s,r=(c*c-s*s+t*d*d*l*l)/(2*n*d*l),i=Math.sqrt(r*r+1)-r;return i<1e-9?-18:Math.log(i)}function p(e){return(Math.exp(e)-Math.exp(-e))/2}function m(e){return(Math.exp(e)+Math.exp(-e))/2}function h(e){return p(e)/m(e)}var g=f(0);function _(e){return s*(m(g)/m(g+u*e))}function v(e){return s*(m(g)*h(g+u*e)-p(g))/d}function y(e){return 1-(1-e)**1.5}var b=Date.now(),x=(f(1)-g)/u,S=n.duration?1e3*n.duration:1e3*x*.8;function C(){var n=(Date.now()-b)/S,a=y(n)*x;n<=1?(this._flyToFrame=T(C,this),this._move(this.unproject(r.add(i.subtract(r).multiplyBy(v(a)/l)),o),this.getScaleZoom(s/_(a),o),{flyTo:!0})):this._move(e,t)._moveEnd(!0)}return this._moveStart(!0,n.noMoveStart),C.call(this),this},flyToBounds:function(e,t){var n=this._getBoundsCenterZoom(e,t);return this.flyTo(n.center,n.zoom,t)},setMaxBounds:function(e){return e=F(e),this.listens(`moveend`,this._panInsideMaxBounds)&&this.off(`moveend`,this._panInsideMaxBounds),e.isValid()?(this.options.maxBounds=e,this._loaded&&this._panInsideMaxBounds(),this.on(`moveend`,this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(e){var t=this.options.minZoom;return this.options.minZoom=e,this._loaded&&t!==e&&(this.fire(`zoomlevelschange`),this.getZoom()<this.options.minZoom)?this.setZoom(e):this},setMaxZoom:function(e){var t=this.options.maxZoom;return this.options.maxZoom=e,this._loaded&&t!==e&&(this.fire(`zoomlevelschange`),this.getZoom()>this.options.maxZoom)?this.setZoom(e):this},panInsideBounds:function(e,t){this._enforcingBounds=!0;var n=this.getCenter(),r=this._limitCenter(n,this._zoom,F(e));return n.equals(r)||this.panTo(r,t),this._enforcingBounds=!1,this},panInside:function(e,t){t||={};var n=M(t.paddingTopLeft||t.padding||[0,0]),r=M(t.paddingBottomRight||t.padding||[0,0]),i=this.project(this.getCenter()),a=this.project(e),o=this.getPixelBounds(),s=P([o.min.add(n),o.max.subtract(r)]),c=s.getSize();if(!s.contains(a)){this._enforcingBounds=!0;var l=a.subtract(s.getCenter()),u=s.extend(a).getSize().subtract(c);i.x+=l.x<0?-u.x:u.x,i.y+=l.y<0?-u.y:u.y,this.panTo(this.unproject(i),t),this._enforcingBounds=!1}return this},invalidateSize:function(e){if(!this._loaded)return this;e=n({animate:!1,pan:!0},e===!0?{animate:!0}:e);var t=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var r=this.getSize(),a=t.divideBy(2).round(),o=r.divideBy(2).round(),s=a.subtract(o);return!s.x&&!s.y?this:(e.animate&&e.pan?this.panBy(s):(e.pan&&this._rawPanBy(s),this.fire(`move`),e.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(i(this.fire,this,`moveend`),200)):this.fire(`moveend`)),this.fire(`resize`,{oldSize:t,newSize:r}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire(`viewreset`),this._stop()},locate:function(e){if(e=this._locateOptions=n({timeout:1e4,watch:!1},e),!(`geolocation`in navigator))return this._handleGeolocationError({code:0,message:`Geolocation not supported.`}),this;var t=i(this._handleGeolocationResponse,this),r=i(this._handleGeolocationError,this);return e.watch?this._locationWatchId=navigator.geolocation.watchPosition(t,r,e):navigator.geolocation.getCurrentPosition(t,r,e),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(e){if(this._container._leaflet_id){var t=e.code,n=e.message||(t===1?`permission denied`:t===2?`position unavailable`:`timeout`);this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire(`locationerror`,{code:t,message:`Geolocation error: `+n+`.`})}},_handleGeolocationResponse:function(e){if(this._container._leaflet_id){var t=e.coords.latitude,n=e.coords.longitude,r=new I(t,n),i=r.toBounds(e.coords.accuracy*2),a=this._locateOptions;if(a.setView){var o=this.getBoundsZoom(i);this.setView(r,a.maxZoom?Math.min(o,a.maxZoom):o)}var s={latlng:r,bounds:i,timestamp:e.timestamp};for(var c in e.coords)typeof e.coords[c]==`number`&&(s[c]=e.coords[c]);this.fire(`locationfound`,s)}},addHandler:function(e,t){if(!t)return this;var n=this[e]=new t(this);return this._handlers.push(n),this.options[e]&&n.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off(`moveend`,this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw Error(`Map container is being reused by another instance`);try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}for(var e in this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),xt(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&=(E(this._resizeRequest),null),this._clearHandlers(),this._loaded&&this.fire(`unload`),this._layers)this._layers[e].remove();for(e in this._panes)xt(this._panes[e]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(e,t){var n=V(`div`,`leaflet-pane`+(e?` leaflet-`+e.replace(`Pane`,``)+`-pane`:``),t||this._mapPane);return e&&(this._panes[e]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var e=this.getPixelBounds();return new ne(this.unproject(e.getBottomLeft()),this.unproject(e.getTopRight()))},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(e,t,n){e=F(e),n=M(n||[0,0]);var r=this.getZoom()||0,i=this.getMinZoom(),a=this.getMaxZoom(),o=e.getNorthWest(),s=e.getSouthEast(),c=this.getSize().subtract(n),l=P(this.project(s,r),this.project(o,r)).getSize(),u=B.any3d?this.options.zoomSnap:1,d=c.x/l.x,f=c.y/l.y,p=t?Math.max(d,f):Math.min(d,f);return r=this.getScaleZoom(p,r),u&&(r=Math.round(r/(u/100))*(u/100),r=t?Math.ceil(r/u)*u:Math.floor(r/u)*u),Math.max(i,Math.min(a,r))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new j(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(e,t){var n=this._getTopLeftPoint(e,t);return new N(n,n.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(e){return this.options.crs.getProjectedBounds(e===void 0?this.getZoom():e)},getPane:function(e){return typeof e==`string`?this._panes[e]:e},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(e,t){var n=this.options.crs;return t=t===void 0?this._zoom:t,n.scale(e)/n.scale(t)},getScaleZoom:function(e,t){var n=this.options.crs;t=t===void 0?this._zoom:t;var r=n.zoom(e*n.scale(t));return isNaN(r)?1/0:r},project:function(e,t){return t=t===void 0?this._zoom:t,this.options.crs.latLngToPoint(R(e),t)},unproject:function(e,t){return t=t===void 0?this._zoom:t,this.options.crs.pointToLatLng(M(e),t)},layerPointToLatLng:function(e){var t=M(e).add(this.getPixelOrigin());return this.unproject(t)},latLngToLayerPoint:function(e){return this.project(R(e))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(e){return this.options.crs.wrapLatLng(R(e))},wrapLatLngBounds:function(e){return this.options.crs.wrapLatLngBounds(F(e))},distance:function(e,t){return this.options.crs.distance(R(e),R(t))},containerPointToLayerPoint:function(e){return M(e).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(e){return M(e).add(this._getMapPanePos())},containerPointToLatLng:function(e){var t=this.containerPointToLayerPoint(M(e));return this.layerPointToLatLng(t)},latLngToContainerPoint:function(e){return this.layerPointToContainerPoint(this.latLngToLayerPoint(R(e)))},mouseEventToContainerPoint:function(e){return rn(e,this._container)},mouseEventToLayerPoint:function(e){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(e))},mouseEventToLatLng:function(e){return this.layerPointToLatLng(this.mouseEventToLayerPoint(e))},_initContainer:function(e){var t=this._container=yt(e);if(t){if(t._leaflet_id)throw Error(`Map container is already initialized.`)}else throw Error(`Map container not found.`);G(t,`scroll`,this._onScroll,this),this._containerId=o(t)},_initLayout:function(){var e=this._container;this._fadeAnimated=this.options.fadeAnimation&&B.any3d,H(e,`leaflet-container`+(B.touch?` leaflet-touch`:``)+(B.retina?` leaflet-retina`:``)+(B.ielt9?` leaflet-oldie`:``)+(B.safari?` leaflet-safari`:``)+(this._fadeAnimated?` leaflet-fade-anim`:``));var t=bt(e,`position`);t!==`absolute`&&t!==`relative`&&t!==`fixed`&&t!==`sticky`&&(e.style.position=`relative`),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var e=this._panes={};this._paneRenderers={},this._mapPane=this.createPane(`mapPane`,this._container),Nt(this._mapPane,new j(0,0)),this.createPane(`tilePane`),this.createPane(`overlayPane`),this.createPane(`shadowPane`),this.createPane(`markerPane`),this.createPane(`tooltipPane`),this.createPane(`popupPane`),this.options.markerZoomAnimation||(H(e.markerPane,`leaflet-zoom-hide`),H(e.shadowPane,`leaflet-zoom-hide`))},_resetView:function(e,t,n){Nt(this._mapPane,new j(0,0));var r=!this._loaded;this._loaded=!0,t=this._limitZoom(t),this.fire(`viewprereset`);var i=this._zoom!==t;this._moveStart(i,n)._move(e,t)._moveEnd(i),this.fire(`viewreset`),r&&this.fire(`load`)},_moveStart:function(e,t){return e&&this.fire(`zoomstart`),t||this.fire(`movestart`),this},_move:function(e,t,n,r){t===void 0&&(t=this._zoom);var i=this._zoom!==t;return this._zoom=t,this._lastCenter=e,this._pixelOrigin=this._getNewPixelOrigin(e),r?n&&n.pinch&&this.fire(`zoom`,n):((i||n&&n.pinch)&&this.fire(`zoom`,n),this.fire(`move`,n)),this},_moveEnd:function(e){return e&&this.fire(`zoomend`),this.fire(`moveend`)},_stop:function(){return E(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(e){Nt(this._mapPane,this._getMapPanePos().subtract(e))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw Error(`Set map center and zoom first.`)},_initEvents:function(e){this._targets={},this._targets[o(this._container)]=this;var t=e?K:G;t(this._container,`click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup`,this._handleDOMEvent,this),this.options.trackResize&&t(window,`resize`,this._onResize,this),B.any3d&&this.options.transform3DLimit&&(e?this.off:this.on).call(this,`moveend`,this._onMoveEnd)},_onResize:function(){E(this._resizeRequest),this._resizeRequest=T(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var e=this._getMapPanePos();Math.max(Math.abs(e.x),Math.abs(e.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(e,t){for(var n=[],r,i=t===`mouseout`||t===`mouseover`,a=e.target||e.srcElement,s=!1;a;){if(r=this._targets[o(a)],r&&(t===`click`||t===`preclick`)&&this._draggableMoved(r)){s=!0;break}if(r&&r.listens(t,!0)&&(i&&!q(a,e)||(n.push(r),i))||a===this._container)break;a=a.parentNode}return!n.length&&!s&&!i&&this.listens(t,!0)&&(n=[this]),n},_isClickDisabled:function(e){for(;e&&e!==this._container;){if(e._leaflet_disable_click)return!0;e=e.parentNode}},_handleDOMEvent:function(e){var t=e.target||e.srcElement;if(!(!this._loaded||t._leaflet_disable_events||e.type===`click`&&this._isClickDisabled(t))){var n=e.type;n===`mousedown`&&Ht(t),this._fireDOMEvent(e,n)}},_mouseEvents:[`click`,`dblclick`,`mouseover`,`mouseout`,`contextmenu`],_fireDOMEvent:function(e,t,r){if(e.type===`click`){var i=n({},e);i.type=`preclick`,this._fireDOMEvent(i,i.type,r)}var a=this._findEventTargets(e,t);if(r){for(var o=[],s=0;s<r.length;s++)r[s].listens(t,!0)&&o.push(r[s]);a=o.concat(a)}if(a.length){t===`contextmenu`&&en(e);var c=a[0],l={originalEvent:e};if(e.type!==`keypress`&&e.type!==`keydown`&&e.type!==`keyup`){var u=c.getLatLng&&(!c._radius||c._radius<=10);l.containerPoint=u?this.latLngToContainerPoint(c.getLatLng()):this.mouseEventToContainerPoint(e),l.layerPoint=this.containerPointToLayerPoint(l.containerPoint),l.latlng=u?c.getLatLng():this.layerPointToLatLng(l.layerPoint)}for(s=0;s<a.length;s++)if(a[s].fire(t,l,!0),l.originalEvent._stopped||a[s].options.bubblingMouseEvents===!1&&v(this._mouseEvents,t)!==-1)return}},_draggableMoved:function(e){return e=e.dragging&&e.dragging.enabled()?e:this,e.dragging&&e.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var e=0,t=this._handlers.length;e<t;e++)this._handlers[e].disable()},whenReady:function(e,t){return this._loaded?e.call(t||this,{target:this}):this.on(`load`,e,t),this},_getMapPanePos:function(){return Pt(this._mapPane)||new j(0,0)},_moved:function(){var e=this._getMapPanePos();return e&&!e.equals([0,0])},_getTopLeftPoint:function(e,t){return(e&&t!==void 0?this._getNewPixelOrigin(e,t):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(e,t){var n=this.getSize()._divideBy(2);return this.project(e,t)._subtract(n)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(e,t,n){var r=this._getNewPixelOrigin(n,t);return this.project(e,t)._subtract(r)},_latLngBoundsToNewLayerBounds:function(e,t,n){var r=this._getNewPixelOrigin(n,t);return P([this.project(e.getSouthWest(),t)._subtract(r),this.project(e.getNorthWest(),t)._subtract(r),this.project(e.getSouthEast(),t)._subtract(r),this.project(e.getNorthEast(),t)._subtract(r)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(e){return this.latLngToLayerPoint(e).subtract(this._getCenterLayerPoint())},_limitCenter:function(e,t,n){if(!n)return e;var r=this.project(e,t),i=this.getSize().divideBy(2),a=new N(r.subtract(i),r.add(i)),o=this._getBoundsOffset(a,n,t);return Math.abs(o.x)<=1&&Math.abs(o.y)<=1?e:this.unproject(r.add(o),t)},_limitOffset:function(e,t){if(!t)return e;var n=this.getPixelBounds(),r=new N(n.min.add(e),n.max.add(e));return e.add(this._getBoundsOffset(r,t))},_getBoundsOffset:function(e,t,n){var r=P(this.project(t.getNorthEast(),n),this.project(t.getSouthWest(),n)),i=r.min.subtract(e.min),a=r.max.subtract(e.max);return new j(this._rebound(i.x,-a.x),this._rebound(i.y,-a.y))},_rebound:function(e,t){return e+t>0?Math.round(e-t)/2:Math.max(0,Math.ceil(e))-Math.max(0,Math.floor(t))},_limitZoom:function(e){var t=this.getMinZoom(),n=this.getMaxZoom(),r=B.any3d?this.options.zoomSnap:1;return r&&(e=Math.round(e/r)*r),Math.max(t,Math.min(n,e))},_onPanTransitionStep:function(){this.fire(`move`)},_onPanTransitionEnd:function(){Et(this._mapPane,`leaflet-pan-anim`),this.fire(`moveend`)},_tryAnimatedPan:function(e,t){var n=this._getCenterOffset(e)._trunc();return(t&&t.animate)!==!0&&!this.getSize().contains(n)?!1:(this.panBy(n,t),!0)},_createAnimProxy:function(){var e=this._proxy=V(`div`,`leaflet-proxy leaflet-zoom-animated`);this._panes.mapPane.appendChild(e),this.on(`zoomanim`,function(e){var t=gt,n=this._proxy.style[t];Mt(this._proxy,this.project(e.center,e.zoom),this.getZoomScale(e.zoom,1)),n===this._proxy.style[t]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on(`load moveend`,this._animMoveEnd,this),this._on(`unload`,this._destroyAnimProxy,this)},_destroyAnimProxy:function(){xt(this._proxy),this.off(`load moveend`,this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var e=this.getCenter(),t=this.getZoom();Mt(this._proxy,this.project(e,t),this.getZoomScale(t,1))},_catchTransitionEnd:function(e){this._animatingZoom&&e.propertyName.indexOf(`transform`)>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName(`leaflet-zoom-animated`).length},_tryAnimatedZoom:function(e,t,n){if(this._animatingZoom)return!0;if(n||={},!this._zoomAnimated||n.animate===!1||this._nothingToAnimate()||Math.abs(t-this._zoom)>this.options.zoomAnimationThreshold)return!1;var r=this.getZoomScale(t),i=this._getCenterOffset(e)._divideBy(1-1/r);return n.animate!==!0&&!this.getSize().contains(i)?!1:(T(function(){this._moveStart(!0,n.noMoveStart||!1)._animateZoom(e,t,!0)},this),!0)},_animateZoom:function(e,t,n,r){this._mapPane&&(n&&(this._animatingZoom=!0,this._animateToCenter=e,this._animateToZoom=t,H(this._mapPane,`leaflet-zoom-anim`)),this.fire(`zoomanim`,{center:e,zoom:t,noUpdate:r}),this._tempFireZoomEvent||=this._zoom!==this._animateToZoom,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(i(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Et(this._mapPane,`leaflet-zoom-anim`),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire(`zoom`),delete this._tempFireZoomEvent,this.fire(`move`),this._moveEnd(!0))}});function ln(e,t){return new J(e,t)}var un=O.extend({options:{position:`topright`},initialize:function(e){p(this,e)},getPosition:function(){return this.options.position},setPosition:function(e){var t=this._map;return t&&t.removeControl(this),this.options.position=e,t&&t.addControl(this),this},getContainer:function(){return this._container},addTo:function(e){this.remove(),this._map=e;var t=this._container=this.onAdd(e),n=this.getPosition(),r=e._controlCorners[n];return H(t,`leaflet-control`),n.indexOf(`bottom`)===-1?r.appendChild(t):r.insertBefore(t,r.firstChild),this._map.on(`unload`,this.remove,this),this},remove:function(){return this._map?(xt(this._container),this.onRemove&&this.onRemove(this._map),this._map.off(`unload`,this.remove,this),this._map=null,this):this},_refocusOnMap:function(e){this._map&&e&&e.screenX>0&&e.screenY>0&&this._map.getContainer().focus()}}),dn=function(e){return new un(e)};J.include({addControl:function(e){return e.addTo(this),this},removeControl:function(e){return e.remove(),this},_initControlPos:function(){var e=this._controlCorners={},t=`leaflet-`,n=this._controlContainer=V(`div`,t+`control-container`,this._container);function r(r,i){var a=t+r+` `+t+i;e[r+i]=V(`div`,a,n)}r(`top`,`left`),r(`top`,`right`),r(`bottom`,`left`),r(`bottom`,`right`)},_clearControlPos:function(){for(var e in this._controlCorners)xt(this._controlCorners[e]);xt(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var fn=un.extend({options:{collapsed:!0,position:`topright`,autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(e,t,n,r){return n<r?-1:r<n?1:0}},initialize:function(e,t,n){for(var r in p(this,n),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1,e)this._addLayer(e[r],r);for(r in t)this._addLayer(t[r],r,!0)},onAdd:function(e){this._initLayout(),this._update(),this._map=e,e.on(`zoomend`,this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.on(`add remove`,this._onLayerChange,this);return this._container},addTo:function(e){return un.prototype.addTo.call(this,e),this._expandIfNotCollapsed()},onRemove:function(){this._map.off(`zoomend`,this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.off(`add remove`,this._onLayerChange,this)},addBaseLayer:function(e,t){return this._addLayer(e,t),this._map?this._update():this},addOverlay:function(e,t){return this._addLayer(e,t,!0),this._map?this._update():this},removeLayer:function(e){e.off(`add remove`,this._onLayerChange,this);var t=this._getLayer(o(e));return t&&this._layers.splice(this._layers.indexOf(t),1),this._map?this._update():this},expand:function(){H(this._container,`leaflet-control-layers-expanded`),this._section.style.height=null;var e=this._map.getSize().y-(this._container.offsetTop+50);return e<this._section.clientHeight?(H(this._section,`leaflet-control-layers-scrollbar`),this._section.style.height=e+`px`):Et(this._section,`leaflet-control-layers-scrollbar`),this._checkDisabledLayers(),this},collapse:function(){return Et(this._container,`leaflet-control-layers-expanded`),this},_initLayout:function(){var e=`leaflet-control-layers`,t=this._container=V(`div`,e),n=this.options.collapsed;t.setAttribute(`aria-haspopup`,!0),$t(t),Qt(t);var r=this._section=V(`section`,e+`-list`);n&&(this._map.on(`click`,this.collapse,this),G(t,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var i=this._layersLink=V(`a`,e+`-toggle`,t);i.href=`#`,i.title=`Layers`,i.setAttribute(`role`,`button`),G(i,{keydown:function(e){e.keyCode===13&&this._expandSafely()},click:function(e){en(e),this._expandSafely()}},this),n||this.expand(),this._baseLayersList=V(`div`,e+`-base`,r),this._separator=V(`div`,e+`-separator`,r),this._overlaysList=V(`div`,e+`-overlays`,r),t.appendChild(r)},_getLayer:function(e){for(var t=0;t<this._layers.length;t++)if(this._layers[t]&&o(this._layers[t].layer)===e)return this._layers[t]},_addLayer:function(e,t,n){this._map&&e.on(`add remove`,this._onLayerChange,this),this._layers.push({layer:e,name:t,overlay:n}),this.options.sortLayers&&this._layers.sort(i(function(e,t){return this.options.sortFunction(e.layer,t.layer,e.name,t.name)},this)),this.options.autoZIndex&&e.setZIndex&&(this._lastZIndex++,e.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;St(this._baseLayersList),St(this._overlaysList),this._layerControlInputs=[];var e,t,n,r,i=0;for(n=0;n<this._layers.length;n++)r=this._layers[n],this._addItem(r),t||=r.overlay,e||=!r.overlay,i+=r.overlay?0:1;return this.options.hideSingleBase&&(e&&=i>1,this._baseLayersList.style.display=e?``:`none`),this._separator.style.display=t&&e?``:`none`,this},_onLayerChange:function(e){this._handlingClick||this._update();var t=this._getLayer(o(e.target)),n=t.overlay?e.type===`add`?`overlayadd`:`overlayremove`:e.type===`add`?`baselayerchange`:null;n&&this._map.fire(n,t)},_createRadioElement:function(e,t){var n=`<input type="radio" class="leaflet-control-layers-selector" name="`+e+`"`+(t?` checked="checked"`:``)+`/>`,r=document.createElement(`div`);return r.innerHTML=n,r.firstChild},_addItem:function(e){var t=document.createElement(`label`),n=this._map.hasLayer(e.layer),r;e.overlay?(r=document.createElement(`input`),r.type=`checkbox`,r.className=`leaflet-control-layers-selector`,r.defaultChecked=n):r=this._createRadioElement(`leaflet-base-layers_`+o(this),n),this._layerControlInputs.push(r),r.layerId=o(e.layer),G(r,`click`,this._onInputClick,this);var i=document.createElement(`span`);i.innerHTML=` `+e.name;var a=document.createElement(`span`);return t.appendChild(a),a.appendChild(r),a.appendChild(i),(e.overlay?this._overlaysList:this._baseLayersList).appendChild(t),this._checkDisabledLayers(),t},_onInputClick:function(){if(!this._preventClick){var e=this._layerControlInputs,t,n,r=[],i=[];this._handlingClick=!0;for(var a=e.length-1;a>=0;a--)t=e[a],n=this._getLayer(t.layerId).layer,t.checked?r.push(n):t.checked||i.push(n);for(a=0;a<i.length;a++)this._map.hasLayer(i[a])&&this._map.removeLayer(i[a]);for(a=0;a<r.length;a++)this._map.hasLayer(r[a])||this._map.addLayer(r[a]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var e=this._layerControlInputs,t,n,r=this._map.getZoom(),i=e.length-1;i>=0;i--)t=e[i],n=this._getLayer(t.layerId).layer,t.disabled=n.options.minZoom!==void 0&&r<n.options.minZoom||n.options.maxZoom!==void 0&&r>n.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var e=this._section;this._preventClick=!0,G(e,`click`,en),this.expand();var t=this;setTimeout(function(){K(e,`click`,en),t._preventClick=!1})}}),pn=function(e,t,n){return new fn(e,t,n)},mn=un.extend({options:{position:`topleft`,zoomInText:`<span aria-hidden="true">+</span>`,zoomInTitle:`Zoom in`,zoomOutText:`<span aria-hidden="true">&#x2212;</span>`,zoomOutTitle:`Zoom out`},onAdd:function(e){var t=`leaflet-control-zoom`,n=V(`div`,t+` leaflet-bar`),r=this.options;return this._zoomInButton=this._createButton(r.zoomInText,r.zoomInTitle,t+`-in`,n,this._zoomIn),this._zoomOutButton=this._createButton(r.zoomOutText,r.zoomOutTitle,t+`-out`,n,this._zoomOut),this._updateDisabled(),e.on(`zoomend zoomlevelschange`,this._updateDisabled,this),n},onRemove:function(e){e.off(`zoomend zoomlevelschange`,this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(e){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(e.shiftKey?3:1))},_zoomOut:function(e){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(e.shiftKey?3:1))},_createButton:function(e,t,n,r,i){var a=V(`a`,n,r);return a.innerHTML=e,a.href=`#`,a.title=t,a.setAttribute(`role`,`button`),a.setAttribute(`aria-label`,t),$t(a),G(a,`click`,tn),G(a,`click`,i,this),G(a,`click`,this._refocusOnMap,this),a},_updateDisabled:function(){var e=this._map,t=`leaflet-disabled`;Et(this._zoomInButton,t),Et(this._zoomOutButton,t),this._zoomInButton.setAttribute(`aria-disabled`,`false`),this._zoomOutButton.setAttribute(`aria-disabled`,`false`),(this._disabled||e._zoom===e.getMinZoom())&&(H(this._zoomOutButton,t),this._zoomOutButton.setAttribute(`aria-disabled`,`true`)),(this._disabled||e._zoom===e.getMaxZoom())&&(H(this._zoomInButton,t),this._zoomInButton.setAttribute(`aria-disabled`,`true`))}});J.mergeOptions({zoomControl:!0}),J.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new mn,this.addControl(this.zoomControl))});var hn=function(e){return new mn(e)},gn=un.extend({options:{position:`bottomleft`,maxWidth:100,metric:!0,imperial:!0},onAdd:function(e){var t=`leaflet-control-scale`,n=V(`div`,t),r=this.options;return this._addScales(r,t+`-line`,n),e.on(r.updateWhenIdle?`moveend`:`move`,this._update,this),e.whenReady(this._update,this),n},onRemove:function(e){e.off(this.options.updateWhenIdle?`moveend`:`move`,this._update,this)},_addScales:function(e,t,n){e.metric&&(this._mScale=V(`div`,t,n)),e.imperial&&(this._iScale=V(`div`,t,n))},_update:function(){var e=this._map,t=e.getSize().y/2,n=e.distance(e.containerPointToLatLng([0,t]),e.containerPointToLatLng([this.options.maxWidth,t]));this._updateScales(n)},_updateScales:function(e){this.options.metric&&e&&this._updateMetric(e),this.options.imperial&&e&&this._updateImperial(e)},_updateMetric:function(e){var t=this._getRoundNum(e),n=t<1e3?t+` m`:t/1e3+` km`;this._updateScale(this._mScale,n,t/e)},_updateImperial:function(e){var t=e*3.2808399,n,r,i;t>5280?(n=t/5280,r=this._getRoundNum(n),this._updateScale(this._iScale,r+` mi`,r/n)):(i=this._getRoundNum(t),this._updateScale(this._iScale,i+` ft`,i/t))},_updateScale:function(e,t,n){e.style.width=Math.round(this.options.maxWidth*n)+`px`,e.innerHTML=t},_getRoundNum:function(e){var t=10**((Math.floor(e)+``).length-1),n=e/t;return n=n>=10?10:n>=5?5:n>=3?3:n>=2?2:1,t*n}}),_n=function(e){return new gn(e)},vn=un.extend({options:{position:`bottomright`,prefix:`<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">`+(B.inlineSvg?`<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg> `:``)+`Leaflet</a>`},initialize:function(e){p(this,e),this._attributions={}},onAdd:function(e){for(var t in e.attributionControl=this,this._container=V(`div`,`leaflet-control-attribution`),$t(this._container),e._layers)e._layers[t].getAttribution&&this.addAttribution(e._layers[t].getAttribution());return this._update(),e.on(`layeradd`,this._addAttribution,this),this._container},onRemove:function(e){e.off(`layeradd`,this._addAttribution,this)},_addAttribution:function(e){e.layer.getAttribution&&(this.addAttribution(e.layer.getAttribution()),e.layer.once(`remove`,function(){this.removeAttribution(e.layer.getAttribution())},this))},setPrefix:function(e){return this.options.prefix=e,this._update(),this},addAttribution:function(e){return e?(this._attributions[e]||(this._attributions[e]=0),this._attributions[e]++,this._update(),this):this},removeAttribution:function(e){return e&&this._attributions[e]&&(this._attributions[e]--,this._update()),this},_update:function(){if(this._map){var e=[];for(var t in this._attributions)this._attributions[t]&&e.push(t);var n=[];this.options.prefix&&n.push(this.options.prefix),e.length&&n.push(e.join(`, `)),this._container.innerHTML=n.join(` <span aria-hidden="true">|</span> `)}}});J.mergeOptions({attributionControl:!0}),J.addInitHook(function(){this.options.attributionControl&&new vn().addTo(this)}),un.Layers=fn,un.Zoom=mn,un.Scale=gn,un.Attribution=vn,dn.layers=pn,dn.zoom=hn,dn.scale=_n,dn.attribution=function(e){return new vn(e)};var yn=O.extend({initialize:function(e){this._map=e},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});yn.addTo=function(e,t){return e.addHandler(t,this),this};var bn={Events:A},xn=B.touch?`touchstart mousedown`:`mousedown`,Sn=ee.extend({options:{clickTolerance:3},initialize:function(e,t,n,r){p(this,r),this._element=e,this._dragStartTarget=t||e,this._preventOutline=n},enable:function(){this._enabled||=(G(this._dragStartTarget,xn,this._onDown,this),!0)},disable:function(){this._enabled&&(Sn._dragging===this&&this.finishDrag(!0),K(this._dragStartTarget,xn,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(e){if(this._enabled&&(this._moved=!1,!Tt(this._element,`leaflet-zoom-anim`))){if(e.touches&&e.touches.length!==1){Sn._dragging===this&&this.finishDrag();return}if(!(Sn._dragging||e.shiftKey||e.which!==1&&e.button!==1&&!e.touches)&&(Sn._dragging=this,this._preventOutline&&Ht(this._element),U(),Ft(),!this._moving)){this.fire(`down`);var t=e.touches?e.touches[0]:e,n=Wt(this._element);this._startPoint=new j(t.clientX,t.clientY),this._startPos=Pt(this._element),this._parentScale=W(n);var r=e.type===`mousedown`;G(document,r?`mousemove`:`touchmove`,this._onMove,this),G(document,r?`mouseup`:`touchend touchcancel`,this._onUp,this)}}},_onMove:function(e){if(this._enabled){if(e.touches&&e.touches.length>1){this._moved=!0;return}var t=e.touches&&e.touches.length===1?e.touches[0]:e,n=new j(t.clientX,t.clientY)._subtract(this._startPoint);!n.x&&!n.y||Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(n.x/=this._parentScale.x,n.y/=this._parentScale.y,en(e),this._moved||(this.fire(`dragstart`),this._moved=!0,H(document.body,`leaflet-dragging`),this._lastTarget=e.target||e.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),H(this._lastTarget,`leaflet-drag-target`)),this._newPos=this._startPos.add(n),this._moving=!0,this._lastEvent=e,this._updatePosition())}},_updatePosition:function(){var e={originalEvent:this._lastEvent};this.fire(`predrag`,e),Nt(this._element,this._newPos),this.fire(`drag`,e)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(e){Et(document.body,`leaflet-dragging`),this._lastTarget&&=(Et(this._lastTarget,`leaflet-drag-target`),null),K(document,`mousemove touchmove`,this._onMove,this),K(document,`mouseup touchend touchcancel`,this._onUp,this),zt(),It();var t=this._moved&&this._moving;this._moving=!1,Sn._dragging=!1,t&&this.fire(`dragend`,{noInertia:e,distance:this._newPos.distanceTo(this._startPos)})}});function Cn(e,t,n){var r,i=[1,4,2,8],a,o,s,c,l,u,d,f;for(a=0,u=e.length;a<u;a++)e[a]._code=In(e[a],t);for(s=0;s<4;s++){for(d=i[s],r=[],a=0,u=e.length,o=u-1;a<u;o=a++)c=e[a],l=e[o],c._code&d?l._code&d||(f=Fn(l,c,d,t,n),f._code=In(f,t),r.push(f)):(l._code&d&&(f=Fn(l,c,d,t,n),f._code=In(f,t),r.push(f)),r.push(c));e=r}return e}function wn(e,t){var n,r,i,a,o,s,c,l,u;if(!e||e.length===0)throw Error(`latlngs not passed`);zn(e)||(console.warn(`latlngs are not flat! Only the first ring will be used`),e=e[0]);var d=R([0,0]),f=F(e);f.getNorthWest().distanceTo(f.getSouthWest())*f.getNorthEast().distanceTo(f.getNorthWest())<1700&&(d=Tn(e));var p=e.length,m=[];for(n=0;n<p;n++){var h=R(e[n]);m.push(t.project(R([h.lat-d.lat,h.lng-d.lng])))}for(s=c=l=0,n=0,r=p-1;n<p;r=n++)i=m[n],a=m[r],o=i.y*a.x-a.y*i.x,c+=(i.x+a.x)*o,l+=(i.y+a.y)*o,s+=o*3;u=s===0?m[0]:[c/s,l/s];var g=t.unproject(M(u));return R([g.lat+d.lat,g.lng+d.lng])}function Tn(e){for(var t=0,n=0,r=0,i=0;i<e.length;i++){var a=R(e[i]);t+=a.lat,n+=a.lng,r++}return R([t/r,n/r])}var En={__proto__:null,clipPolygon:Cn,polygonCenter:wn,centroid:Tn};function Dn(e,t){if(!t||!e.length)return e.slice();var n=t*t;return e=Mn(e,n),e=An(e,n),e}function On(e,t,n){return Math.sqrt(Rn(e,t,n,!0))}function kn(e,t,n){return Rn(e,t,n)}function An(e,t){var n=e.length,r=new(typeof Uint8Array<`u`?Uint8Array:Array)(n);r[0]=r[n-1]=1,jn(e,r,t,0,n-1);var i,a=[];for(i=0;i<n;i++)r[i]&&a.push(e[i]);return a}function jn(e,t,n,r,i){var a=0,o,s,c;for(s=r+1;s<=i-1;s++)c=Rn(e[s],e[r],e[i],!0),c>a&&(o=s,a=c);a>n&&(t[o]=1,jn(e,t,n,r,o),jn(e,t,n,o,i))}function Mn(e,t){for(var n=[e[0]],r=1,i=0,a=e.length;r<a;r++)Ln(e[r],e[i])>t&&(n.push(e[r]),i=r);return i<a-1&&n.push(e[a-1]),n}var Nn;function Pn(e,t,n,r,i){var a=r?Nn:In(e,n),o=In(t,n),s,c,l;for(Nn=o;;){if(!(a|o))return[e,t];if(a&o)return!1;s=a||o,c=Fn(e,t,s,n,i),l=In(c,n),s===a?(e=c,a=l):(t=c,o=l)}}function Fn(e,t,n,r,i){var a=t.x-e.x,o=t.y-e.y,s=r.min,c=r.max,l,u;return n&8?(l=e.x+a*(c.y-e.y)/o,u=c.y):n&4?(l=e.x+a*(s.y-e.y)/o,u=s.y):n&2?(l=c.x,u=e.y+o*(c.x-e.x)/a):n&1&&(l=s.x,u=e.y+o*(s.x-e.x)/a),new j(l,u,i)}function In(e,t){var n=0;return e.x<t.min.x?n|=1:e.x>t.max.x&&(n|=2),e.y<t.min.y?n|=4:e.y>t.max.y&&(n|=8),n}function Ln(e,t){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r}function Rn(e,t,n,r){var i=t.x,a=t.y,o=n.x-i,s=n.y-a,c=o*o+s*s,l;return c>0&&(l=((e.x-i)*o+(e.y-a)*s)/c,l>1?(i=n.x,a=n.y):l>0&&(i+=o*l,a+=s*l)),o=e.x-i,s=e.y-a,r?o*o+s*s:new j(i,a)}function zn(e){return!_(e[0])||typeof e[0][0]!=`object`&&e[0][0]!==void 0}function Bn(e){return console.warn(`Deprecated use of _flat, please use L.LineUtil.isFlat instead.`),zn(e)}function Vn(e,t){var n,r,i,a,o,s,c,l;if(!e||e.length===0)throw Error(`latlngs not passed`);zn(e)||(console.warn(`latlngs are not flat! Only the first ring will be used`),e=e[0]);var u=R([0,0]),d=F(e);d.getNorthWest().distanceTo(d.getSouthWest())*d.getNorthEast().distanceTo(d.getNorthWest())<1700&&(u=Tn(e));var f=e.length,p=[];for(n=0;n<f;n++){var m=R(e[n]);p.push(t.project(R([m.lat-u.lat,m.lng-u.lng])))}for(n=0,r=0;n<f-1;n++)r+=p[n].distanceTo(p[n+1])/2;if(r===0)l=p[0];else for(n=0,a=0;n<f-1;n++)if(o=p[n],s=p[n+1],i=o.distanceTo(s),a+=i,a>r){c=(a-r)/i,l=[s.x-c*(s.x-o.x),s.y-c*(s.y-o.y)];break}var h=t.unproject(M(l));return R([h.lat+u.lat,h.lng+u.lng])}var Hn={__proto__:null,simplify:Dn,pointToSegmentDistance:On,closestPointOnSegment:kn,clipSegment:Pn,_getEdgeIntersection:Fn,_getBitCode:In,_sqClosestPointOnSegment:Rn,isFlat:zn,_flat:Bn,polylineCenter:Vn},Un={project:function(e){return new j(e.lng,e.lat)},unproject:function(e){return new I(e.y,e.x)},bounds:new N([-180,-90],[180,90])},Wn={R:6378137,R_MINOR:6356752.314245179,bounds:new N([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(e){var t=Math.PI/180,n=this.R,r=e.lat*t,i=this.R_MINOR/n,a=Math.sqrt(1-i*i),o=a*Math.sin(r),s=Math.tan(Math.PI/4-r/2)/((1-o)/(1+o))**(a/2);return r=-n*Math.log(Math.max(s,1e-10)),new j(e.lng*t*n,r)},unproject:function(e){for(var t=180/Math.PI,n=this.R,r=this.R_MINOR/n,i=Math.sqrt(1-r*r),a=Math.exp(-e.y/n),o=Math.PI/2-2*Math.atan(a),s=0,c=.1,l;s<15&&Math.abs(c)>1e-7;s++)l=i*Math.sin(o),l=((1-l)/(1+l))**(i/2),c=Math.PI/2-2*Math.atan(a*l)-o,o+=c;return new I(o*t,e.x*t/n)}},Gn={__proto__:null,LonLat:Un,Mercator:Wn,SphericalMercator:oe},Kn=n({},ie,{code:`EPSG:3395`,projection:Wn,transformation:function(){var e=.5/(Math.PI*Wn.R);return ce(e,.5,-e,.5)}()}),qn=n({},ie,{code:`EPSG:4326`,projection:Un,transformation:ce(1/180,1,-1/180,.5)}),Jn=n({},re,{projection:Un,transformation:ce(1,0,-1,0),scale:function(e){return 2**e},zoom:function(e){return Math.log(e)/Math.LN2},distance:function(e,t){var n=t.lng-e.lng,r=t.lat-e.lat;return Math.sqrt(n*n+r*r)},infinite:!0});re.Earth=ie,re.EPSG3395=Kn,re.EPSG3857=le,re.EPSG900913=ue,re.EPSG4326=qn,re.Simple=Jn;var Yn=ee.extend({options:{pane:`overlayPane`,attribution:null,bubblingMouseEvents:!0},addTo:function(e){return e.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(e){return e&&e.removeLayer(this),this},getPane:function(e){return this._map.getPane(e?this.options[e]||e:this.options.pane)},addInteractiveTarget:function(e){return this._map._targets[o(e)]=this,this},removeInteractiveTarget:function(e){return delete this._map._targets[o(e)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(e){var t=e.target;if(t.hasLayer(this)){if(this._map=t,this._zoomAnimated=t._zoomAnimated,this.getEvents){var n=this.getEvents();t.on(n,this),this.once(`remove`,function(){t.off(n,this)},this)}this.onAdd(t),this.fire(`add`),t.fire(`layeradd`,{layer:this})}}});J.include({addLayer:function(e){if(!e._layerAdd)throw Error(`The provided object is not a Layer.`);var t=o(e);return this._layers[t]?this:(this._layers[t]=e,e._mapToAdd=this,e.beforeAdd&&e.beforeAdd(this),this.whenReady(e._layerAdd,e),this)},removeLayer:function(e){var t=o(e);return this._layers[t]?(this._loaded&&e.onRemove(this),delete this._layers[t],this._loaded&&(this.fire(`layerremove`,{layer:e}),e.fire(`remove`)),e._map=e._mapToAdd=null,this):this},hasLayer:function(e){return o(e)in this._layers},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},_addLayers:function(e){e=e?_(e)?e:[e]:[];for(var t=0,n=e.length;t<n;t++)this.addLayer(e[t])},_addZoomLimit:function(e){(!isNaN(e.options.maxZoom)||!isNaN(e.options.minZoom))&&(this._zoomBoundLayers[o(e)]=e,this._updateZoomLevels())},_removeZoomLimit:function(e){var t=o(e);this._zoomBoundLayers[t]&&(delete this._zoomBoundLayers[t],this._updateZoomLevels())},_updateZoomLevels:function(){var e=1/0,t=-1/0,n=this._getZoomSpan();for(var r in this._zoomBoundLayers){var i=this._zoomBoundLayers[r].options;e=i.minZoom===void 0?e:Math.min(e,i.minZoom),t=i.maxZoom===void 0?t:Math.max(t,i.maxZoom)}this._layersMaxZoom=t===-1/0?void 0:t,this._layersMinZoom=e===1/0?void 0:e,n!==this._getZoomSpan()&&this.fire(`zoomlevelschange`),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Xn=Yn.extend({initialize:function(e,t){p(this,t),this._layers={};var n,r;if(e)for(n=0,r=e.length;n<r;n++)this.addLayer(e[n])},addLayer:function(e){var t=this.getLayerId(e);return this._layers[t]=e,this._map&&this._map.addLayer(e),this},removeLayer:function(e){var t=e in this._layers?e:this.getLayerId(e);return this._map&&this._layers[t]&&this._map.removeLayer(this._layers[t]),delete this._layers[t],this},hasLayer:function(e){return(typeof e==`number`?e:this.getLayerId(e))in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(e){var t=Array.prototype.slice.call(arguments,1),n,r;for(n in this._layers)r=this._layers[n],r[e]&&r[e].apply(r,t);return this},onAdd:function(e){this.eachLayer(e.addLayer,e)},onRemove:function(e){this.eachLayer(e.removeLayer,e)},eachLayer:function(e,t){for(var n in this._layers)e.call(t,this._layers[n]);return this},getLayer:function(e){return this._layers[e]},getLayers:function(){var e=[];return this.eachLayer(e.push,e),e},setZIndex:function(e){return this.invoke(`setZIndex`,e)},getLayerId:function(e){return o(e)}}),Zn=function(e,t){return new Xn(e,t)},Qn=Xn.extend({addLayer:function(e){return this.hasLayer(e)?this:(e.addEventParent(this),Xn.prototype.addLayer.call(this,e),this.fire(`layeradd`,{layer:e}))},removeLayer:function(e){return this.hasLayer(e)?(e in this._layers&&(e=this._layers[e]),e.removeEventParent(this),Xn.prototype.removeLayer.call(this,e),this.fire(`layerremove`,{layer:e})):this},setStyle:function(e){return this.invoke(`setStyle`,e)},bringToFront:function(){return this.invoke(`bringToFront`)},bringToBack:function(){return this.invoke(`bringToBack`)},getBounds:function(){var e=new ne;for(var t in this._layers){var n=this._layers[t];e.extend(n.getBounds?n.getBounds():n.getLatLng())}return e}}),$n=function(e,t){return new Qn(e,t)},er=O.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(e){p(this,e)},createIcon:function(e){return this._createIcon(`icon`,e)},createShadow:function(e){return this._createIcon(`shadow`,e)},_createIcon:function(e,t){var n=this._getIconUrl(e);if(!n){if(e===`icon`)throw Error(`iconUrl not set in Icon options (see the docs).`);return null}var r=this._createImg(n,t&&t.tagName===`IMG`?t:null);return this._setIconStyles(r,e),(this.options.crossOrigin||this.options.crossOrigin===``)&&(r.crossOrigin=this.options.crossOrigin===!0?``:this.options.crossOrigin),r},_setIconStyles:function(e,t){var n=this.options,r=n[t+`Size`];typeof r==`number`&&(r=[r,r]);var i=M(r),a=M(t===`shadow`&&n.shadowAnchor||n.iconAnchor||i&&i.divideBy(2,!0));e.className=`leaflet-marker-`+t+` `+(n.className||``),a&&(e.style.marginLeft=-a.x+`px`,e.style.marginTop=-a.y+`px`),i&&(e.style.width=i.x+`px`,e.style.height=i.y+`px`)},_createImg:function(e,t){return t||=document.createElement(`img`),t.src=e,t},_getIconUrl:function(e){return B.retina&&this.options[e+`RetinaUrl`]||this.options[e+`Url`]}});function tr(e){return new er(e)}var nr=er.extend({options:{iconUrl:`marker-icon.png`,iconRetinaUrl:`marker-icon-2x.png`,shadowUrl:`marker-shadow.png`,iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(e){return typeof nr.imagePath!=`string`&&(nr.imagePath=this._detectIconPath()),(this.options.imagePath||nr.imagePath)+er.prototype._getIconUrl.call(this,e)},_stripUrl:function(e){var t=function(e,t,n){var r=t.exec(e);return r&&r[n]};return e=t(e,/^url\((['"])?(.+)\1\)$/,2),e&&t(e,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var e=V(`div`,`leaflet-default-icon-path`,document.body),t=bt(e,`background-image`)||bt(e,`backgroundImage`);if(document.body.removeChild(e),t=this._stripUrl(t),t)return t;var n=document.querySelector(`link[href$="leaflet.css"]`);return n?n.href.substring(0,n.href.length-11-1):``}}),rr=yn.extend({initialize:function(e){this._marker=e},addHooks:function(){var e=this._marker._icon;this._draggable||=new Sn(e,e,!0),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),H(e,`leaflet-marker-draggable`)},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Et(this._marker._icon,`leaflet-marker-draggable`)},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(e){var t=this._marker,n=t._map,r=this._marker.options.autoPanSpeed,i=this._marker.options.autoPanPadding,a=Pt(t._icon),o=n.getPixelBounds(),s=n.getPixelOrigin(),c=P(o.min._subtract(s).add(i),o.max._subtract(s).subtract(i));if(!c.contains(a)){var l=M((Math.max(c.max.x,a.x)-c.max.x)/(o.max.x-c.max.x)-(Math.min(c.min.x,a.x)-c.min.x)/(o.min.x-c.min.x),(Math.max(c.max.y,a.y)-c.max.y)/(o.max.y-c.max.y)-(Math.min(c.min.y,a.y)-c.min.y)/(o.min.y-c.min.y)).multiplyBy(r);n.panBy(l,{animate:!1}),this._draggable._newPos._add(l),this._draggable._startPos._add(l),Nt(t._icon,this._draggable._newPos),this._onDrag(e),this._panRequest=T(this._adjustPan.bind(this,e))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire(`movestart`).fire(`dragstart`)},_onPreDrag:function(e){this._marker.options.autoPan&&(E(this._panRequest),this._panRequest=T(this._adjustPan.bind(this,e)))},_onDrag:function(e){var t=this._marker,n=t._shadow,r=Pt(t._icon),i=t._map.layerPointToLatLng(r);n&&Nt(n,r),t._latlng=i,e.latlng=i,e.oldLatLng=this._oldLatLng,t.fire(`move`,e).fire(`drag`,e)},_onDragEnd:function(e){E(this._panRequest),delete this._oldLatLng,this._marker.fire(`moveend`).fire(`dragend`,e)}}),ir=Yn.extend({options:{icon:new nr,interactive:!0,keyboard:!0,title:``,alt:`Marker`,zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:`markerPane`,shadowPane:`shadowPane`,bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(e,t){p(this,t),this._latlng=R(e)},onAdd:function(e){this._zoomAnimated=this._zoomAnimated&&e.options.markerZoomAnimation,this._zoomAnimated&&e.on(`zoomanim`,this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(e){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&e.off(`zoomanim`,this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(e){var t=this._latlng;return this._latlng=R(e),this.update(),this.fire(`move`,{oldLatLng:t,latlng:this._latlng})},setZIndexOffset:function(e){return this.options.zIndexOffset=e,this.update()},getIcon:function(){return this.options.icon},setIcon:function(e){return this.options.icon=e,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var e=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(e)}return this},_initIcon:function(){var e=this.options,t=`leaflet-zoom-`+(this._zoomAnimated?`animated`:`hide`),n=e.icon.createIcon(this._icon),r=!1;n!==this._icon&&(this._icon&&this._removeIcon(),r=!0,e.title&&(n.title=e.title),n.tagName===`IMG`&&(n.alt=e.alt||``)),H(n,t),e.keyboard&&(n.tabIndex=`0`,n.setAttribute(`role`,`button`)),this._icon=n,e.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&G(n,`focus`,this._panOnFocus,this);var i=e.icon.createShadow(this._shadow),a=!1;i!==this._shadow&&(this._removeShadow(),a=!0),i&&(H(i,t),i.alt=``),this._shadow=i,e.opacity<1&&this._updateOpacity(),r&&this.getPane().appendChild(this._icon),this._initInteraction(),i&&a&&this.getPane(e.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&K(this._icon,`focus`,this._panOnFocus,this),xt(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&xt(this._shadow),this._shadow=null},_setPos:function(e){this._icon&&Nt(this._icon,e),this._shadow&&Nt(this._shadow,e),this._zIndex=e.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(e){this._icon&&(this._icon.style.zIndex=this._zIndex+e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center).round();this._setPos(t)},_initInteraction:function(){if(this.options.interactive&&(H(this._icon,`leaflet-interactive`),this.addInteractiveTarget(this._icon),rr)){var e=this.options.draggable;this.dragging&&(e=this.dragging.enabled(),this.dragging.disable()),this.dragging=new rr(this),e&&this.dragging.enable()}},setOpacity:function(e){return this.options.opacity=e,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var e=this.options.opacity;this._icon&&kt(this._icon,e),this._shadow&&kt(this._shadow,e)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var e=this._map;if(e){var t=this.options.icon.options,n=t.iconSize?M(t.iconSize):M(0,0),r=t.iconAnchor?M(t.iconAnchor):M(0,0);e.panInside(this._latlng,{paddingTopLeft:r,paddingBottomRight:n.subtract(r)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ar(e,t){return new ir(e,t)}var or=Yn.extend({options:{stroke:!0,color:`#3388ff`,weight:3,opacity:1,lineCap:`round`,lineJoin:`round`,dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:`evenodd`,interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(e){this._renderer=e.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(e){return p(this,e),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&e&&Object.prototype.hasOwnProperty.call(e,`weight`)&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),sr=or.extend({options:{fill:!0,radius:10},initialize:function(e,t){p(this,t),this._latlng=R(e),this._radius=this.options.radius},setLatLng:function(e){var t=this._latlng;return this._latlng=R(e),this.redraw(),this.fire(`move`,{oldLatLng:t,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(e){return this.options.radius=this._radius=e,this.redraw()},getRadius:function(){return this._radius},setStyle:function(e){var t=e&&e.radius||this._radius;return or.prototype.setStyle.call(this,e),this.setRadius(t),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._radius,t=this._radiusY||e,n=this._clickTolerance(),r=[e+n,t+n];this._pxBounds=new N(this._point.subtract(r),this._point.add(r))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(e){return e.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function cr(e,t){return new sr(e,t)}var lr=sr.extend({initialize:function(e,t,r){if(typeof t==`number`&&(t=n({},r,{radius:t})),p(this,t),this._latlng=R(e),isNaN(this.options.radius))throw Error(`Circle radius cannot be NaN`);this._mRadius=this.options.radius},setRadius:function(e){return this._mRadius=e,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var e=[this._radius,this._radiusY||this._radius];return new ne(this._map.layerPointToLatLng(this._point.subtract(e)),this._map.layerPointToLatLng(this._point.add(e)))},setStyle:or.prototype.setStyle,_project:function(){var e=this._latlng.lng,t=this._latlng.lat,n=this._map,r=n.options.crs;if(r.distance===ie.distance){var i=Math.PI/180,a=this._mRadius/ie.R/i,o=n.project([t+a,e]),s=n.project([t-a,e]),c=o.add(s).divideBy(2),l=n.unproject(c).lat,u=Math.acos((Math.cos(a*i)-Math.sin(t*i)*Math.sin(l*i))/(Math.cos(t*i)*Math.cos(l*i)))/i;(isNaN(u)||u===0)&&(u=a/Math.cos(Math.PI/180*t)),this._point=c.subtract(n.getPixelOrigin()),this._radius=isNaN(u)?0:c.x-n.project([l,e-u]).x,this._radiusY=c.y-o.y}else{var d=r.unproject(r.project(this._latlng).subtract([this._mRadius,0]));this._point=n.latLngToLayerPoint(this._latlng),this._radius=this._point.x-n.latLngToLayerPoint(d).x}this._updateBounds()}});function ur(e,t,n){return new lr(e,t,n)}var dr=or.extend({options:{smoothFactor:1,noClip:!1},initialize:function(e,t){p(this,t),this._setLatLngs(e)},getLatLngs:function(){return this._latlngs},setLatLngs:function(e){return this._setLatLngs(e),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(e){for(var t=1/0,n=null,r=Rn,i,a,o=0,s=this._parts.length;o<s;o++)for(var c=this._parts[o],l=1,u=c.length;l<u;l++){i=c[l-1],a=c[l];var d=r(e,i,a,!0);d<t&&(t=d,n=r(e,i,a))}return n&&(n.distance=Math.sqrt(t)),n},getCenter:function(){if(!this._map)throw Error(`Must add layer to map before using getCenter()`);return Vn(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(e,t){return t||=this._defaultShape(),e=R(e),t.push(e),this._bounds.extend(e),this.redraw()},_setLatLngs:function(e){this._bounds=new ne,this._latlngs=this._convertLatLngs(e)},_defaultShape:function(){return zn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(e){for(var t=[],n=zn(e),r=0,i=e.length;r<i;r++)n?(t[r]=R(e[r]),this._bounds.extend(t[r])):t[r]=this._convertLatLngs(e[r]);return t},_project:function(){var e=new N;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,e),this._bounds.isValid()&&e.isValid()&&(this._rawPxBounds=e,this._updateBounds())},_updateBounds:function(){var e=this._clickTolerance(),t=new j(e,e);this._rawPxBounds&&(this._pxBounds=new N([this._rawPxBounds.min.subtract(t),this._rawPxBounds.max.add(t)]))},_projectLatlngs:function(e,t,n){var r=e[0]instanceof I,i=e.length,a,o;if(r){for(o=[],a=0;a<i;a++)o[a]=this._map.latLngToLayerPoint(e[a]),n.extend(o[a]);t.push(o)}else for(a=0;a<i;a++)this._projectLatlngs(e[a],t,n)},_clipPoints:function(){var e=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(e))){if(this.options.noClip){this._parts=this._rings;return}var t=this._parts,n,r,i,a,o,s,c;for(n=0,i=0,a=this._rings.length;n<a;n++)for(c=this._rings[n],r=0,o=c.length;r<o-1;r++)s=Pn(c[r],c[r+1],e,r,!0),s&&(t[i]=t[i]||[],t[i].push(s[0]),(s[1]!==c[r+1]||r===o-2)&&(t[i].push(s[1]),i++))}},_simplifyPoints:function(){for(var e=this._parts,t=this.options.smoothFactor,n=0,r=e.length;n<r;n++)e[n]=Dn(e[n],t)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(e,t){var n,r,i,a,o,s,c=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(n=0,a=this._parts.length;n<a;n++)for(s=this._parts[n],r=0,o=s.length,i=o-1;r<o;i=r++)if(!(!t&&r===0)&&On(e,s[i],s[r])<=c)return!0;return!1}});function fr(e,t){return new dr(e,t)}dr._flat=Bn;var pr=dr.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw Error(`Must add layer to map before using getCenter()`);return wn(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(e){var t=dr.prototype._convertLatLngs.call(this,e),n=t.length;return n>=2&&t[0]instanceof I&&t[0].equals(t[n-1])&&t.pop(),t},_setLatLngs:function(e){dr.prototype._setLatLngs.call(this,e),zn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return zn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var e=this._renderer._bounds,t=this.options.weight,n=new j(t,t);if(e=new N(e.min.subtract(n),e.max.add(n)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(e))){if(this.options.noClip){this._parts=this._rings;return}for(var r=0,i=this._rings.length,a;r<i;r++)a=Cn(this._rings[r],e,!0),a.length&&this._parts.push(a)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(e){var t=!1,n,r,i,a,o,s,c,l;if(!this._pxBounds||!this._pxBounds.contains(e))return!1;for(a=0,c=this._parts.length;a<c;a++)for(n=this._parts[a],o=0,l=n.length,s=l-1;o<l;s=o++)r=n[o],i=n[s],r.y>e.y!=i.y>e.y&&e.x<(i.x-r.x)*(e.y-r.y)/(i.y-r.y)+r.x&&(t=!t);return t||dr.prototype._containsPoint.call(this,e,!0)}});function mr(e,t){return new pr(e,t)}var hr=Qn.extend({initialize:function(e,t){p(this,t),this._layers={},e&&this.addData(e)},addData:function(e){var t=_(e)?e:e.features,n,r,i;if(t){for(n=0,r=t.length;n<r;n++)i=t[n],(i.geometries||i.geometry||i.features||i.coordinates)&&this.addData(i);return this}var a=this.options;if(a.filter&&!a.filter(e))return this;var o=gr(e,a);return o?(o.feature=Cr(e),o.defaultOptions=o.options,this.resetStyle(o),a.onEachFeature&&a.onEachFeature(e,o),this.addLayer(o)):this},resetStyle:function(e){return e===void 0?this.eachLayer(this.resetStyle,this):(e.options=n({},e.defaultOptions),this._setLayerStyle(e,this.options.style),this)},setStyle:function(e){return this.eachLayer(function(t){this._setLayerStyle(t,e)},this)},_setLayerStyle:function(e,t){e.setStyle&&(typeof t==`function`&&(t=t(e.feature)),e.setStyle(t))}});function gr(e,t){var n=e.type===`Feature`?e.geometry:e,r=n?n.coordinates:null,i=[],a=t&&t.pointToLayer,o=t&&t.coordsToLatLng||vr,s,c,l,u;if(!r&&!n)return null;switch(n.type){case`Point`:return s=o(r),_r(a,e,s,t);case`MultiPoint`:for(l=0,u=r.length;l<u;l++)s=o(r[l]),i.push(_r(a,e,s,t));return new Qn(i);case`LineString`:case`MultiLineString`:return c=yr(r,n.type===`LineString`?0:1,o),new dr(c,t);case`Polygon`:case`MultiPolygon`:return c=yr(r,n.type===`Polygon`?1:2,o),new pr(c,t);case`GeometryCollection`:for(l=0,u=n.geometries.length;l<u;l++){var d=gr({geometry:n.geometries[l],type:`Feature`,properties:e.properties},t);d&&i.push(d)}return new Qn(i);case`FeatureCollection`:for(l=0,u=n.features.length;l<u;l++){var f=gr(n.features[l],t);f&&i.push(f)}return new Qn(i);default:throw Error(`Invalid GeoJSON object.`)}}function _r(e,t,n,r){return e?e(t,n):new ir(n,r&&r.markersInheritOptions&&r)}function vr(e){return new I(e[1],e[0],e[2])}function yr(e,t,n){for(var r=[],i=0,a=e.length,o;i<a;i++)o=t?yr(e[i],t-1,n):(n||vr)(e[i]),r.push(o);return r}function br(e,t){return e=R(e),e.alt===void 0?[u(e.lng,t),u(e.lat,t)]:[u(e.lng,t),u(e.lat,t),u(e.alt,t)]}function xr(e,t,n,r){for(var i=[],a=0,o=e.length;a<o;a++)i.push(t?xr(e[a],zn(e[a])?0:t-1,n,r):br(e[a],r));return!t&&n&&i.length>0&&i.push(i[0].slice()),i}function Sr(e,t){return e.feature?n({},e.feature,{geometry:t}):Cr(t)}function Cr(e){return e.type===`Feature`||e.type===`FeatureCollection`?e:{type:`Feature`,properties:{},geometry:e}}var wr={toGeoJSON:function(e){return Sr(this,{type:`Point`,coordinates:br(this.getLatLng(),e)})}};ir.include(wr),lr.include(wr),sr.include(wr),dr.include({toGeoJSON:function(e){var t=!zn(this._latlngs),n=xr(this._latlngs,t?1:0,!1,e);return Sr(this,{type:(t?`Multi`:``)+`LineString`,coordinates:n})}}),pr.include({toGeoJSON:function(e){var t=!zn(this._latlngs),n=t&&!zn(this._latlngs[0]),r=xr(this._latlngs,n?2:t?1:0,!0,e);return t||(r=[r]),Sr(this,{type:(n?`Multi`:``)+`Polygon`,coordinates:r})}}),Xn.include({toMultiPoint:function(e){var t=[];return this.eachLayer(function(n){t.push(n.toGeoJSON(e).geometry.coordinates)}),Sr(this,{type:`MultiPoint`,coordinates:t})},toGeoJSON:function(e){var t=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(t===`MultiPoint`)return this.toMultiPoint(e);var n=t===`GeometryCollection`,r=[];return this.eachLayer(function(t){if(t.toGeoJSON){var i=t.toGeoJSON(e);if(n)r.push(i.geometry);else{var a=Cr(i);a.type===`FeatureCollection`?r.push.apply(r,a.features):r.push(a)}}}),n?Sr(this,{geometries:r,type:`GeometryCollection`}):{type:`FeatureCollection`,features:r}}});function Y(e,t){return new hr(e,t)}var Tr=Y,Er=Yn.extend({options:{opacity:1,alt:``,interactive:!1,crossOrigin:!1,errorOverlayUrl:``,zIndex:1,className:``},initialize:function(e,t,n){this._url=e,this._bounds=F(t),p(this,n)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(H(this._image,`leaflet-interactive`),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){xt(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(e){return this.options.opacity=e,this._image&&this._updateOpacity(),this},setStyle:function(e){return e.opacity&&this.setOpacity(e.opacity),this},bringToFront:function(){return this._map&&Ct(this._image),this},bringToBack:function(){return this._map&&wt(this._image),this},setUrl:function(e){return this._url=e,this._image&&(this._image.src=e),this},setBounds:function(e){return this._bounds=F(e),this._map&&this._reset(),this},getEvents:function(){var e={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var e=this._url.tagName===`IMG`,t=this._image=e?this._url:V(`img`);if(H(t,`leaflet-image-layer`),this._zoomAnimated&&H(t,`leaflet-zoom-animated`),this.options.className&&H(t,this.options.className),t.onselectstart=l,t.onmousemove=l,t.onload=i(this.fire,this,`load`),t.onerror=i(this._overlayOnError,this,`error`),(this.options.crossOrigin||this.options.crossOrigin===``)&&(t.crossOrigin=this.options.crossOrigin===!0?``:this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),e){this._url=t.src;return}t.src=this._url,t.alt=this.options.alt},_animateZoom:function(e){var t=this._map.getZoomScale(e.zoom),n=this._map._latLngBoundsToNewLayerBounds(this._bounds,e.zoom,e.center).min;Mt(this._image,n,t)},_reset:function(){var e=this._image,t=new N(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),n=t.getSize();Nt(e,t.min),e.style.width=n.x+`px`,e.style.height=n.y+`px`},_updateOpacity:function(){kt(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire(`error`);var e=this.options.errorOverlayUrl;e&&this._url!==e&&(this._url=e,this._image.src=e)},getCenter:function(){return this._bounds.getCenter()}}),Dr=function(e,t,n){return new Er(e,t,n)},Or=Er.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var e=this._url.tagName===`VIDEO`,t=this._image=e?this._url:V(`video`);if(H(t,`leaflet-image-layer`),this._zoomAnimated&&H(t,`leaflet-zoom-animated`),this.options.className&&H(t,this.options.className),t.onselectstart=l,t.onmousemove=l,t.onloadeddata=i(this.fire,this,`load`),e){for(var n=t.getElementsByTagName(`source`),r=[],a=0;a<n.length;a++)r.push(n[a].src);this._url=n.length>0?r:[t.src];return}_(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(t.style,`objectFit`)&&(t.style.objectFit=`fill`),t.autoplay=!!this.options.autoplay,t.loop=!!this.options.loop,t.muted=!!this.options.muted,t.playsInline=!!this.options.playsInline;for(var o=0;o<this._url.length;o++){var s=V(`source`);s.src=this._url[o],t.appendChild(s)}}});function X(e,t,n){return new Or(e,t,n)}var kr=Er.extend({_initImage:function(){var e=this._image=this._url;H(e,`leaflet-image-layer`),this._zoomAnimated&&H(e,`leaflet-zoom-animated`),this.options.className&&H(e,this.options.className),e.onselectstart=l,e.onmousemove=l}});function Ar(e,t,n){return new kr(e,t,n)}var jr=Yn.extend({options:{interactive:!1,offset:[0,0],className:``,pane:void 0,content:``},initialize:function(e,t){e&&(e instanceof I||_(e))?(this._latlng=R(e),p(this,t)):(p(this,e),this._source=t),this.options.content&&(this._content=this.options.content)},openOn:function(e){return e=arguments.length?e:this._source._map,e.hasLayer(this)||e.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(e){return this._map?this.close():(arguments.length?this._source=e:e=this._source,this._prepareOpen(),this.openOn(e._map)),this},onAdd:function(e){this._zoomAnimated=e._zoomAnimated,this._container||this._initLayout(),e._fadeAnimated&&kt(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),e._fadeAnimated&&kt(this._container,1),this.bringToFront(),this.options.interactive&&(H(this._container,`leaflet-interactive`),this.addInteractiveTarget(this._container))},onRemove:function(e){e._fadeAnimated?(kt(this._container,0),this._removeTimeout=setTimeout(i(xt,void 0,this._container),200)):xt(this._container),this.options.interactive&&(Et(this._container,`leaflet-interactive`),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(e){return this._latlng=R(e),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(e){return this._content=e,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility=`hidden`,this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility=``,this._adjustPan())},getEvents:function(){var e={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Ct(this._container),this},bringToBack:function(){return this._map&&wt(this._container),this},_prepareOpen:function(e){var t=this._source;if(!t._map)return!1;if(t instanceof Qn){t=null;var n=this._source._layers;for(var r in n)if(n[r]._map){t=n[r];break}if(!t)return!1;this._source=t}if(!e)if(t.getCenter)e=t.getCenter();else if(t.getLatLng)e=t.getLatLng();else if(t.getBounds)e=t.getBounds().getCenter();else throw Error(`Unable to get source layer LatLng.`);return this.setLatLng(e),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var e=this._contentNode,t=typeof this._content==`function`?this._content(this._source||this):this._content;if(typeof t==`string`)e.innerHTML=t;else{for(;e.hasChildNodes();)e.removeChild(e.firstChild);e.appendChild(t)}this.fire(`contentupdate`)}},_updatePosition:function(){if(this._map){var e=this._map.latLngToLayerPoint(this._latlng),t=M(this.options.offset),n=this._getAnchor();this._zoomAnimated?Nt(this._container,e.add(n)):t=t.add(e).add(n);var r=this._containerBottom=-t.y,i=this._containerLeft=-Math.round(this._containerWidth/2)+t.x;this._container.style.bottom=r+`px`,this._container.style.left=i+`px`}},_getAnchor:function(){return[0,0]}});J.include({_initOverlay:function(e,t,n,r){var i=t;return i instanceof e||(i=new e(r).setContent(t)),n&&i.setLatLng(n),i}}),Yn.include({_initOverlay:function(e,t,n,r){var i=n;return i instanceof e?(p(i,r),i._source=this):(i=t&&!r?t:new e(r,this),i.setContent(n)),i}});var Mr=jr.extend({options:{pane:`popupPane`,offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:``},openOn:function(e){return e=arguments.length?e:this._source._map,!e.hasLayer(this)&&e._popup&&e._popup.options.autoClose&&e.removeLayer(e._popup),e._popup=this,jr.prototype.openOn.call(this,e)},onAdd:function(e){jr.prototype.onAdd.call(this,e),e.fire(`popupopen`,{popup:this}),this._source&&(this._source.fire(`popupopen`,{popup:this},!0),this._source instanceof or||this._source.on(`preclick`,Zt))},onRemove:function(e){jr.prototype.onRemove.call(this,e),e.fire(`popupclose`,{popup:this}),this._source&&(this._source.fire(`popupclose`,{popup:this},!0),this._source instanceof or||this._source.off(`preclick`,Zt))},getEvents:function(){var e=jr.prototype.getEvents.call(this);return(this.options.closeOnClick===void 0?this._map.options.closePopupOnClick:this.options.closeOnClick)&&(e.preclick=this.close),this.options.keepInView&&(e.moveend=this._adjustPan),e},_initLayout:function(){var e=`leaflet-popup`,t=this._container=V(`div`,e+` `+(this.options.className||``)+` leaflet-zoom-animated`),n=this._wrapper=V(`div`,e+`-content-wrapper`,t);if(this._contentNode=V(`div`,e+`-content`,n),$t(t),Qt(this._contentNode),G(t,`contextmenu`,Zt),this._tipContainer=V(`div`,e+`-tip-container`,t),this._tip=V(`div`,e+`-tip`,this._tipContainer),this.options.closeButton){var r=this._closeButton=V(`a`,e+`-close-button`,t);r.setAttribute(`role`,`button`),r.setAttribute(`aria-label`,`Close popup`),r.href=`#close`,r.innerHTML=`<span aria-hidden="true">&#215;</span>`,G(r,`click`,function(e){en(e),this.close()},this)}},_updateLayout:function(){var e=this._contentNode,t=e.style;t.width=``,t.whiteSpace=`nowrap`;var n=e.offsetWidth;n=Math.min(n,this.options.maxWidth),n=Math.max(n,this.options.minWidth),t.width=n+1+`px`,t.whiteSpace=``,t.height=``;var r=e.offsetHeight,i=this.options.maxHeight,a=`leaflet-popup-scrolled`;i&&r>i?(t.height=i+`px`,H(e,a)):Et(e,a),this._containerWidth=this._container.offsetWidth},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center),n=this._getAnchor();Nt(this._container,t.add(n))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var e=this._map,t=parseInt(bt(this._container,`marginBottom`),10)||0,n=this._container.offsetHeight+t,r=this._containerWidth,i=new j(this._containerLeft,-n-this._containerBottom);i._add(Pt(this._container));var a=e.layerPointToContainerPoint(i),o=M(this.options.autoPanPadding),s=M(this.options.autoPanPaddingTopLeft||o),c=M(this.options.autoPanPaddingBottomRight||o),l=e.getSize(),u=0,d=0;a.x+r+c.x>l.x&&(u=a.x+r-l.x+c.x),a.x-u-s.x<0&&(u=a.x-s.x),a.y+n+c.y>l.y&&(d=a.y+n-l.y+c.y),a.y-d-s.y<0&&(d=a.y-s.y),(u||d)&&(this.options.keepInView&&(this._autopanning=!0),e.fire(`autopanstart`).panBy([u,d]))}},_getAnchor:function(){return M(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Nr=function(e,t){return new Mr(e,t)};J.mergeOptions({closePopupOnClick:!0}),J.include({openPopup:function(e,t,n){return this._initOverlay(Mr,e,t,n).openOn(this),this},closePopup:function(e){return e=arguments.length?e:this._popup,e&&e.close(),this}}),Yn.include({bindPopup:function(e,t){return this._popup=this._initOverlay(Mr,this._popup,e,t),this._popupHandlersAdded||=(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),!0),this},unbindPopup:function(){return this._popup&&=(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,null),this},openPopup:function(e){return this._popup&&(this instanceof Qn||(this._popup._source=this),this._popup._prepareOpen(e||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(e){return this._popup&&this._popup.setContent(e),this},getPopup:function(){return this._popup},_openPopup:function(e){if(!(!this._popup||!this._map)){tn(e);var t=e.layer||e.target;if(this._popup._source===t&&!(t instanceof or)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(e.latlng);return}this._popup._source=t,this.openPopup(e.latlng)}},_movePopup:function(e){this._popup.setLatLng(e.latlng)},_onKeyPress:function(e){e.originalEvent.keyCode===13&&this._openPopup(e)}});var Pr=jr.extend({options:{pane:`tooltipPane`,offset:[0,0],direction:`auto`,permanent:!1,sticky:!1,opacity:.9},onAdd:function(e){jr.prototype.onAdd.call(this,e),this.setOpacity(this.options.opacity),e.fire(`tooltipopen`,{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire(`tooltipopen`,{tooltip:this},!0))},onRemove:function(e){jr.prototype.onRemove.call(this,e),e.fire(`tooltipclose`,{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire(`tooltipclose`,{tooltip:this},!0))},getEvents:function(){var e=jr.prototype.getEvents.call(this);return this.options.permanent||(e.preclick=this.close),e},_initLayout:function(){this._contentNode=this._container=V(`div`,`leaflet-tooltip `+(this.options.className||``)+` leaflet-zoom-`+(this._zoomAnimated?`animated`:`hide`)),this._container.setAttribute(`role`,`tooltip`),this._container.setAttribute(`id`,`leaflet-tooltip-`+o(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(e){var t,n,r=this._map,i=this._container,a=r.latLngToContainerPoint(r.getCenter()),o=r.layerPointToContainerPoint(e),s=this.options.direction,c=i.offsetWidth,l=i.offsetHeight,u=M(this.options.offset),d=this._getAnchor();s===`top`?(t=c/2,n=l):s===`bottom`?(t=c/2,n=0):s===`center`?(t=c/2,n=l/2):s===`right`?(t=0,n=l/2):s===`left`?(t=c,n=l/2):o.x<a.x?(s=`right`,t=0,n=l/2):(s=`left`,t=c+(u.x+d.x)*2,n=l/2),e=e.subtract(M(t,n,!0)).add(u).add(d),Et(i,`leaflet-tooltip-right`),Et(i,`leaflet-tooltip-left`),Et(i,`leaflet-tooltip-top`),Et(i,`leaflet-tooltip-bottom`),H(i,`leaflet-tooltip-`+s),Nt(i,e)},_updatePosition:function(){var e=this._map.latLngToLayerPoint(this._latlng);this._setPosition(e)},setOpacity:function(e){this.options.opacity=e,this._container&&kt(this._container,e)},_animateZoom:function(e){var t=this._map._latLngToNewLayerPoint(this._latlng,e.zoom,e.center);this._setPosition(t)},_getAnchor:function(){return M(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Fr=function(e,t){return new Pr(e,t)};J.include({openTooltip:function(e,t,n){return this._initOverlay(Pr,e,t,n).openOn(this),this},closeTooltip:function(e){return e.close(),this}}),Yn.include({bindTooltip:function(e,t){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Pr,this._tooltip,e,t),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&=(this._initTooltipInteractions(!0),this.closeTooltip(),null),this},_initTooltipInteractions:function(e){if(!(!e&&this._tooltipHandlersAdded)){var t=e?`off`:`on`,n={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?n.add=this._openTooltip:(n.mouseover=this._openTooltip,n.mouseout=this.closeTooltip,n.click=this._openTooltip,this._map?this._addFocusListeners():n.add=this._addFocusListeners),this._tooltip.options.sticky&&(n.mousemove=this._moveTooltip),this[t](n),this._tooltipHandlersAdded=!e}},openTooltip:function(e){return this._tooltip&&(this instanceof Qn||(this._tooltip._source=this),this._tooltip._prepareOpen(e)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(e){return this._tooltip&&this._tooltip.setContent(e),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(e){var t=typeof e.getElement==`function`&&e.getElement();t&&(G(t,`focus`,function(){this._tooltip._source=e,this.openTooltip()},this),G(t,`blur`,this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(e){var t=typeof e.getElement==`function`&&e.getElement();t&&t.setAttribute(`aria-describedby`,this._tooltip._container.id)},_openTooltip:function(e){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var t=this;this._map.once(`moveend`,function(){t._openOnceFlag=!1,t._openTooltip(e)});return}this._tooltip._source=e.layer||e.target,this.openTooltip(this._tooltip.options.sticky?e.latlng:void 0)}},_moveTooltip:function(e){var t=e.latlng,n,r;this._tooltip.options.sticky&&e.originalEvent&&(n=this._map.mouseEventToContainerPoint(e.originalEvent),r=this._map.containerPointToLayerPoint(n),t=this._map.layerPointToLatLng(r)),this._tooltip.setLatLng(t)}});var Ir=er.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:`leaflet-div-icon`},createIcon:function(e){var t=e&&e.tagName===`DIV`?e:document.createElement(`div`),n=this.options;if(n.html instanceof Element?(St(t),t.appendChild(n.html)):t.innerHTML=n.html===!1?``:n.html,n.bgPos){var r=M(n.bgPos);t.style.backgroundPosition=-r.x+`px `+-r.y+`px`}return this._setIconStyles(t,`icon`),t},createShadow:function(){return null}});function Lr(e){return new Ir(e)}er.Default=nr;var Rr=Yn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:B.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:`tilePane`,className:``,keepBuffer:2},initialize:function(e){p(this,e)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(e){e._addZoomLimit(this)},onRemove:function(e){this._removeAllTiles(),xt(this._container),e._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Ct(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(wt(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(e){return this.options.opacity=e,this._updateOpacity(),this},setZIndex:function(e){return this.options.zIndex=e,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var e=this._clampZoom(this._map.getZoom());e!==this._tileZoom&&(this._tileZoom=e,this._updateLevels()),this._update()}return this},getEvents:function(){var e={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||=s(this._onMoveEnd,this.options.updateInterval,this),e.move=this._onMove),this._zoomAnimated&&(e.zoomanim=this._animateZoom),e},createTile:function(){return document.createElement(`div`)},getTileSize:function(){var e=this.options.tileSize;return e instanceof j?e:new j(e,e)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(e){for(var t=this.getPane().children,n=-e(-1/0,1/0),r=0,i=t.length,a;r<i;r++)a=t[r].style.zIndex,t[r]!==this._container&&a&&(n=e(n,+a));isFinite(n)&&(this.options.zIndex=n+e(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!B.ielt9){kt(this._container,this.options.opacity);var e=+new Date,t=!1,n=!1;for(var r in this._tiles){var i=this._tiles[r];if(!(!i.current||!i.loaded)){var a=Math.min(1,(e-i.loaded)/200);kt(i.el,a),a<1?t=!0:(i.active?n=!0:this._onOpaqueTile(i),i.active=!0)}}n&&!this._noPrune&&this._pruneTiles(),t&&(E(this._fadeFrame),this._fadeFrame=T(this._updateOpacity,this))}},_onOpaqueTile:l,_initContainer:function(){this._container||(this._container=V(`div`,`leaflet-layer `+(this.options.className||``)),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var e=this._tileZoom,t=this.options.maxZoom;if(e!==void 0){for(var n in this._levels)n=Number(n),this._levels[n].el.children.length||n===e?(this._levels[n].el.style.zIndex=t-Math.abs(e-n),this._onUpdateLevel(n)):(xt(this._levels[n].el),this._removeTilesAtZoom(n),this._onRemoveLevel(n),delete this._levels[n]);var r=this._levels[e],i=this._map;return r||(r=this._levels[e]={},r.el=V(`div`,`leaflet-tile-container leaflet-zoom-animated`,this._container),r.el.style.zIndex=t,r.origin=i.project(i.unproject(i.getPixelOrigin()),e).round(),r.zoom=e,this._setZoomTransform(r,i.getCenter(),i.getZoom()),r.el.offsetWidth,this._onCreateLevel(r)),this._level=r,r}},_onUpdateLevel:l,_onRemoveLevel:l,_onCreateLevel:l,_pruneTiles:function(){if(this._map){var e,t,n=this._map.getZoom();if(n>this.options.maxZoom||n<this.options.minZoom){this._removeAllTiles();return}for(e in this._tiles)t=this._tiles[e],t.retain=t.current;for(e in this._tiles)if(t=this._tiles[e],t.current&&!t.active){var r=t.coords;this._retainParent(r.x,r.y,r.z,r.z-5)||this._retainChildren(r.x,r.y,r.z,r.z+2)}for(e in this._tiles)this._tiles[e].retain||this._removeTile(e)}},_removeTilesAtZoom:function(e){for(var t in this._tiles)this._tiles[t].coords.z===e&&this._removeTile(t)},_removeAllTiles:function(){for(var e in this._tiles)this._removeTile(e)},_invalidateAll:function(){for(var e in this._levels)xt(this._levels[e].el),this._onRemoveLevel(Number(e)),delete this._levels[e];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(e,t,n,r){var i=Math.floor(e/2),a=Math.floor(t/2),o=n-1,s=new j(+i,+a);s.z=+o;var c=this._tileCoordsToKey(s),l=this._tiles[c];return l&&l.active?(l.retain=!0,!0):(l&&l.loaded&&(l.retain=!0),o>r?this._retainParent(i,a,o,r):!1)},_retainChildren:function(e,t,n,r){for(var i=2*e;i<2*e+2;i++)for(var a=2*t;a<2*t+2;a++){var o=new j(i,a);o.z=n+1;var s=this._tileCoordsToKey(o),c=this._tiles[s];if(c&&c.active){c.retain=!0;continue}else c&&c.loaded&&(c.retain=!0);n+1<r&&this._retainChildren(i,a,n+1,r)}},_resetView:function(e){var t=e&&(e.pinch||e.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),t,t)},_animateZoom:function(e){this._setView(e.center,e.zoom,!0,e.noUpdate)},_clampZoom:function(e){var t=this.options;return t.minNativeZoom!==void 0&&e<t.minNativeZoom?t.minNativeZoom:t.maxNativeZoom!==void 0&&t.maxNativeZoom<e?t.maxNativeZoom:e},_setView:function(e,t,n,r){var i=Math.round(t);i=this.options.maxZoom!==void 0&&i>this.options.maxZoom||this.options.minZoom!==void 0&&i<this.options.minZoom?void 0:this._clampZoom(i);var a=this.options.updateWhenZooming&&i!==this._tileZoom;(!r||a)&&(this._tileZoom=i,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),i!==void 0&&this._update(e),n||this._pruneTiles(),this._noPrune=!!n),this._setZoomTransforms(e,t)},_setZoomTransforms:function(e,t){for(var n in this._levels)this._setZoomTransform(this._levels[n],e,t)},_setZoomTransform:function(e,t,n){var r=this._map.getZoomScale(n,e.zoom),i=e.origin.multiplyBy(r).subtract(this._map._getNewPixelOrigin(t,n)).round();B.any3d?Mt(e.el,i,r):Nt(e.el,i)},_resetGrid:function(){var e=this._map,t=e.options.crs,n=this._tileSize=this.getTileSize(),r=this._tileZoom,i=this._map.getPixelWorldBounds(this._tileZoom);i&&(this._globalTileRange=this._pxBoundsToTileRange(i)),this._wrapX=t.wrapLng&&!this.options.noWrap&&[Math.floor(e.project([0,t.wrapLng[0]],r).x/n.x),Math.ceil(e.project([0,t.wrapLng[1]],r).x/n.y)],this._wrapY=t.wrapLat&&!this.options.noWrap&&[Math.floor(e.project([t.wrapLat[0],0],r).y/n.x),Math.ceil(e.project([t.wrapLat[1],0],r).y/n.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(e){var t=this._map,n=t._animatingZoom?Math.max(t._animateToZoom,t.getZoom()):t.getZoom(),r=t.getZoomScale(n,this._tileZoom),i=t.project(e,this._tileZoom).floor(),a=t.getSize().divideBy(r*2);return new N(i.subtract(a),i.add(a))},_update:function(e){var t=this._map;if(t){var n=this._clampZoom(t.getZoom());if(e===void 0&&(e=t.getCenter()),this._tileZoom!==void 0){var r=this._getTiledPixelBounds(e),i=this._pxBoundsToTileRange(r),a=i.getCenter(),o=[],s=this.options.keepBuffer,c=new N(i.getBottomLeft().subtract([s,-s]),i.getTopRight().add([s,-s]));if(!(isFinite(i.min.x)&&isFinite(i.min.y)&&isFinite(i.max.x)&&isFinite(i.max.y)))throw Error(`Attempted to load an infinite number of tiles`);for(var l in this._tiles){var u=this._tiles[l].coords;(u.z!==this._tileZoom||!c.contains(new j(u.x,u.y)))&&(this._tiles[l].current=!1)}if(Math.abs(n-this._tileZoom)>1){this._setView(e,n);return}for(var d=i.min.y;d<=i.max.y;d++)for(var f=i.min.x;f<=i.max.x;f++){var p=new j(f,d);if(p.z=this._tileZoom,this._isValidTile(p)){var m=this._tiles[this._tileCoordsToKey(p)];m?m.current=!0:o.push(p)}}if(o.sort(function(e,t){return e.distanceTo(a)-t.distanceTo(a)}),o.length!==0){this._loading||(this._loading=!0,this.fire(`loading`));var h=document.createDocumentFragment();for(f=0;f<o.length;f++)this._addTile(o[f],h);this._level.el.appendChild(h)}}}},_isValidTile:function(e){var t=this._map.options.crs;if(!t.infinite){var n=this._globalTileRange;if(!t.wrapLng&&(e.x<n.min.x||e.x>n.max.x)||!t.wrapLat&&(e.y<n.min.y||e.y>n.max.y))return!1}if(!this.options.bounds)return!0;var r=this._tileCoordsToBounds(e);return F(this.options.bounds).overlaps(r)},_keyToBounds:function(e){return this._tileCoordsToBounds(this._keyToTileCoords(e))},_tileCoordsToNwSe:function(e){var t=this._map,n=this.getTileSize(),r=e.scaleBy(n),i=r.add(n);return[t.unproject(r,e.z),t.unproject(i,e.z)]},_tileCoordsToBounds:function(e){var t=this._tileCoordsToNwSe(e),n=new ne(t[0],t[1]);return this.options.noWrap||(n=this._map.wrapLatLngBounds(n)),n},_tileCoordsToKey:function(e){return e.x+`:`+e.y+`:`+e.z},_keyToTileCoords:function(e){var t=e.split(`:`),n=new j(+t[0],+t[1]);return n.z=+t[2],n},_removeTile:function(e){var t=this._tiles[e];t&&(xt(t.el),delete this._tiles[e],this.fire(`tileunload`,{tile:t.el,coords:this._keyToTileCoords(e)}))},_initTile:function(e){H(e,`leaflet-tile`);var t=this.getTileSize();e.style.width=t.x+`px`,e.style.height=t.y+`px`,e.onselectstart=l,e.onmousemove=l,B.ielt9&&this.options.opacity<1&&kt(e,this.options.opacity)},_addTile:function(e,t){var n=this._getTilePos(e),r=this._tileCoordsToKey(e),a=this.createTile(this._wrapCoords(e),i(this._tileReady,this,e));this._initTile(a),this.createTile.length<2&&T(i(this._tileReady,this,e,null,a)),Nt(a,n),this._tiles[r]={el:a,coords:e,current:!0},t.appendChild(a),this.fire(`tileloadstart`,{tile:a,coords:e})},_tileReady:function(e,t,n){t&&this.fire(`tileerror`,{error:t,tile:n,coords:e});var r=this._tileCoordsToKey(e);n=this._tiles[r],n&&(n.loaded=+new Date,this._map._fadeAnimated?(kt(n.el,0),E(this._fadeFrame),this._fadeFrame=T(this._updateOpacity,this)):(n.active=!0,this._pruneTiles()),t||(H(n.el,`leaflet-tile-loaded`),this.fire(`tileload`,{tile:n.el,coords:e})),this._noTilesToLoad()&&(this._loading=!1,this.fire(`load`),B.ielt9||!this._map._fadeAnimated?T(this._pruneTiles,this):setTimeout(i(this._pruneTiles,this),250)))},_getTilePos:function(e){return e.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(e){var t=new j(this._wrapX?c(e.x,this._wrapX):e.x,this._wrapY?c(e.y,this._wrapY):e.y);return t.z=e.z,t},_pxBoundsToTileRange:function(e){var t=this.getTileSize();return new N(e.min.unscaleBy(t).floor(),e.max.unscaleBy(t).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var e in this._tiles)if(!this._tiles[e].loaded)return!1;return!0}});function zr(e){return new Rr(e)}var Br=Rr.extend({options:{minZoom:0,maxZoom:18,subdomains:`abc`,errorTileUrl:``,zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(e,t){this._url=e,t=p(this,t),t.detectRetina&&B.retina&&t.maxZoom>0?(t.tileSize=Math.floor(t.tileSize/2),t.zoomReverse?(t.zoomOffset--,t.minZoom=Math.min(t.maxZoom,t.minZoom+1)):(t.zoomOffset++,t.maxZoom=Math.max(t.minZoom,t.maxZoom-1)),t.minZoom=Math.max(0,t.minZoom)):t.zoomReverse?t.minZoom=Math.min(t.maxZoom,t.minZoom):t.maxZoom=Math.max(t.minZoom,t.maxZoom),typeof t.subdomains==`string`&&(t.subdomains=t.subdomains.split(``)),this.on(`tileunload`,this._onTileRemove)},setUrl:function(e,t){return this._url===e&&t===void 0&&(t=!0),this._url=e,t||this.redraw(),this},createTile:function(e,t){var n=document.createElement(`img`);return G(n,`load`,i(this._tileOnLoad,this,t,n)),G(n,`error`,i(this._tileOnError,this,t,n)),(this.options.crossOrigin||this.options.crossOrigin===``)&&(n.crossOrigin=this.options.crossOrigin===!0?``:this.options.crossOrigin),typeof this.options.referrerPolicy==`string`&&(n.referrerPolicy=this.options.referrerPolicy),n.alt=``,n.src=this.getTileUrl(e),n},getTileUrl:function(e){var t={r:B.retina?`@2x`:``,s:this._getSubdomain(e),x:e.x,y:e.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var r=this._globalTileRange.max.y-e.y;this.options.tms&&(t.y=r),t[`-y`]=r}return g(this._url,n(t,this.options))},_tileOnLoad:function(e,t){B.ielt9?setTimeout(i(e,this,null,t),0):e(null,t)},_tileOnError:function(e,t,n){var r=this.options.errorTileUrl;r&&t.getAttribute(`src`)!==r&&(t.src=r),e(n,t)},_onTileRemove:function(e){e.tile.onload=null},_getZoomForUrl:function(){var e=this._tileZoom,t=this.options.maxZoom,n=this.options.zoomReverse,r=this.options.zoomOffset;return n&&(e=t-e),e+r},_getSubdomain:function(e){var t=Math.abs(e.x+e.y)%this.options.subdomains.length;return this.options.subdomains[t]},_abortLoading:function(){var e,t;for(e in this._tiles)if(this._tiles[e].coords.z!==this._tileZoom&&(t=this._tiles[e].el,t.onload=l,t.onerror=l,!t.complete)){t.src=y;var n=this._tiles[e].coords;xt(t),delete this._tiles[e],this.fire(`tileabort`,{tile:t,coords:n})}},_removeTile:function(e){var t=this._tiles[e];if(t)return t.el.setAttribute(`src`,y),Rr.prototype._removeTile.call(this,e)},_tileReady:function(e,t,n){if(!(!this._map||n&&n.getAttribute(`src`)===y))return Rr.prototype._tileReady.call(this,e,t,n)}});function Vr(e,t){return new Br(e,t)}var Hr=Br.extend({defaultWmsParams:{service:`WMS`,request:`GetMap`,layers:``,styles:``,format:`image/jpeg`,transparent:!1,version:`1.1.1`},options:{crs:null,uppercase:!1},initialize:function(e,t){this._url=e;var r=n({},this.defaultWmsParams);for(var i in t)i in this.options||(r[i]=t[i]);t=p(this,t);var a=t.detectRetina&&B.retina?2:1,o=this.getTileSize();r.width=o.x*a,r.height=o.y*a,this.wmsParams=r},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var t=this._wmsVersion>=1.3?`crs`:`srs`;this.wmsParams[t]=this._crs.code,Br.prototype.onAdd.call(this,e)},getTileUrl:function(e){var t=this._tileCoordsToNwSe(e),n=this._crs,r=P(n.project(t[0]),n.project(t[1])),i=r.min,a=r.max,o=(this._wmsVersion>=1.3&&this._crs===qn?[i.y,i.x,a.y,a.x]:[i.x,i.y,a.x,a.y]).join(`,`),s=Br.prototype.getTileUrl.call(this,e);return s+m(this.wmsParams,s,this.options.uppercase)+(this.options.uppercase?`&BBOX=`:`&bbox=`)+o},setParams:function(e,t){return n(this.wmsParams,e),t||this.redraw(),this}});function Ur(e,t){return new Hr(e,t)}Br.WMS=Hr,Vr.wms=Ur;var Wr=Yn.extend({options:{padding:.1},initialize:function(e){p(this,e),o(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),H(this._container,`leaflet-zoom-animated`)),this.getPane().appendChild(this._container),this._update(),this.on(`update`,this._updatePaths,this)},onRemove:function(){this.off(`update`,this._updatePaths,this),this._destroyContainer()},getEvents:function(){var e={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(e.zoomanim=this._onAnimZoom),e},_onAnimZoom:function(e){this._updateTransform(e.center,e.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(e,t){var n=this._map.getZoomScale(t,this._zoom),r=this._map.getSize().multiplyBy(.5+this.options.padding),i=this._map.project(this._center,t),a=r.multiplyBy(-n).add(i).subtract(this._map._getNewPixelOrigin(e,t));B.any3d?Mt(this._container,a,n):Nt(this._container,a)},_reset:function(){for(var e in this._update(),this._updateTransform(this._center,this._zoom),this._layers)this._layers[e]._reset()},_onZoomEnd:function(){for(var e in this._layers)this._layers[e]._project()},_updatePaths:function(){for(var e in this._layers)this._layers[e]._update()},_update:function(){var e=this.options.padding,t=this._map.getSize(),n=this._map.containerPointToLayerPoint(t.multiplyBy(-e)).round();this._bounds=new N(n,n.add(t.multiplyBy(1+e*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Gr=Wr.extend({options:{tolerance:0},getEvents:function(){var e=Wr.prototype.getEvents.call(this);return e.viewprereset=this._onViewPreReset,e},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Wr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var e=this._container=document.createElement(`canvas`);G(e,`mousemove`,this._onMouseMove,this),G(e,`click dblclick mousedown mouseup contextmenu`,this._onClick,this),G(e,`mouseout`,this._handleMouseOut,this),e._leaflet_disable_events=!0,this._ctx=e.getContext(`2d`)},_destroyContainer:function(){E(this._redrawRequest),delete this._ctx,xt(this._container),K(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var e;for(var t in this._redrawBounds=null,this._layers)e=this._layers[t],e._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Wr.prototype._update.call(this);var e=this._bounds,t=this._container,n=e.getSize(),r=B.retina?2:1;Nt(t,e.min),t.width=r*n.x,t.height=r*n.y,t.style.width=n.x+`px`,t.style.height=n.y+`px`,B.retina&&this._ctx.scale(2,2),this._ctx.translate(-e.min.x,-e.min.y),this.fire(`update`)}},_reset:function(){Wr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(e){this._updateDashArray(e),this._layers[o(e)]=e;var t=e._order={layer:e,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=t),this._drawLast=t,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(e){this._requestRedraw(e)},_removePath:function(e){var t=e._order,n=t.next,r=t.prev;n?n.prev=r:this._drawLast=r,r?r.next=n:this._drawFirst=n,delete e._order,delete this._layers[o(e)],this._requestRedraw(e)},_updatePath:function(e){this._extendRedrawBounds(e),e._project(),e._update(),this._requestRedraw(e)},_updateStyle:function(e){this._updateDashArray(e),this._requestRedraw(e)},_updateDashArray:function(e){if(typeof e.options.dashArray==`string`){var t=e.options.dashArray.split(/[, ]+/),n=[],r,i;for(i=0;i<t.length;i++){if(r=Number(t[i]),isNaN(r))return;n.push(r)}e.options._dashArray=n}else e.options._dashArray=e.options.dashArray},_requestRedraw:function(e){this._map&&(this._extendRedrawBounds(e),this._redrawRequest=this._redrawRequest||T(this._redraw,this))},_extendRedrawBounds:function(e){if(e._pxBounds){var t=(e.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new N,this._redrawBounds.extend(e._pxBounds.min.subtract([t,t])),this._redrawBounds.extend(e._pxBounds.max.add([t,t]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var e=this._redrawBounds;if(e){var t=e.getSize();this._ctx.clearRect(e.min.x,e.min.y,t.x,t.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var e,t=this._redrawBounds;if(this._ctx.save(),t){var n=t.getSize();this._ctx.beginPath(),this._ctx.rect(t.min.x,t.min.y,n.x,n.y),this._ctx.clip()}this._drawing=!0;for(var r=this._drawFirst;r;r=r.next)e=r.layer,(!t||e._pxBounds&&e._pxBounds.intersects(t))&&e._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(e,t){if(this._drawing){var n,r,i,a,o=e._parts,s=o.length,c=this._ctx;if(s){for(c.beginPath(),n=0;n<s;n++){for(r=0,i=o[n].length;r<i;r++)a=o[n][r],c[r?`lineTo`:`moveTo`](a.x,a.y);t&&c.closePath()}this._fillStroke(c,e)}}},_updateCircle:function(e){if(!(!this._drawing||e._empty())){var t=e._point,n=this._ctx,r=Math.max(Math.round(e._radius),1),i=(Math.max(Math.round(e._radiusY),1)||r)/r;i!==1&&(n.save(),n.scale(1,i)),n.beginPath(),n.arc(t.x,t.y/i,r,0,Math.PI*2,!1),i!==1&&n.restore(),this._fillStroke(n,e)}},_fillStroke:function(e,t){var n=t.options;n.fill&&(e.globalAlpha=n.fillOpacity,e.fillStyle=n.fillColor||n.color,e.fill(n.fillRule||`evenodd`)),n.stroke&&n.weight!==0&&(e.setLineDash&&e.setLineDash(t.options&&t.options._dashArray||[]),e.globalAlpha=n.opacity,e.lineWidth=n.weight,e.strokeStyle=n.color,e.lineCap=n.lineCap,e.lineJoin=n.lineJoin,e.stroke())},_onClick:function(e){for(var t=this._map.mouseEventToLayerPoint(e),n,r,i=this._drawFirst;i;i=i.next)n=i.layer,n.options.interactive&&n._containsPoint(t)&&(!(e.type===`click`||e.type===`preclick`)||!this._map._draggableMoved(n))&&(r=n);this._fireEvent(r?[r]:!1,e)},_onMouseMove:function(e){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var t=this._map.mouseEventToLayerPoint(e);this._handleMouseHover(e,t)}},_handleMouseOut:function(e){var t=this._hoveredLayer;t&&(Et(this._container,`leaflet-interactive`),this._fireEvent([t],e,`mouseout`),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(e,t){if(!this._mouseHoverThrottled){for(var n,r,a=this._drawFirst;a;a=a.next)n=a.layer,n.options.interactive&&n._containsPoint(t)&&(r=n);r!==this._hoveredLayer&&(this._handleMouseOut(e),r&&(H(this._container,`leaflet-interactive`),this._fireEvent([r],e,`mouseover`),this._hoveredLayer=r)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,e),this._mouseHoverThrottled=!0,setTimeout(i(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(e,t,n){this._map._fireDOMEvent(t,n||t.type,e)},_bringToFront:function(e){var t=e._order;if(t){var n=t.next,r=t.prev;if(n)n.prev=r;else return;r?r.next=n:n&&(this._drawFirst=n),t.prev=this._drawLast,this._drawLast.next=t,t.next=null,this._drawLast=t,this._requestRedraw(e)}},_bringToBack:function(e){var t=e._order;if(t){var n=t.next,r=t.prev;if(r)r.next=n;else return;n?n.prev=r:r&&(this._drawLast=r),t.prev=null,t.next=this._drawFirst,this._drawFirst.prev=t,this._drawFirst=t,this._requestRedraw(e)}}});function Kr(e){return B.canvas?new Gr(e):null}var qr=(function(){try{return document.namespaces.add(`lvml`,`urn:schemas-microsoft-com:vml`),function(e){return document.createElement(`<lvml:`+e+` class="lvml">`)}}catch{}return function(e){return document.createElement(`<`+e+` xmlns="urn:schemas-microsoft.com:vml" class="lvml">`)}})(),Jr={_initContainer:function(){this._container=V(`div`,`leaflet-vml-container`)},_update:function(){this._map._animatingZoom||(Wr.prototype._update.call(this),this.fire(`update`))},_initPath:function(e){var t=e._container=qr(`shape`);H(t,`leaflet-vml-shape `+(this.options.className||``)),t.coordsize=`1 1`,e._path=qr(`path`),t.appendChild(e._path),this._updateStyle(e),this._layers[o(e)]=e},_addPath:function(e){var t=e._container;this._container.appendChild(t),e.options.interactive&&e.addInteractiveTarget(t)},_removePath:function(e){var t=e._container;xt(t),e.removeInteractiveTarget(t),delete this._layers[o(e)]},_updateStyle:function(e){var t=e._stroke,n=e._fill,r=e.options,i=e._container;i.stroked=!!r.stroke,i.filled=!!r.fill,r.stroke?(t||=e._stroke=qr(`stroke`),i.appendChild(t),t.weight=r.weight+`px`,t.color=r.color,t.opacity=r.opacity,r.dashArray?t.dashStyle=_(r.dashArray)?r.dashArray.join(` `):r.dashArray.replace(/( *, *)/g,` `):t.dashStyle=``,t.endcap=r.lineCap.replace(`butt`,`flat`),t.joinstyle=r.lineJoin):t&&(i.removeChild(t),e._stroke=null),r.fill?(n||=e._fill=qr(`fill`),i.appendChild(n),n.color=r.fillColor||r.color,n.opacity=r.fillOpacity):n&&(i.removeChild(n),e._fill=null)},_updateCircle:function(e){var t=e._point.round(),n=Math.round(e._radius),r=Math.round(e._radiusY||n);this._setPath(e,e._empty()?`M0 0`:`AL `+t.x+`,`+t.y+` `+n+`,`+r+` 0,23592600`)},_setPath:function(e,t){e._path.v=t},_bringToFront:function(e){Ct(e._container)},_bringToBack:function(e){wt(e._container)}},Yr=B.vml?qr:de,Xr=Wr.extend({_initContainer:function(){this._container=Yr(`svg`),this._container.setAttribute(`pointer-events`,`none`),this._rootGroup=Yr(`g`),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){xt(this._container),K(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Wr.prototype._update.call(this);var e=this._bounds,t=e.getSize(),n=this._container;(!this._svgSize||!this._svgSize.equals(t))&&(this._svgSize=t,n.setAttribute(`width`,t.x),n.setAttribute(`height`,t.y)),Nt(n,e.min),n.setAttribute(`viewBox`,[e.min.x,e.min.y,t.x,t.y].join(` `)),this.fire(`update`)}},_initPath:function(e){var t=e._path=Yr(`path`);e.options.className&&H(t,e.options.className),e.options.interactive&&H(t,`leaflet-interactive`),this._updateStyle(e),this._layers[o(e)]=e},_addPath:function(e){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(e._path),e.addInteractiveTarget(e._path)},_removePath:function(e){xt(e._path),e.removeInteractiveTarget(e._path),delete this._layers[o(e)]},_updatePath:function(e){e._project(),e._update()},_updateStyle:function(e){var t=e._path,n=e.options;t&&(n.stroke?(t.setAttribute(`stroke`,n.color),t.setAttribute(`stroke-opacity`,n.opacity),t.setAttribute(`stroke-width`,n.weight),t.setAttribute(`stroke-linecap`,n.lineCap),t.setAttribute(`stroke-linejoin`,n.lineJoin),n.dashArray?t.setAttribute(`stroke-dasharray`,n.dashArray):t.removeAttribute(`stroke-dasharray`),n.dashOffset?t.setAttribute(`stroke-dashoffset`,n.dashOffset):t.removeAttribute(`stroke-dashoffset`)):t.setAttribute(`stroke`,`none`),n.fill?(t.setAttribute(`fill`,n.fillColor||n.color),t.setAttribute(`fill-opacity`,n.fillOpacity),t.setAttribute(`fill-rule`,n.fillRule||`evenodd`)):t.setAttribute(`fill`,`none`))},_updatePoly:function(e,t){this._setPath(e,fe(e._parts,t))},_updateCircle:function(e){var t=e._point,n=Math.max(Math.round(e._radius),1),r=Math.max(Math.round(e._radiusY),1)||n,i=`a`+n+`,`+r+` 0 1,0 `,a=e._empty()?`M0 0`:`M`+(t.x-n)+`,`+t.y+i+n*2+`,0 `+i+-n*2+`,0 `;this._setPath(e,a)},_setPath:function(e,t){e._path.setAttribute(`d`,t)},_bringToFront:function(e){Ct(e._path)},_bringToBack:function(e){wt(e._path)}});B.vml&&Xr.include(Jr);function Zr(e){return B.svg||B.vml?new Xr(e):null}J.include({getRenderer:function(e){var t=e.options.renderer||this._getPaneRenderer(e.options.pane)||this.options.renderer||this._renderer;return t||=this._renderer=this._createRenderer(),this.hasLayer(t)||this.addLayer(t),t},_getPaneRenderer:function(e){if(e===`overlayPane`||e===void 0)return!1;var t=this._paneRenderers[e];return t===void 0&&(t=this._createRenderer({pane:e}),this._paneRenderers[e]=t),t},_createRenderer:function(e){return this.options.preferCanvas&&Kr(e)||Zr(e)}});var Qr=pr.extend({initialize:function(e,t){pr.prototype.initialize.call(this,this._boundsToLatLngs(e),t)},setBounds:function(e){return this.setLatLngs(this._boundsToLatLngs(e))},_boundsToLatLngs:function(e){return e=F(e),[e.getSouthWest(),e.getNorthWest(),e.getNorthEast(),e.getSouthEast()]}});function $r(e,t){return new Qr(e,t)}Xr.create=Yr,Xr.pointsToPath=fe,hr.geometryToLayer=gr,hr.coordsToLatLng=vr,hr.coordsToLatLngs=yr,hr.latLngToCoords=br,hr.latLngsToCoords=xr,hr.getFeature=Sr,hr.asFeature=Cr,J.mergeOptions({boxZoom:!0});var ei=yn.extend({initialize:function(e){this._map=e,this._container=e._container,this._pane=e._panes.overlayPane,this._resetStateTimeout=0,e.on(`unload`,this._destroy,this)},addHooks:function(){G(this._container,`mousedown`,this._onMouseDown,this)},removeHooks:function(){K(this._container,`mousedown`,this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){xt(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(e){if(!e.shiftKey||e.which!==1&&e.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Ft(),U(),this._startPoint=this._map.mouseEventToContainerPoint(e),G(document,{contextmenu:tn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(e){this._moved||(this._moved=!0,this._box=V(`div`,`leaflet-zoom-box`,this._container),H(this._container,`leaflet-crosshair`),this._map.fire(`boxzoomstart`)),this._point=this._map.mouseEventToContainerPoint(e);var t=new N(this._point,this._startPoint),n=t.getSize();Nt(this._box,t.min),this._box.style.width=n.x+`px`,this._box.style.height=n.y+`px`},_finish:function(){this._moved&&(xt(this._box),Et(this._container,`leaflet-crosshair`)),It(),zt(),K(document,{contextmenu:tn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(e){if(!(e.which!==1&&e.button!==1)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(i(this._resetState,this),0);var t=new ne(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(t).fire(`boxzoomend`,{boxZoomBounds:t})}},_onKeyDown:function(e){e.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});J.addInitHook(`addHandler`,`boxZoom`,ei),J.mergeOptions({doubleClickZoom:!0});var ti=yn.extend({addHooks:function(){this._map.on(`dblclick`,this._onDoubleClick,this)},removeHooks:function(){this._map.off(`dblclick`,this._onDoubleClick,this)},_onDoubleClick:function(e){var t=this._map,n=t.getZoom(),r=t.options.zoomDelta,i=e.originalEvent.shiftKey?n-r:n+r;t.options.doubleClickZoom===`center`?t.setZoom(i):t.setZoomAround(e.containerPoint,i)}});J.addInitHook(`addHandler`,`doubleClickZoom`,ti),J.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ni=yn.extend({addHooks:function(){if(!this._draggable){var e=this._map;this._draggable=new Sn(e._mapPane,e._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on(`predrag`,this._onPreDragLimit,this),e.options.worldCopyJump&&(this._draggable.on(`predrag`,this._onPreDragWrap,this),e.on(`zoomend`,this._onZoomEnd,this),e.whenReady(this._onZoomEnd,this))}H(this._map._container,`leaflet-grab leaflet-touch-drag`),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Et(this._map._container,`leaflet-grab`),Et(this._map._container,`leaflet-touch-drag`),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var e=this._map;if(e._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var t=F(this._map.options.maxBounds);this._offsetLimit=P(this._map.latLngToContainerPoint(t.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(t.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;e.fire(`movestart`).fire(`dragstart`),e.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(e){if(this._map.options.inertia){var t=this._lastTime=+new Date,n=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(n),this._times.push(t),this._prunePositions(t)}this._map.fire(`move`,e).fire(`drag`,e)},_prunePositions:function(e){for(;this._positions.length>1&&e-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var e=this._map.getSize().divideBy(2);this._initialWorldOffset=this._map.latLngToLayerPoint([0,0]).subtract(e).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(e,t){return e-(e-t)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var e=this._draggable._newPos.subtract(this._draggable._startPos),t=this._offsetLimit;e.x<t.min.x&&(e.x=this._viscousLimit(e.x,t.min.x)),e.y<t.min.y&&(e.y=this._viscousLimit(e.y,t.min.y)),e.x>t.max.x&&(e.x=this._viscousLimit(e.x,t.max.x)),e.y>t.max.y&&(e.y=this._viscousLimit(e.y,t.max.y)),this._draggable._newPos=this._draggable._startPos.add(e)}},_onPreDragWrap:function(){var e=this._worldWidth,t=Math.round(e/2),n=this._initialWorldOffset,r=this._draggable._newPos.x,i=(r-t+n)%e+t-n,a=(r+t+n)%e-t-n,o=Math.abs(i+n)<Math.abs(a+n)?i:a;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=o},_onDragEnd:function(e){var t=this._map,n=t.options,r=!n.inertia||e.noInertia||this._times.length<2;if(t.fire(`dragend`,e),r)t.fire(`moveend`);else{this._prunePositions(+new Date);var i=this._lastPos.subtract(this._positions[0]),a=(this._lastTime-this._times[0])/1e3,o=n.easeLinearity,s=i.multiplyBy(o/a),c=s.distanceTo([0,0]),l=Math.min(n.inertiaMaxSpeed,c),u=s.multiplyBy(l/c),d=l/(n.inertiaDeceleration*o),f=u.multiplyBy(-d/2).round();!f.x&&!f.y?t.fire(`moveend`):(f=t._limitOffset(f,t.options.maxBounds),T(function(){t.panBy(f,{duration:d,easeLinearity:o,noMoveStart:!0,animate:!0})}))}}});J.addInitHook(`addHandler`,`dragging`,ni),J.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ri=yn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(e){this._map=e,this._setPanDelta(e.options.keyboardPanDelta),this._setZoomDelta(e.options.zoomDelta)},addHooks:function(){var e=this._map._container;e.tabIndex<=0&&(e.tabIndex=`0`),G(e,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),K(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var e=document.body,t=document.documentElement,n=e.scrollTop||t.scrollTop,r=e.scrollLeft||t.scrollLeft;this._map._container.focus(),window.scrollTo(r,n)}},_onFocus:function(){this._focused=!0,this._map.fire(`focus`)},_onBlur:function(){this._focused=!1,this._map.fire(`blur`)},_setPanDelta:function(e){var t=this._panKeys={},n=this.keyCodes,r,i;for(r=0,i=n.left.length;r<i;r++)t[n.left[r]]=[-1*e,0];for(r=0,i=n.right.length;r<i;r++)t[n.right[r]]=[e,0];for(r=0,i=n.down.length;r<i;r++)t[n.down[r]]=[0,e];for(r=0,i=n.up.length;r<i;r++)t[n.up[r]]=[0,-1*e]},_setZoomDelta:function(e){var t=this._zoomKeys={},n=this.keyCodes,r,i;for(r=0,i=n.zoomIn.length;r<i;r++)t[n.zoomIn[r]]=e;for(r=0,i=n.zoomOut.length;r<i;r++)t[n.zoomOut[r]]=-e},_addHooks:function(){G(document,`keydown`,this._onKeyDown,this)},_removeHooks:function(){K(document,`keydown`,this._onKeyDown,this)},_onKeyDown:function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t=e.keyCode,n=this._map,r;if(t in this._panKeys){if(!n._panAnim||!n._panAnim._inProgress)if(r=this._panKeys[t],e.shiftKey&&(r=M(r).multiplyBy(3)),n.options.maxBounds&&(r=n._limitOffset(M(r),n.options.maxBounds)),n.options.worldCopyJump){var i=n.wrapLatLng(n.unproject(n.project(n.getCenter()).add(r)));n.panTo(i)}else n.panBy(r)}else if(t in this._zoomKeys)n.setZoom(n.getZoom()+(e.shiftKey?3:1)*this._zoomKeys[t]);else if(t===27&&n._popup&&n._popup.options.closeOnEscapeKey)n.closePopup();else return;tn(e)}}});J.addInitHook(`addHandler`,`keyboard`,ri),J.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ii=yn.extend({addHooks:function(){G(this._map._container,`wheel`,this._onWheelScroll,this),this._delta=0},removeHooks:function(){K(this._map._container,`wheel`,this._onWheelScroll,this)},_onWheelScroll:function(e){var t=on(e),n=this._map.options.wheelDebounceTime;this._delta+=t,this._lastMousePos=this._map.mouseEventToContainerPoint(e),this._startTime||=+new Date;var r=Math.max(n-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(i(this._performZoom,this),r),tn(e)},_performZoom:function(){var e=this._map,t=e.getZoom(),n=this._map.options.zoomSnap||0;e._stop();var r=this._delta/(this._map.options.wheelPxPerZoomLevel*4),i=4*Math.log(2/(1+Math.exp(-Math.abs(r))))/Math.LN2,a=n?Math.ceil(i/n)*n:i,o=e._limitZoom(t+(this._delta>0?a:-a))-t;this._delta=0,this._startTime=null,o&&(e.options.scrollWheelZoom===`center`?e.setZoom(t+o):e.setZoomAround(this._lastMousePos,t+o))}});J.addInitHook(`addHandler`,`scrollWheelZoom`,ii);var ai=600;J.mergeOptions({tapHold:B.touchNative&&B.safari&&B.mobile,tapTolerance:15});var oi=yn.extend({addHooks:function(){G(this._map._container,`touchstart`,this._onDown,this)},removeHooks:function(){K(this._map._container,`touchstart`,this._onDown,this)},_onDown:function(e){if(clearTimeout(this._holdTimeout),e.touches.length===1){var t=e.touches[0];this._startPos=this._newPos=new j(t.clientX,t.clientY),this._holdTimeout=setTimeout(i(function(){this._cancel(),this._isTapValid()&&(G(document,`touchend`,en),G(document,`touchend touchcancel`,this._cancelClickPrevent),this._simulateEvent(`contextmenu`,t))},this),ai),G(document,`touchend touchcancel contextmenu`,this._cancel,this),G(document,`touchmove`,this._onMove,this)}},_cancelClickPrevent:function e(){K(document,`touchend`,en),K(document,`touchend touchcancel`,e)},_cancel:function(){clearTimeout(this._holdTimeout),K(document,`touchend touchcancel contextmenu`,this._cancel,this),K(document,`touchmove`,this._onMove,this)},_onMove:function(e){var t=e.touches[0];this._newPos=new j(t.clientX,t.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(e,t){var n=new MouseEvent(e,{bubbles:!0,cancelable:!0,view:window,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY});n._simulated=!0,t.target.dispatchEvent(n)}});J.addInitHook(`addHandler`,`tapHold`,oi),J.mergeOptions({touchZoom:B.touch,bounceAtZoomLimits:!0});var si=yn.extend({addHooks:function(){H(this._map._container,`leaflet-touch-zoom`),G(this._map._container,`touchstart`,this._onTouchStart,this)},removeHooks:function(){Et(this._map._container,`leaflet-touch-zoom`),K(this._map._container,`touchstart`,this._onTouchStart,this)},_onTouchStart:function(e){var t=this._map;if(!(!e.touches||e.touches.length!==2||t._animatingZoom||this._zooming)){var n=t.mouseEventToContainerPoint(e.touches[0]),r=t.mouseEventToContainerPoint(e.touches[1]);this._centerPoint=t.getSize()._divideBy(2),this._startLatLng=t.containerPointToLatLng(this._centerPoint),t.options.touchZoom!==`center`&&(this._pinchStartLatLng=t.containerPointToLatLng(n.add(r)._divideBy(2))),this._startDist=n.distanceTo(r),this._startZoom=t.getZoom(),this._moved=!1,this._zooming=!0,t._stop(),G(document,`touchmove`,this._onTouchMove,this),G(document,`touchend touchcancel`,this._onTouchEnd,this),en(e)}},_onTouchMove:function(e){if(!(!e.touches||e.touches.length!==2||!this._zooming)){var t=this._map,n=t.mouseEventToContainerPoint(e.touches[0]),r=t.mouseEventToContainerPoint(e.touches[1]),a=n.distanceTo(r)/this._startDist;if(this._zoom=t.getScaleZoom(a,this._startZoom),!t.options.bounceAtZoomLimits&&(this._zoom<t.getMinZoom()&&a<1||this._zoom>t.getMaxZoom()&&a>1)&&(this._zoom=t._limitZoom(this._zoom)),t.options.touchZoom===`center`){if(this._center=this._startLatLng,a===1)return}else{var o=n._add(r)._divideBy(2)._subtract(this._centerPoint);if(a===1&&o.x===0&&o.y===0)return;this._center=t.unproject(t.project(this._pinchStartLatLng,this._zoom).subtract(o),this._zoom)}this._moved||=(t._moveStart(!0,!1),!0),E(this._animRequest),this._animRequest=T(i(t._move,t,this._center,this._zoom,{pinch:!0,round:!1},void 0),this,!0),en(e)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,E(this._animRequest),K(document,`touchmove`,this._onTouchMove,this),K(document,`touchend touchcancel`,this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});J.addInitHook(`addHandler`,`touchZoom`,si),J.BoxZoom=ei,J.DoubleClickZoom=ti,J.Drag=ni,J.Keyboard=ri,J.ScrollWheelZoom=ii,J.TapHold=oi,J.TouchZoom=si,e.Bounds=N,e.Browser=B,e.CRS=re,e.Canvas=Gr,e.Circle=lr,e.CircleMarker=sr,e.Class=O,e.Control=un,e.DivIcon=Ir,e.DivOverlay=jr,e.DomEvent=sn,e.DomUtil=Gt,e.Draggable=Sn,e.Evented=ee,e.FeatureGroup=Qn,e.GeoJSON=hr,e.GridLayer=Rr,e.Handler=yn,e.Icon=er,e.ImageOverlay=Er,e.LatLng=I,e.LatLngBounds=ne,e.Layer=Yn,e.LayerGroup=Xn,e.LineUtil=Hn,e.Map=J,e.Marker=ir,e.Mixin=bn,e.Path=or,e.Point=j,e.PolyUtil=En,e.Polygon=pr,e.Polyline=dr,e.Popup=Mr,e.PosAnimation=cn,e.Projection=Gn,e.Rectangle=Qr,e.Renderer=Wr,e.SVG=Xr,e.SVGOverlay=kr,e.TileLayer=Br,e.Tooltip=Pr,e.Transformation=se,e.Util=D,e.VideoOverlay=Or,e.bind=i,e.bounds=P,e.canvas=Kr,e.circle=ur,e.circleMarker=cr,e.control=dn,e.divIcon=Lr,e.extend=n,e.featureGroup=$n,e.geoJSON=Y,e.geoJson=Tr,e.gridLayer=zr,e.icon=tr,e.imageOverlay=Dr,e.latLng=R,e.latLngBounds=F,e.layerGroup=Zn,e.map=ln,e.marker=ar,e.point=M,e.polygon=mr,e.polyline=fr,e.popup=Nr,e.rectangle=$r,e.setOptions=p,e.stamp=o,e.svg=Zr,e.svgOverlay=Ar,e.tileLayer=Vr,e.tooltip=Fr,e.transformation=ce,e.version=t,e.videoOverlay=X;var ci=window.L;e.noConflict=function(){return window.L=ci,this},window.L=e}))}))(),1);(()=>{var e=Object.create,t=Object.defineProperty,n=Object.getOwnPropertyDescriptor,r=Object.getOwnPropertyNames,i=Object.getPrototypeOf,a=Object.prototype.hasOwnProperty,o=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),s=(e,i,o,s)=>{if(i&&typeof i==`object`||typeof i==`function`)for(let c of r(i))!a.call(e,c)&&c!==o&&t(e,c,{get:()=>i[c],enumerable:!(s=n(i,c))||s.enumerable});return e},c=(n,r,a)=>(a=n==null?{}:e(i(n)),s(r||!n||!n.__esModule?t(a,`default`,{value:n,enumerable:!0}):a,n)),l=o((e,t)=>{function n(){this.__data__=[],this.size=0}t.exports=n}),u=o((e,t)=>{function n(e,t){return e===t||e!==e&&t!==t}t.exports=n}),d=o((e,t)=>{var n=u();function r(e,t){for(var r=e.length;r--;)if(n(e[r][0],t))return r;return-1}t.exports=r}),f=o((e,t)=>{var n=d(),r=Array.prototype.splice;function i(e){var t=this.__data__,i=n(t,e);return i<0?!1:(i==t.length-1?t.pop():r.call(t,i,1),--this.size,!0)}t.exports=i}),p=o((e,t)=>{var n=d();function r(e){var t=this.__data__,r=n(t,e);return r<0?void 0:t[r][1]}t.exports=r}),m=o((e,t)=>{var n=d();function r(e){return n(this.__data__,e)>-1}t.exports=r}),h=o((e,t)=>{var n=d();function r(e,t){var r=this.__data__,i=n(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this}t.exports=r}),g=o((e,t)=>{var n=l(),r=f(),i=p(),a=m(),o=h();function s(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=n,s.prototype.delete=r,s.prototype.get=i,s.prototype.has=a,s.prototype.set=o,t.exports=s}),_=o((e,t)=>{var n=g();function r(){this.__data__=new n,this.size=0}t.exports=r}),v=o((e,t)=>{function n(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}t.exports=n}),y=o((e,t)=>{function n(e){return this.__data__.get(e)}t.exports=n}),b=o((e,t)=>{function n(e){return this.__data__.has(e)}t.exports=n}),x=o((e,t)=>{t.exports=typeof global==`object`&&global&&global.Object===Object&&global}),S=o((e,t)=>{var n=x(),r=typeof self==`object`&&self&&self.Object===Object&&self;t.exports=n||r||Function(`return this`)()}),C=o((e,t)=>{t.exports=S().Symbol}),w=o((e,t)=>{var n=C(),r=Object.prototype,i=r.hasOwnProperty,a=r.toString,o=n?n.toStringTag:void 0;function s(e){var t=i.call(e,o),n=e[o];try{e[o]=void 0;var r=!0}catch{}var s=a.call(e);return r&&(t?e[o]=n:delete e[o]),s}t.exports=s}),T=o((e,t)=>{var n=Object.prototype.toString;function r(e){return n.call(e)}t.exports=r}),E=o((e,t)=>{var n=C(),r=w(),i=T(),a=`[object Null]`,o=`[object Undefined]`,s=n?n.toStringTag:void 0;function c(e){return e==null?e===void 0?o:a:s&&s in Object(e)?r(e):i(e)}t.exports=c}),D=o((e,t)=>{function n(e){var t=typeof e;return e!=null&&(t==`object`||t==`function`)}t.exports=n}),O=o((e,t)=>{var n=E(),r=D(),i=`[object AsyncFunction]`,a=`[object Function]`,o=`[object GeneratorFunction]`,s=`[object Proxy]`;function c(e){if(!r(e))return!1;var t=n(e);return t==a||t==o||t==i||t==s}t.exports=c}),k=o((e,t)=>{t.exports=S()[`__core-js_shared__`]}),A=o((e,t)=>{var n=k(),r=(function(){var e=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||``);return e?`Symbol(src)_1.`+e:``})();function i(e){return!!r&&r in e}t.exports=i}),ee=o((e,t)=>{var n=Function.prototype.toString;function r(e){if(e!=null){try{return n.call(e)}catch{}try{return e+``}catch{}}return``}t.exports=r}),j=o((e,t)=>{var n=O(),r=A(),i=D(),a=ee(),o=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,c=Function.prototype,l=Object.prototype,u=c.toString,d=l.hasOwnProperty,f=RegExp(`^`+u.call(d).replace(o,`\\$&`).replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,`$1.*?`)+`$`);function p(e){return!i(e)||r(e)?!1:(n(e)?f:s).test(a(e))}t.exports=p}),te=o((e,t)=>{function n(e,t){return e?.[t]}t.exports=n}),M=o((e,t)=>{var n=j(),r=te();function i(e,t){var i=r(e,t);return n(i)?i:void 0}t.exports=i}),N=o((e,t)=>{t.exports=M()(S(),`Map`)}),P=o((e,t)=>{t.exports=M()(Object,`create`)}),ne=o((e,t)=>{var n=P();function r(){this.__data__=n?n(null):{},this.size=0}t.exports=r}),F=o((e,t)=>{function n(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}t.exports=n}),I=o((e,t)=>{var n=P(),r=`__lodash_hash_undefined__`,i=Object.prototype.hasOwnProperty;function a(e){var t=this.__data__;if(n){var a=t[e];return a===r?void 0:a}return i.call(t,e)?t[e]:void 0}t.exports=a}),R=o((e,t)=>{var n=P(),r=Object.prototype.hasOwnProperty;function i(e){var t=this.__data__;return n?t[e]!==void 0:r.call(t,e)}t.exports=i}),re=o((e,t)=>{var n=P(),r=`__lodash_hash_undefined__`;function i(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=n&&t===void 0?r:t,this}t.exports=i}),ie=o((e,t)=>{var n=ne(),r=F(),i=I(),a=R(),o=re();function s(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=n,s.prototype.delete=r,s.prototype.get=i,s.prototype.has=a,s.prototype.set=o,t.exports=s}),ae=o((e,t)=>{var n=ie(),r=g(),i=N();function a(){this.size=0,this.__data__={hash:new n,map:new(i||r),string:new n}}t.exports=a}),oe=o((e,t)=>{function n(e){var t=typeof e;return t==`string`||t==`number`||t==`symbol`||t==`boolean`?e!==`__proto__`:e===null}t.exports=n}),se=o((e,t)=>{var n=oe();function r(e,t){var r=e.__data__;return n(t)?r[typeof t==`string`?`string`:`hash`]:r.map}t.exports=r}),ce=o((e,t)=>{var n=se();function r(e){var t=n(this,e).delete(e);return this.size-=t?1:0,t}t.exports=r}),le=o((e,t)=>{var n=se();function r(e){return n(this,e).get(e)}t.exports=r}),ue=o((e,t)=>{var n=se();function r(e){return n(this,e).has(e)}t.exports=r}),de=o((e,t)=>{var n=se();function r(e,t){var r=n(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this}t.exports=r}),fe=o((e,t)=>{var n=ae(),r=ce(),i=le(),a=ue(),o=de();function s(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}s.prototype.clear=n,s.prototype.delete=r,s.prototype.get=i,s.prototype.has=a,s.prototype.set=o,t.exports=s}),pe=o((e,t)=>{var n=g(),r=N(),i=fe(),a=200;function o(e,t){var o=this.__data__;if(o instanceof n){var s=o.__data__;if(!r||s.length<a-1)return s.push([e,t]),this.size=++o.size,this;o=this.__data__=new i(s)}return o.set(e,t),this.size=o.size,this}t.exports=o}),me=o((e,t)=>{var n=g(),r=_(),i=v(),a=y(),o=b(),s=pe();function c(e){this.size=(this.__data__=new n(e)).size}c.prototype.clear=r,c.prototype.delete=i,c.prototype.get=a,c.prototype.has=o,c.prototype.set=s,t.exports=c}),he=o((e,t)=>{var n=M();t.exports=(function(){try{var e=n(Object,`defineProperty`);return e({},``,{}),e}catch{}})()}),ge=o((e,t)=>{var n=he();function r(e,t,r){t==`__proto__`&&n?n(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}t.exports=r}),_e=o((e,t)=>{var n=ge(),r=u();function i(e,t,i){(i!==void 0&&!r(e[t],i)||i===void 0&&!(t in e))&&n(e,t,i)}t.exports=i}),ve=o((e,t)=>{function n(e){return function(t,n,r){for(var i=-1,a=Object(t),o=r(t),s=o.length;s--;){var c=o[e?s:++i];if(n(a[c],c,a)===!1)break}return t}}t.exports=n}),ye=o((e,t)=>{t.exports=ve()()}),be=o((e,t)=>{var n=S(),r=typeof e==`object`&&e&&!e.nodeType&&e,i=r&&typeof t==`object`&&t&&!t.nodeType&&t,a=i&&i.exports===r?n.Buffer:void 0,o=a?a.allocUnsafe:void 0;function s(e,t){if(t)return e.slice();var n=e.length,r=o?o(n):new e.constructor(n);return e.copy(r),r}t.exports=s}),xe=o((e,t)=>{t.exports=S().Uint8Array}),Se=o((e,t)=>{var n=xe();function r(e){var t=new e.constructor(e.byteLength);return new n(t).set(new n(e)),t}t.exports=r}),Ce=o((e,t)=>{var n=Se();function r(e,t){var r=t?n(e.buffer):e.buffer;return new e.constructor(r,e.byteOffset,e.length)}t.exports=r}),we=o((e,t)=>{function n(e,t){var n=-1,r=e.length;for(t||=Array(r);++n<r;)t[n]=e[n];return t}t.exports=n}),z=o((e,t)=>{var n=D(),r=Object.create;t.exports=(function(){function e(){}return function(t){if(!n(t))return{};if(r)return r(t);e.prototype=t;var i=new e;return e.prototype=void 0,i}})()}),Te=o((e,t)=>{function n(e,t){return function(n){return e(t(n))}}t.exports=n}),Ee=o((e,t)=>{t.exports=Te()(Object.getPrototypeOf,Object)}),De=o((e,t)=>{var n=Object.prototype;function r(e){var t=e&&e.constructor;return e===(typeof t==`function`&&t.prototype||n)}t.exports=r}),Oe=o((e,t)=>{var n=z(),r=Ee(),i=De();function a(e){return typeof e.constructor==`function`&&!i(e)?n(r(e)):{}}t.exports=a}),ke=o((e,t)=>{function n(e){return typeof e==`object`&&!!e}t.exports=n}),Ae=o((e,t)=>{var n=E(),r=ke(),i=`[object Arguments]`;function a(e){return r(e)&&n(e)==i}t.exports=a}),je=o((e,t)=>{var n=Ae(),r=ke(),i=Object.prototype,a=i.hasOwnProperty,o=i.propertyIsEnumerable;t.exports=n((function(){return arguments})())?n:function(e){return r(e)&&a.call(e,`callee`)&&!o.call(e,`callee`)}}),Me=o((e,t)=>{t.exports=Array.isArray}),Ne=o((e,t)=>{var n=9007199254740991;function r(e){return typeof e==`number`&&e>-1&&e%1==0&&e<=n}t.exports=r}),Pe=o((e,t)=>{var n=O(),r=Ne();function i(e){return e!=null&&r(e.length)&&!n(e)}t.exports=i}),Fe=o((e,t)=>{var n=Pe(),r=ke();function i(e){return r(e)&&n(e)}t.exports=i}),Ie=o((e,t)=>{function n(){return!1}t.exports=n}),Le=o((e,t)=>{var n=S(),r=Ie(),i=typeof e==`object`&&e&&!e.nodeType&&e,a=i&&typeof t==`object`&&t&&!t.nodeType&&t,o=a&&a.exports===i?n.Buffer:void 0;t.exports=(o?o.isBuffer:void 0)||r}),Re=o((e,t)=>{var n=E(),r=Ee(),i=ke(),a=`[object Object]`,o=Function.prototype,s=Object.prototype,c=o.toString,l=s.hasOwnProperty,u=c.call(Object);function d(e){if(!i(e)||n(e)!=a)return!1;var t=r(e);if(t===null)return!0;var o=l.call(t,`constructor`)&&t.constructor;return typeof o==`function`&&o instanceof o&&c.call(o)==u}t.exports=d}),ze=o((e,t)=>{var n=E(),r=Ne(),i=ke(),a=`[object Arguments]`,o=`[object Array]`,s=`[object Boolean]`,c=`[object Date]`,l=`[object Error]`,u=`[object Function]`,d=`[object Map]`,f=`[object Number]`,p=`[object Object]`,m=`[object RegExp]`,h=`[object Set]`,g=`[object String]`,_=`[object WeakMap]`,v=`[object ArrayBuffer]`,y=`[object DataView]`,b=`[object Float32Array]`,x=`[object Float64Array]`,S=`[object Int8Array]`,C=`[object Int16Array]`,w=`[object Int32Array]`,T=`[object Uint8Array]`,D=`[object Uint8ClampedArray]`,O=`[object Uint16Array]`,k=`[object Uint32Array]`,A={};A[b]=A[x]=A[S]=A[C]=A[w]=A[T]=A[D]=A[O]=A[k]=!0,A[a]=A[o]=A[v]=A[s]=A[y]=A[c]=A[l]=A[u]=A[d]=A[f]=A[p]=A[m]=A[h]=A[g]=A[_]=!1;function ee(e){return i(e)&&r(e.length)&&!!A[n(e)]}t.exports=ee}),Be=o((e,t)=>{function n(e){return function(t){return e(t)}}t.exports=n}),Ve=o((e,t)=>{var n=x(),r=typeof e==`object`&&e&&!e.nodeType&&e,i=r&&typeof t==`object`&&t&&!t.nodeType&&t,a=i&&i.exports===r&&n.process;t.exports=(function(){try{return i&&i.require&&i.require(`util`).types||a&&a.binding&&a.binding(`util`)}catch{}})()}),He=o((e,t)=>{var n=ze(),r=Be(),i=Ve(),a=i&&i.isTypedArray;t.exports=a?r(a):n}),Ue=o((e,t)=>{function n(e,t){if(!(t===`constructor`&&typeof e[t]==`function`)&&t!=`__proto__`)return e[t]}t.exports=n}),We=o((e,t)=>{var n=ge(),r=u(),i=Object.prototype.hasOwnProperty;function a(e,t,a){var o=e[t];(!(i.call(e,t)&&r(o,a))||a===void 0&&!(t in e))&&n(e,t,a)}t.exports=a}),Ge=o((e,t)=>{var n=We(),r=ge();function i(e,t,i,a){var o=!i;i||={};for(var s=-1,c=t.length;++s<c;){var l=t[s],u=a?a(i[l],e[l],l,i,e):void 0;u===void 0&&(u=e[l]),o?r(i,l,u):n(i,l,u)}return i}t.exports=i}),Ke=o((e,t)=>{function n(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}t.exports=n}),qe=o((e,t)=>{var n=9007199254740991,r=/^(?:0|[1-9]\d*)$/;function i(e,t){var i=typeof e;return t??=n,!!t&&(i==`number`||i!=`symbol`&&r.test(e))&&e>-1&&e%1==0&&e<t}t.exports=i}),Je=o((e,t)=>{var n=Ke(),r=je(),i=Me(),a=Le(),o=qe(),s=He(),c=Object.prototype.hasOwnProperty;function l(e,t){var l=i(e),u=!l&&r(e),d=!l&&!u&&a(e),f=!l&&!u&&!d&&s(e),p=l||u||d||f,m=p?n(e.length,String):[],h=m.length;for(var g in e)(t||c.call(e,g))&&!(p&&(g==`length`||d&&(g==`offset`||g==`parent`)||f&&(g==`buffer`||g==`byteLength`||g==`byteOffset`)||o(g,h)))&&m.push(g);return m}t.exports=l}),Ye=o((e,t)=>{function n(e){var t=[];if(e!=null)for(var n in Object(e))t.push(n);return t}t.exports=n}),B=o((e,t)=>{var n=D(),r=De(),i=Ye(),a=Object.prototype.hasOwnProperty;function o(e){if(!n(e))return i(e);var t=r(e),o=[];for(var s in e)s==`constructor`&&(t||!a.call(e,s))||o.push(s);return o}t.exports=o}),Xe=o((e,t)=>{var n=Je(),r=B(),i=Pe();function a(e){return i(e)?n(e,!0):r(e)}t.exports=a}),Ze=o((e,t)=>{var n=Ge(),r=Xe();function i(e){return n(e,r(e))}t.exports=i}),Qe=o((e,t)=>{var n=_e(),r=be(),i=Ce(),a=we(),o=Oe(),s=je(),c=Me(),l=Fe(),u=Le(),d=O(),f=D(),p=Re(),m=He(),h=Ue(),g=Ze();function _(e,t,_,v,y,b,x){var S=h(e,_),C=h(t,_),w=x.get(C);if(w){n(e,_,w);return}var T=b?b(S,C,_+``,e,t,x):void 0,E=T===void 0;if(E){var D=c(C),O=!D&&u(C),k=!D&&!O&&m(C);T=C,D||O||k?c(S)?T=S:l(S)?T=a(S):O?(E=!1,T=r(C,!0)):k?(E=!1,T=i(C,!0)):T=[]:p(C)||s(C)?(T=S,s(S)?T=g(S):(!f(S)||d(S))&&(T=o(C))):E=!1}E&&(x.set(C,T),y(T,C,v,b,x),x.delete(C)),n(e,_,T)}t.exports=_}),$e=o((e,t)=>{var n=me(),r=_e(),i=ye(),a=Qe(),o=D(),s=Xe(),c=Ue();function l(e,t,u,d,f){e!==t&&i(t,function(i,s){if(f||=new n,o(i))a(e,t,s,u,l,d,f);else{var p=d?d(c(e,s),i,s+``,e,t,f):void 0;p===void 0&&(p=i),r(e,s,p)}},s)}t.exports=l}),et=o((e,t)=>{function n(e){return e}t.exports=n}),tt=o((e,t)=>{function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}t.exports=n}),nt=o((e,t)=>{var n=tt(),r=Math.max;function i(e,t,i){return t=r(t===void 0?e.length-1:t,0),function(){for(var a=arguments,o=-1,s=r(a.length-t,0),c=Array(s);++o<s;)c[o]=a[t+o];o=-1;for(var l=Array(t+1);++o<t;)l[o]=a[o];return l[t]=i(c),n(e,this,l)}}t.exports=i}),rt=o((e,t)=>{function n(e){return function(){return e}}t.exports=n}),it=o((e,t)=>{var n=rt(),r=he(),i=et();t.exports=r?function(e,t){return r(e,`toString`,{configurable:!0,enumerable:!1,value:n(t),writable:!0})}:i}),at=o((e,t)=>{var n=800,r=16,i=Date.now;function a(e){var t=0,a=0;return function(){var o=i(),s=r-(o-a);if(a=o,s>0){if(++t>=n)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}t.exports=a}),ot=o((e,t)=>{var n=it();t.exports=at()(n)}),st=o((e,t)=>{var n=et(),r=nt(),i=ot();function a(e,t){return i(r(e,t,n),e+``)}t.exports=a}),ct=o((e,t)=>{var n=u(),r=Pe(),i=qe(),a=D();function o(e,t,o){if(!a(o))return!1;var s=typeof t;return(s==`number`?r(o)&&i(t,o.length):s==`string`&&t in o)?n(o[t],e):!1}t.exports=o}),lt=o((e,t)=>{var n=st(),r=ct();function i(e){return n(function(t,n){var i=-1,a=n.length,o=a>1?n[a-1]:void 0,s=a>2?n[2]:void 0;for(o=e.length>3&&typeof o==`function`?(a--,o):void 0,s&&r(n[0],n[1],s)&&(o=a<3?void 0:o,a=1),t=Object(t);++i<a;){var c=n[i];c&&e(t,c,i,o)}return t})}t.exports=i}),ut=o((e,t)=>{var n=$e();t.exports=lt()(function(e,t,r){n(e,t,r)})}),dt=o((e,t)=>{var n=E(),r=ke(),i=`[object Symbol]`;function a(e){return typeof e==`symbol`||r(e)&&n(e)==i}t.exports=a}),ft=o((e,t)=>{var n=Me(),r=dt(),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;function o(e,t){if(n(e))return!1;var o=typeof e;return o==`number`||o==`symbol`||o==`boolean`||e==null||r(e)?!0:a.test(e)||!i.test(e)||t!=null&&e in Object(t)}t.exports=o}),pt=o((e,t)=>{var n=fe(),r=`Expected a function`;function i(e,t){if(typeof e!=`function`||t!=null&&typeof t!=`function`)throw TypeError(r);var a=function(){var n=arguments,r=t?t.apply(this,n):n[0],i=a.cache;if(i.has(r))return i.get(r);var o=e.apply(this,n);return a.cache=i.set(r,o)||i,o};return a.cache=new(i.Cache||n),a}i.Cache=n,t.exports=i}),mt=o((e,t)=>{var n=pt(),r=500;function i(e){var t=n(e,function(e){return i.size===r&&i.clear(),e}),i=t.cache;return t}t.exports=i}),ht=o((e,t)=>{var n=mt(),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,i=/\\(\\)?/g;t.exports=n(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(``),e.replace(r,function(e,n,r,a){t.push(r?a.replace(i,`$1`):n||e)}),t})}),gt=o((e,t)=>{function n(e,t){for(var n=-1,r=e==null?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}t.exports=n}),_t=o((e,t)=>{var n=C(),r=gt(),i=Me(),a=dt(),o=1/0,s=n?n.prototype:void 0,c=s?s.toString:void 0;function l(e){if(typeof e==`string`)return e;if(i(e))return r(e,l)+``;if(a(e))return c?c.call(e):``;var t=e+``;return t==`0`&&1/e==-o?`-0`:t}t.exports=l}),vt=o((e,t)=>{var n=_t();function r(e){return e==null?``:n(e)}t.exports=r}),yt=o((e,t)=>{var n=Me(),r=ft(),i=ht(),a=vt();function o(e,t){return n(e)?e:r(e,t)?[e]:i(a(e))}t.exports=o}),bt=o((e,t)=>{var n=dt(),r=1/0;function i(e){if(typeof e==`string`||n(e))return e;var t=e+``;return t==`0`&&1/e==-r?`-0`:t}t.exports=i}),V=o((e,t)=>{var n=yt(),r=bt();function i(e,t){t=n(t,e);for(var i=0,a=t.length;e!=null&&i<a;)e=e[r(t[i++])];return i&&i==a?e:void 0}t.exports=i}),xt=o((e,t)=>{var n=V();function r(e,t,r){var i=e==null?void 0:n(e,t);return i===void 0?r:i}t.exports=r}),St=o((e,t)=>{(function(n,r){typeof e==`object`&&typeof t<`u`?t.exports=r():typeof define==`function`&&define.amd?define(r):(n||=self).RBush=r()})(e,function(){function e(e,r,i,a,o){(function e(n,r,i,a,o){for(;a>i;){if(a-i>600){var s=a-i+1,c=r-i+1,l=Math.log(s),u=.5*Math.exp(2*l/3),d=.5*Math.sqrt(l*u*(s-u)/s)*(c-s/2<0?-1:1);e(n,r,Math.max(i,Math.floor(r-c*u/s+d)),Math.min(a,Math.floor(r+(s-c)*u/s+d)),o)}var f=n[r],p=i,m=a;for(t(n,i,r),o(n[a],f)>0&&t(n,i,a);p<m;){for(t(n,p,m),p++,m--;o(n[p],f)<0;)p++;for(;o(n[m],f)>0;)m--}o(n[i],f)===0?t(n,i,m):t(n,++m,a),m<=r&&(i=m+1),r<=m&&(a=m-1)}})(e,r,i||0,a||e.length-1,o||n)}function t(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function n(e,t){return e<t?-1:e>t?1:0}var r=function(e){e===void 0&&(e=9),this._maxEntries=Math.max(4,e),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function i(e,t,n){if(!n)return t.indexOf(e);for(var r=0;r<t.length;r++)if(n(e,t[r]))return r;return-1}function a(e,t){o(e,0,e.children.length,t,e)}function o(e,t,n,r,i){i||=m(null),i.minX=1/0,i.minY=1/0,i.maxX=-1/0,i.maxY=-1/0;for(var a=t;a<n;a++){var o=e.children[a];s(i,e.leaf?r(o):o)}return i}function s(e,t){return e.minX=Math.min(e.minX,t.minX),e.minY=Math.min(e.minY,t.minY),e.maxX=Math.max(e.maxX,t.maxX),e.maxY=Math.max(e.maxY,t.maxY),e}function c(e,t){return e.minX-t.minX}function l(e,t){return e.minY-t.minY}function u(e){return(e.maxX-e.minX)*(e.maxY-e.minY)}function d(e){return e.maxX-e.minX+(e.maxY-e.minY)}function f(e,t){return e.minX<=t.minX&&e.minY<=t.minY&&t.maxX<=e.maxX&&t.maxY<=e.maxY}function p(e,t){return t.minX<=e.maxX&&t.minY<=e.maxY&&t.maxX>=e.minX&&t.maxY>=e.minY}function m(e){return{children:e,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function h(t,n,r,i,a){for(var o=[n,r];o.length;)if(!((r=o.pop())-(n=o.pop())<=i)){var s=n+Math.ceil((r-n)/i/2)*i;e(t,s,n,r,a),o.push(n,s,s,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(e){var t=this.data,n=[];if(!p(e,t))return n;for(var r=this.toBBox,i=[];t;){for(var a=0;a<t.children.length;a++){var o=t.children[a],s=t.leaf?r(o):o;p(e,s)&&(t.leaf?n.push(o):f(e,s)?this._all(o,n):i.push(o))}t=i.pop()}return n},r.prototype.collides=function(e){var t=this.data;if(!p(e,t))return!1;for(var n=[];t;){for(var r=0;r<t.children.length;r++){var i=t.children[r],a=t.leaf?this.toBBox(i):i;if(p(e,a)){if(t.leaf||f(e,a))return!0;n.push(i)}}t=n.pop()}return!1},r.prototype.load=function(e){if(!e||!e.length)return this;if(e.length<this._minEntries){for(var t=0;t<e.length;t++)this.insert(e[t]);return this}var n=this._build(e.slice(),0,e.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},r.prototype.insert=function(e){return e&&this._insert(e,this.data.height-1),this},r.prototype.clear=function(){return this.data=m([]),this},r.prototype.remove=function(e,t){if(!e)return this;for(var n,r,a,o=this.data,s=this.toBBox(e),c=[],l=[];o||c.length;){if(o||(o=c.pop(),r=c[c.length-1],n=l.pop(),a=!0),o.leaf){var u=i(e,o.children,t);if(u!==-1)return o.children.splice(u,1),c.push(o),this._condense(c),this}a||o.leaf||!f(o,s)?r?(n++,o=r.children[n],a=!1):o=null:(c.push(o),l.push(n),n=0,r=o,o=o.children[0])}return this},r.prototype.toBBox=function(e){return e},r.prototype.compareMinX=function(e,t){return e.minX-t.minX},r.prototype.compareMinY=function(e,t){return e.minY-t.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(e){return this.data=e,this},r.prototype._all=function(e,t){for(var n=[];e;)e.leaf?t.push.apply(t,e.children):n.push.apply(n,e.children),e=n.pop();return t},r.prototype._build=function(e,t,n,r){var i,o=n-t+1,s=this._maxEntries;if(o<=s)return a(i=m(e.slice(t,n+1)),this.toBBox),i;r||(r=Math.ceil(Math.log(o)/Math.log(s)),s=Math.ceil(o/s**(r-1))),(i=m([])).leaf=!1,i.height=r;var c=Math.ceil(o/s),l=c*Math.ceil(Math.sqrt(s));h(e,t,n,l,this.compareMinX);for(var u=t;u<=n;u+=l){var d=Math.min(u+l-1,n);h(e,u,d,c,this.compareMinY);for(var f=u;f<=d;f+=c){var p=Math.min(f+c-1,d);i.children.push(this._build(e,f,p,r-1))}}return a(i,this.toBBox),i},r.prototype._chooseSubtree=function(e,t,n,r){for(;r.push(t),!t.leaf&&r.length-1!==n;){for(var i=1/0,a=1/0,o=void 0,s=0;s<t.children.length;s++){var c=t.children[s],l=u(c),d=(f=e,p=c,(Math.max(p.maxX,f.maxX)-Math.min(p.minX,f.minX))*(Math.max(p.maxY,f.maxY)-Math.min(p.minY,f.minY))-l);d<a?(a=d,i=l<i?l:i,o=c):d===a&&l<i&&(i=l,o=c)}t=o||t.children[0]}var f,p;return t},r.prototype._insert=function(e,t,n){var r=n?e:this.toBBox(e),i=[],a=this._chooseSubtree(r,this.data,t,i);for(a.children.push(e),s(a,r);t>=0&&i[t].children.length>this._maxEntries;)this._split(i,t),t--;this._adjustParentBBoxes(r,i,t)},r.prototype._split=function(e,t){var n=e[t],r=n.children.length,i=this._minEntries;this._chooseSplitAxis(n,i,r);var o=this._chooseSplitIndex(n,i,r),s=m(n.children.splice(o,n.children.length-o));s.height=n.height,s.leaf=n.leaf,a(n,this.toBBox),a(s,this.toBBox),t?e[t-1].children.push(s):this._splitRoot(n,s)},r.prototype._splitRoot=function(e,t){this.data=m([e,t]),this.data.height=e.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(e,t,n){for(var r,i,a,s,c,l,d,f=1/0,p=1/0,m=t;m<=n-t;m++){var h=o(e,0,m,this.toBBox),g=o(e,m,n,this.toBBox),_=(i=h,a=g,s=void 0,c=void 0,l=void 0,d=void 0,s=Math.max(i.minX,a.minX),c=Math.max(i.minY,a.minY),l=Math.min(i.maxX,a.maxX),d=Math.min(i.maxY,a.maxY),Math.max(0,l-s)*Math.max(0,d-c)),v=u(h)+u(g);_<f?(f=_,r=m,p=v<p?v:p):_===f&&v<p&&(p=v,r=m)}return r||n-t},r.prototype._chooseSplitAxis=function(e,t,n){var r=e.leaf?this.compareMinX:c,i=e.leaf?this.compareMinY:l;this._allDistMargin(e,t,n,r)<this._allDistMargin(e,t,n,i)&&e.children.sort(r)},r.prototype._allDistMargin=function(e,t,n,r){e.children.sort(r);for(var i=this.toBBox,a=o(e,0,t,i),c=o(e,n-t,n,i),l=d(a)+d(c),u=t;u<n-t;u++){var f=e.children[u];s(a,e.leaf?i(f):f),l+=d(a)}for(var p=n-t-1;p>=t;p--){var m=e.children[p];s(c,e.leaf?i(m):m),l+=d(c)}return l},r.prototype._adjustParentBBoxes=function(e,t,n){for(var r=n;r>=0;r--)s(t[r],e)},r.prototype._condense=function(e){for(var t=e.length-1,n=void 0;t>=0;t--)e[t].children.length===0?t>0?(n=e[t-1].children).splice(n.indexOf(e[t]),1):this.clear():a(e[t],this.toBBox)},r})});Array.prototype.findIndex=Array.prototype.findIndex||function(e){if(this===null)throw TypeError(`Array.prototype.findIndex called on null or undefined`);if(typeof e!=`function`)throw TypeError(`callback must be a function`);for(var t=Object(this),n=t.length>>>0,r=arguments[1],i=0;i<n;i++)if(e.call(r,t[i],i,t))return i;return-1},Array.prototype.find=Array.prototype.find||function(e){if(this===null)throw TypeError(`Array.prototype.find called on null or undefined`);if(typeof e!=`function`)throw TypeError(`callback must be a function`);for(var t=Object(this),n=t.length>>>0,r=arguments[1],i=0;i<n;i++){var a=t[i];if(e.call(r,a,i,t))return a}},typeof Object.assign!=`function`&&(Object.assign=function(e){if(e==null)throw TypeError(`Cannot convert undefined or null to object`);e=Object(e);for(var t=1;t<arguments.length;t++){var n=arguments[t];if(n!=null)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),(function(e){e.forEach(function(e){e.hasOwnProperty(`remove`)||Object.defineProperty(e,`remove`,{configurable:!0,enumerable:!0,writable:!0,value:function(){this.parentNode.removeChild(this)}})})})([Element.prototype,CharacterData.prototype,DocumentType.prototype]),Array.prototype.includes||Object.defineProperty(Array.prototype,`includes`,{value:function(e,t){if(this==null)throw TypeError(`"this" is null or not defined`);var n=Object(this),r=n.length>>>0;if(r===0)return!1;var i=t|0,a=Math.max(i>=0?i:r-Math.abs(i),0);function o(e,t){return e===t||typeof e==`number`&&typeof t==`number`&&isNaN(e)&&isNaN(t)}for(;a<r;){if(o(n[a],e))return!0;a++}return!1}});var Ct={name:`@geoman-io/leaflet-geoman-free`,version:`2.19.0`,description:`A Leaflet Plugin For Editing Geometry Layers in Leaflet 1.0`,keywords:[`leaflet`,`geoman`,`polygon management`,`geometry editing`,`map data`,`map overlay`,`polygon`,`geojson`,`leaflet-draw`,`data-field-geojson`,`ui-leaflet-draw`],files:[`dist/leaflet-geoman.js`,`dist/leaflet-geoman.min.js`,`dist/leaflet-geoman.css`,`dist/leaflet-geoman.d.ts`,`dist/leaflet-geoman.js.map`,`dist/leaflet-geoman.css.map`],main:`dist/leaflet-geoman.js`,module:`dist/leaflet-geoman.js`,types:`dist/leaflet-geoman.d.ts`,exports:{".":{types:`./dist/leaflet-geoman.d.ts`,import:`./dist/leaflet-geoman.js`,require:`./dist/leaflet-geoman.js`,default:`./dist/leaflet-geoman.js`},"./dist/leaflet-geoman.css":`./dist/leaflet-geoman.css`},dependencies:{"@turf/boolean-contains":`^7.3.1`,"@turf/kinks":`^7.3.1`,"@turf/line-intersect":`^7.3.1`,"@turf/line-split":`^7.3.1`,lodash:`4.17.21`,"polyclip-ts":`^0.16.8`},devDependencies:{"@types/leaflet":`^1.9.21`,"@vitest/coverage-v8":`^4.0.15`,"cross-env":`^10.1.0`,cypress:`^15.7.1`,esbuild:`^0.27.1`,eslint:`9.39.1`,"eslint-config-prettier":`10.1.8`,"eslint-plugin-cypress":`5.2.0`,"eslint-plugin-import":`2.32.0`,husky:`^9.1.7`,leaflet:`1.9.4`,"lint-staged":`^16.2.7`,prettier:`3.7.4`,"prosthetic-hand":`1.3.1`,typescript:`^5.9.3`,vitest:`^4.0.15`},peerDependencies:{leaflet:`^1.2.0`},engines:{node:`>=18.0.0`},scripts:{start:`npm run dev`,dev:`cross-env DEV=true node bundle.mjs`,build:`node bundle.mjs`,test:`cypress run --browser chrome`,"test:unit":`vitest run`,"test:unit:watch":`vitest`,"test:unit:coverage":`vitest run --coverage`,"test:all":`npm run test:unit && npm run test`,cypress:`cypress open`,prepare:`npm run build && husky`,"eslint-check":`eslint --print-config . | eslint-config-prettier-check`,eslint:`eslint "{src,demo}/**/*.js" --fix `,prettier:`prettier --write "{src,demo}/**/*.{js,css}" --log-level=warn`,lint:`npm run eslint && npm run prettier`,typecheck:`tsc --noEmit`},repository:{type:`git`,url:`git://github.com/geoman-io/leaflet-geoman.git`},author:{name:`Geoman.io`,email:`sales@geoman.io`,url:`http://geoman.io`},license:`MIT`,bugs:{url:`https://github.com/geoman-io/leaflet-geoman/issues`},homepage:`https://geoman.io`,prettier:{trailingComma:`es5`,tabWidth:2,semi:!0,singleQuote:!0},"lint-staged":{"*.js":`eslint "{src,demo}/**/*.js" --fix`,"*.{js,css,md}":`prettier --write "{src,demo}/**/*.{js,css}"`}},wt=c(ut()),Tt={tooltips:{placeMarker:`Click to place marker`,firstVertex:`Click to place first vertex`,continueLine:`Click to continue drawing`,finishLine:`Click any existing marker to finish`,finishPoly:`Click first marker to finish`,finishRect:`Click to finish`,startCircle:`Click to place circle center`,finishCircle:`Click to finish circle`,placeCircleMarker:`Click to place circle marker`,placeText:`Click to place text`,selectFirstLayerFor:`Select first layer for {action}`,selectSecondLayerFor:`Select second layer for {action}`},actions:{finish:`Finish`,cancel:`Cancel`,removeLastVertex:`Remove Last Vertex`},buttonTitles:{drawMarkerButton:`Draw Marker`,drawPolyButton:`Draw Polygons`,drawLineButton:`Draw Polyline`,drawCircleButton:`Draw Circle`,drawRectButton:`Draw Rectangle`,editButton:`Edit Layers`,dragButton:`Drag Layers`,cutButton:`Cut Layers`,deleteButton:`Remove Layers`,drawCircleMarkerButton:`Draw Circle Marker`,snappingButton:`Snap dragged marker to other layers and vertices`,pinningButton:`Pin shared vertices together`,rotateButton:`Rotate Layers`,drawTextButton:`Draw Text`,scaleButton:`Scale Layers`,autoTracingButton:`Auto trace Line`,snapGuidesButton:`Show SnapGuides`,unionButton:`Union layers`,differenceButton:`Subtract layers`},measurements:{totalLength:`Length`,segmentLength:`Segment length`,area:`Area`,radius:`Radius`,perimeter:`Perimeter`,height:`Height`,width:`Width`,coordinates:`Position`,coordinatesMarker:`Position Marker`}},H={tooltips:{placeMarker:`Platziere den Marker mit Klick`,firstVertex:`Platziere den ersten Marker mit Klick`,continueLine:`Klicke, um weiter zu zeichnen`,finishLine:`Beende mit Klick auf existierenden Marker`,finishPoly:`Beende mit Klick auf ersten Marker`,finishRect:`Beende mit Klick`,startCircle:`Platziere das Kreiszentrum mit Klick`,finishCircle:`Beende den Kreis mit Klick`,placeCircleMarker:`Platziere den Kreismarker mit Klick`,placeText:`Platziere den Text mit Klick`},actions:{finish:`Beenden`,cancel:`Abbrechen`,removeLastVertex:`Letzten Vertex lschen`},buttonTitles:{drawMarkerButton:`Marker zeichnen`,drawPolyButton:`Polygon zeichnen`,drawLineButton:`Polyline zeichnen`,drawCircleButton:`Kreis zeichnen`,drawRectButton:`Rechteck zeichnen`,editButton:`Layer editieren`,dragButton:`Layer bewegen`,cutButton:`Layer schneiden`,deleteButton:`Layer lschen`,drawCircleMarkerButton:`Kreismarker zeichnen`,snappingButton:`Bewegter Layer an andere Layer oder Vertexe einhacken`,pinningButton:`Vertexe an der gleichen Position verknpfen`,rotateButton:`Layer drehen`,drawTextButton:`Text zeichnen`,scaleButton:`Layer skalieren`,autoTracingButton:`Linie automatisch nachzeichen`},measurements:{totalLength:`Lnge`,segmentLength:`Segment Lnge`,area:`Flche`,radius:`Radius`,perimeter:`Umfang`,height:`Hhe`,width:`Breite`,coordinates:`Position`,coordinatesMarker:`Position Marker`}},Et={tooltips:{placeMarker:`Clicca per posizionare un Marker`,firstVertex:`Clicca per posizionare il primo vertice`,continueLine:`Clicca per continuare a disegnare`,finishLine:`Clicca qualsiasi marker esistente per terminare`,finishPoly:`Clicca il primo marker per terminare`,finishRect:`Clicca per terminare`,startCircle:`Clicca per posizionare il punto centrale del cerchio`,finishCircle:`Clicca per terminare il cerchio`,placeCircleMarker:`Clicca per posizionare un Marker del cherchio`},actions:{finish:`Termina`,cancel:`Annulla`,removeLastVertex:`Rimuovi l'ultimo vertice`},buttonTitles:{drawMarkerButton:`Disegna Marker`,drawPolyButton:`Disegna Poligoni`,drawLineButton:`Disegna Polilinea`,drawCircleButton:`Disegna Cerchio`,drawRectButton:`Disegna Rettangolo`,editButton:`Modifica Livelli`,dragButton:`Sposta Livelli`,cutButton:`Ritaglia Livelli`,deleteButton:`Elimina Livelli`,drawCircleMarkerButton:`Disegna Marker del Cerchio`,snappingButton:`Snap ha trascinato il pennarello su altri strati e vertici`,pinningButton:`Pin condiviso vertici insieme`,rotateButton:`Ruota livello`}},Dt={tooltips:{placeMarker:`Klik untuk menempatkan marker`,firstVertex:`Klik untuk menempatkan vertex pertama`,continueLine:`Klik untuk meneruskan digitasi`,finishLine:`Klik pada sembarang marker yang ada untuk mengakhiri`,finishPoly:`Klik marker pertama untuk mengakhiri`,finishRect:`Klik untuk mengakhiri`,startCircle:`Klik untuk menempatkan titik pusat lingkaran`,finishCircle:`Klik untuk mengakhiri lingkaran`,placeCircleMarker:`Klik untuk menempatkan penanda lingkarann`},actions:{finish:`Selesai`,cancel:`Batal`,removeLastVertex:`Hilangkan Vertex Terakhir`},buttonTitles:{drawMarkerButton:`Digitasi Marker`,drawPolyButton:`Digitasi Polygon`,drawLineButton:`Digitasi Polyline`,drawCircleButton:`Digitasi Lingkaran`,drawRectButton:`Digitasi Segi Empat`,editButton:`Edit Layer`,dragButton:`Geser Layer`,cutButton:`Potong Layer`,deleteButton:`Hilangkan Layer`,drawCircleMarkerButton:`Digitasi Penanda Lingkaran`,snappingButton:`Jepretkan penanda yang ditarik ke lapisan dan simpul lain`,pinningButton:`Sematkan simpul bersama bersama`,rotateButton:`Putar lapisan`}},Ot={tooltips:{placeMarker:`Adaug un punct`,firstVertex:`Apas aici pentru a aduga primul Vertex`,continueLine:`Apas aici pentru a continua desenul`,finishLine:`Apas pe orice obiect pentru a finisa desenul`,finishPoly:`Apas pe primul obiect pentru a finisa`,finishRect:`Apas pentru a finisa`,startCircle:`Apas pentru a desena un cerc`,finishCircle:`Apas pentru a finisa un cerc`,placeCircleMarker:`Adaug un punct`},actions:{finish:`Termin`,cancel:`Anuleaz`,removeLastVertex:`terge ultimul Vertex`},buttonTitles:{drawMarkerButton:`Adaug o bulin`,drawPolyButton:`Deseneaz un poligon`,drawLineButton:`Deseneaz o linie`,drawCircleButton:`Deseneaz un cerc`,drawRectButton:`Deseneaz un dreptunghi`,editButton:`Editeaz straturile`,dragButton:`Mut straturile`,cutButton:`Taie straturile`,deleteButton:`terge straturile`,drawCircleMarkerButton:`Deseneaz marcatorul cercului`,snappingButton:`Fixai marcatorul glisat pe alte straturi i vrfuri`,pinningButton:`Fixai vrfurile partajate mpreun`,rotateButton:`Rotii stratul`}},kt={tooltips:{placeMarker:`,   `,firstVertex:`,    `,continueLine:`,   `,finishLine:`     `,finishPoly:`  ,  `,finishRect:`,  `,startCircle:`,    `,finishCircle:`,   `,placeCircleMarker:`,    `},actions:{finish:``,cancel:``,removeLastVertex:`  `},buttonTitles:{drawMarkerButton:` `,drawPolyButton:` `,drawLineButton:` `,drawCircleButton:` `,drawRectButton:` `,editButton:` `,dragButton:` `,cutButton:` `,deleteButton:` `,drawCircleMarkerButton:`  `,snappingButton:`       `,pinningButton:`   `,rotateButton:` `}},At={tooltips:{placeMarker:`Presiona para colocar un marcador`,firstVertex:`Presiona para colocar el primer vrtice`,continueLine:`Presiona para continuar dibujando`,finishLine:`Presiona cualquier marcador existente para finalizar`,finishPoly:`Presiona el primer marcador para finalizar`,finishRect:`Presiona para finalizar`,startCircle:`Presiona para colocar el centro del crculo`,finishCircle:`Presiona para finalizar el crculo`,placeCircleMarker:`Presiona para colocar un marcador de crculo`},actions:{finish:`Finalizar`,cancel:`Cancelar`,removeLastVertex:`Eliminar ltimo vrtice`},buttonTitles:{drawMarkerButton:`Dibujar Marcador`,drawPolyButton:`Dibujar Polgono`,drawLineButton:`Dibujar Lnea`,drawCircleButton:`Dibujar Crculo`,drawRectButton:`Dibujar Rectngulo`,editButton:`Editar Capas`,dragButton:`Arrastrar Capas`,cutButton:`Cortar Capas`,deleteButton:`Eliminar Capas`,drawCircleMarkerButton:`Dibujar Marcador de Crculo`,snappingButton:`El marcador de Snap arrastrado a otras capas y vrtices`,pinningButton:`Fijar juntos los vrtices compartidos`,rotateButton:`Rotar capa`}},jt={tooltips:{placeMarker:`Klik om een marker te plaatsen`,firstVertex:`Klik om het eerste punt te plaatsen`,continueLine:`Klik om te blijven tekenen`,finishLine:`Klik op een bestaand punt om te beindigen`,finishPoly:`Klik op het eerst punt om te beindigen`,finishRect:`Klik om te beindigen`,startCircle:`Klik om het middelpunt te plaatsen`,finishCircle:`Klik om de cirkel te beindigen`,placeCircleMarker:`Klik om een marker te plaatsen`},actions:{finish:`Bewaar`,cancel:`Annuleer`,removeLastVertex:`Verwijder laatste punt`},buttonTitles:{drawMarkerButton:`Plaats Marker`,drawPolyButton:`Teken een vlak`,drawLineButton:`Teken een lijn`,drawCircleButton:`Teken een cirkel`,drawRectButton:`Teken een vierkant`,editButton:`Bewerk`,dragButton:`Verplaats`,cutButton:`Knip`,deleteButton:`Verwijder`,drawCircleMarkerButton:`Plaats Marker`,snappingButton:`Snap gesleepte marker naar andere lagen en hoekpunten`,pinningButton:`Speld gedeelde hoekpunten samen`,rotateButton:`Laag roteren`}},Mt={tooltips:{placeMarker:`Cliquez pour placer un marqueur`,firstVertex:`Cliquez pour placer le premier sommet`,continueLine:`Cliquez pour continuer  dessiner`,finishLine:`Cliquez sur n'importe quel marqueur pour terminer`,finishPoly:`Cliquez sur le premier marqueur pour terminer`,finishRect:`Cliquez pour terminer`,startCircle:`Cliquez pour placer le centre du cercle`,finishCircle:`Cliquez pour finir le cercle`,placeCircleMarker:`Cliquez pour placer le marqueur circulaire`},actions:{finish:`Terminer`,cancel:`Annuler`,removeLastVertex:`Retirer le dernier sommet`},buttonTitles:{drawMarkerButton:`Placer des marqueurs`,drawPolyButton:`Dessiner des polygones`,drawLineButton:`Dessiner des polylignes`,drawCircleButton:`Dessiner un cercle`,drawRectButton:`Dessiner un rectangle`,editButton:`diter des calques`,dragButton:`Dplacer des calques`,cutButton:`Couper des calques`,deleteButton:`Supprimer des calques`,drawCircleMarkerButton:`Dessiner un marqueur circulaire`,snappingButton:`Glisser le marqueur vers d'autres couches et sommets`,pinningButton:`pingler ensemble les sommets partags`,rotateButton:`Tourner des calques`}},Nt={tooltips:{placeMarker:``,firstVertex:``,continueLine:``,finishLine:``,finishPoly:``,finishRect:``,startCircle:``,finishCircle:``,placeCircleMarker:``},actions:{finish:``,cancel:``,removeLastVertex:``},buttonTitles:{drawMarkerButton:``,drawPolyButton:``,drawLineButton:``,drawCircleButton:``,drawRectButton:``,editButton:``,dragButton:``,cutButton:``,deleteButton:``,drawCircleMarkerButton:``,snappingButton:``,pinningButton:``,rotateButton:``}},Pt={tooltips:{placeMarker:``,firstVertex:``,continueLine:``,finishLine:``,finishPoly:``,finishRect:``,startCircle:``,finishCircle:``,placeCircleMarker:``},actions:{finish:``,cancel:``,removeLastVertex:``},buttonTitles:{drawMarkerButton:``,drawPolyButton:``,drawLineButton:``,drawCircleButton:``,drawRectButton:``,editButton:``,dragButton:``,cutButton:``,deleteButton:``,drawCircleMarkerButton:``,snappingButton:``,pinningButton:``,rotateButton:``}},Ft={tooltips:{placeMarker:`Clique para posicionar o marcador`,firstVertex:`Clique para posicionar o primeiro vrtice`,continueLine:`Clique para continuar desenhando`,finishLine:`Clique em qualquer marcador existente para finalizar`,finishPoly:`Clique no primeiro marcador para finalizar`,finishRect:`Clique para finalizar`,startCircle:`Clique para posicionar o centro do crculo`,finishCircle:`Clique para finalizar o crculo`,placeCircleMarker:`Clique para posicionar o marcador circular`,placeText:`Clique para inserir texto`},actions:{finish:`Finalizar`,cancel:`Cancelar`,removeLastVertex:`Remover ltimo vrtice`},buttonTitles:{drawMarkerButton:`Desenhar Marcador`,drawPolyButton:`Desenhar Polgonos`,drawLineButton:`Desenhar Linha Poligonal`,drawCircleButton:`Desenhar Crculo`,drawRectButton:`Desenhar Retngulo`,editButton:`Editar Camadas`,dragButton:`Arrastar Camadas`,cutButton:`Recortar Camadas`,deleteButton:`Remover Camadas`,drawCircleMarkerButton:`Desenhar Marcador de Crculo`,snappingButton:`Ajustar marcador arrastado a outras camadas e vrtices`,pinningButton:`Unir vrtices compartilhados`,rotateButton:`Rotacionar Camadas`,drawTextButton:`Desenhar Texto`,scaleButton:`Redimensionar Camadas`,autoTracingButton:`Traado Automtico de Linha`},measurements:{totalLength:`Comprimento`,segmentLength:`Comprimento do Segmento`,area:`rea`,radius:`Raio`,perimeter:`Permetro`,height:`Altura`,width:`Largura`,coordinates:`Posio`,coordinatesMarker:`Marcador de Posio`}},It={tooltips:{placeMarker:`Clique para colocar marcador`,firstVertex:`Clique para colocar primeiro vrtice`,continueLine:`Clique para continuar a desenhar`,finishLine:`Clique num marcador existente para terminar`,finishPoly:`Clique no primeiro marcador para terminar`,finishRect:`Clique para terminar`,startCircle:`Clique para colocar o centro do crculo`,finishCircle:`Clique para terminar o crculo`,placeCircleMarker:`Clique para colocar marcador de crculo`,placeText:`Clique para colocar texto`},actions:{finish:`Terminar`,cancel:`Cancelar`,removeLastVertex:`Remover ltimo Vrtice`},buttonTitles:{drawMarkerButton:`Desenhar Marcador`,drawPolyButton:`Desenhar Polgonos`,drawLineButton:`Desenhar Polilinha`,drawCircleButton:`Desenhar Crculo`,drawRectButton:`Desenhar Retngulo`,editButton:`Editar Camadas`,dragButton:`Arrastar Camadas`,cutButton:`Cortar Camadas`,deleteButton:`Remover Camadas`,drawCircleMarkerButton:`Desenhar Marcador de Crculo`,snappingButton:`Ajustar marcador arrastado a outras camadas e vrtices`,pinningButton:`Unir vrtices partilhados`,rotateButton:`Rodar Camadas`,drawTextButton:`Desenhar Texto`,scaleButton:`Escalar Camadas`,autoTracingButton:`Traado Automtico de Linha`},measurements:{totalLength:`Comprimento`,segmentLength:`Comprimento do Segmento`,area:`rea`,radius:`Raio`,perimeter:`Permetro`,height:`Altura`,width:`Largura`,coordinates:`Posio`,coordinatesMarker:`Marcador de Posio`}},Lt={en:Tt,de:H,it:Et,id:Dt,ro:Ot,ru:kt,es:At,nl:jt,fr:Mt,pt:It,pt_br:Ft,pt_pt:It,zh:Nt,zh_tw:Pt,pl:{tooltips:{placeMarker:`Kliknij, aby umieci znacznik`,firstVertex:`Kliknij, aby umieci pierwszy wierzchoek`,continueLine:`Kliknij, aby kontynuowa rysowanie`,finishLine:`Kliknij dowolny istniejcy znacznik, aby zakoczy`,finishPoly:`Kliknij pierwszy znacznik, aby zakoczy`,finishRect:`Kliknij, aby zakoczy`,startCircle:`Kliknij, aby umieci rodek okrgu`,finishCircle:`Kliknij, aby zakoczy okrg`,placeCircleMarker:`Kliknij, aby umieci znacznik okrgu`,placeText:`Kliknij, aby umieci tekst`},actions:{finish:`Zakocz`,cancel:`Anuluj`,removeLastVertex:`Usu ostatni wierzchoek`},buttonTitles:{drawMarkerButton:`Rysuj znacznik`,drawPolyButton:`Rysuj wielokt`,drawLineButton:`Rysuj lini`,drawCircleButton:`Rysuj okrg`,drawRectButton:`Rysuj prostokt`,editButton:`Edytuj warstwy`,dragButton:`Przecignij warstwy`,cutButton:`Wytnij warstwy`,deleteButton:`Usu warstwy`,drawCircleMarkerButton:`Rysuj znacznik okrgy`,snappingButton:`Przycignij przenoszony znacznik do innych warstw i wierzchokw`,pinningButton:`Przypnij wsplne wierzchoki razem`,rotateButton:`Obr warstwy`,drawTextButton:`Rysuj tekst`,scaleButton:`Skaluj warstwy`,autoTracingButton:`Automatyczne ledzenie linii`},measurements:{totalLength:`Dugo`,segmentLength:`Dugo odcinka`,area:`Obszar`,radius:`Promie`,perimeter:`Obwd`,height:`Wysoko`,width:`Szeroko`,coordinates:`Pozycja`,coordinatesMarker:`Znacznik pozycji`}},sv:{tooltips:{placeMarker:`Klicka fr att placera markr`,firstVertex:`Klicka fr att placera frsta hrnet`,continueLine:`Klicka fr att fortstta rita`,finishLine:`Klicka p en existerande punkt fr att slutfra`,finishPoly:`Klicka p den frsta punkten fr att slutfra`,finishRect:`Klicka fr att slutfra`,startCircle:`Klicka fr att placera cirkelns centrum`,finishCircle:`Klicka fr att slutfra cirkeln`,placeCircleMarker:`Klicka fr att placera cirkelmarkr`},actions:{finish:`Slutfr`,cancel:`Avbryt`,removeLastVertex:`Ta bort sista hrnet`},buttonTitles:{drawMarkerButton:`Rita Markr`,drawPolyButton:`Rita Polygoner`,drawLineButton:`Rita Linje`,drawCircleButton:`Rita Cirkel`,drawRectButton:`Rita Rektangel`,editButton:`Redigera Lager`,dragButton:`Dra Lager`,cutButton:`Klipp i Lager`,deleteButton:`Ta bort Lager`,drawCircleMarkerButton:`Rita Cirkelmarkr`,snappingButton:`Snpp dra markren till andra lager och hrn`,pinningButton:`Fst delade hrn tillsammans`,rotateButton:`Rotera lagret`}},el:{tooltips:{placeMarker:`     `,firstVertex:`       `,continueLine:`      `,finishLine:`        `,finishPoly:`       `,finishRect:`    `,startCircle:`      `,finishCircle:`      `,placeCircleMarker:`      `},actions:{finish:``,cancel:``,removeLastVertex:`  `},buttonTitles:{drawMarkerButton:` `,drawPolyButton:` `,drawLineButton:` `,drawCircleButton:` `,drawRectButton:` `,editButton:` `,dragButton:` `,cutButton:` `,deleteButton:` `,drawCircleMarkerButton:`  `,snappingButton:`        `,pinningButton:`   `,rotateButton:`  `}},hu:{tooltips:{placeMarker:`Kattintson a jell elhelyezshez`,firstVertex:`Kattintson az els pont elhelyezshez`,continueLine:`Kattintson a kvetkez pont elhelyezshez`,finishLine:`A befejezshez kattintson egy meglv pontra`,finishPoly:`A befejezshez kattintson az els pontra`,finishRect:`Kattintson a befejezshez`,startCircle:`Kattintson a kr kzppontjnak elhelyezshez`,finishCircle:`Kattintson a kr befejezshez`,placeCircleMarker:`Kattintson a krjell elhelyezshez`},actions:{finish:`Befejezs`,cancel:`Mgse`,removeLastVertex:`Utols pont eltvoltsa`},buttonTitles:{drawMarkerButton:`Jell rajzolsa`,drawPolyButton:`Poligon rajzolsa`,drawLineButton:`Vonal rajzolsa`,drawCircleButton:`Kr rajzolsa`,drawRectButton:`Ngyzet rajzolsa`,editButton:`Elemek szerkesztse`,dragButton:`Elemek mozgatsa`,cutButton:`Elemek vgsa`,deleteButton:`Elemek trlse`,drawCircleMarkerButton:`Kr jell rajzolsa`,snappingButton:`Kapcsolja a jelltt msik elemhez vagy ponthoz`,pinningButton:`Kzs pontok sszektse`,rotateButton:`Flia elforgatsa`}},da:{tooltips:{placeMarker:`Tryk for at placere en markr`,firstVertex:`Tryk for at placere det frste punkt`,continueLine:`Tryk for at fortstte linjen`,finishLine:`Tryk p et eksisterende punkt for at afslutte`,finishPoly:`Tryk p det frste punkt for at afslutte`,finishRect:`Tryk for at afslutte`,startCircle:`Tryk for at placere cirklens center`,finishCircle:`Tryk for at afslutte cirklen`,placeCircleMarker:`Tryk for at placere en cirkelmarkr`},actions:{finish:`Afslut`,cancel:`Afbryd`,removeLastVertex:`Fjern sidste punkt`},buttonTitles:{drawMarkerButton:`Placer markr`,drawPolyButton:`Tegn polygon`,drawLineButton:`Tegn linje`,drawCircleButton:`Tegn cirkel`,drawRectButton:`Tegn firkant`,editButton:`Rediger`,dragButton:`Trk`,cutButton:`Klip`,deleteButton:`Fjern`,drawCircleMarkerButton:`Tegn cirkelmarkr`,snappingButton:`Fastgr trukket markr til andre elementer`,pinningButton:`Sammenlg delte elementer`,rotateButton:`Roter laget`}},no:{tooltips:{placeMarker:`Klikk for  plassere punkt`,firstVertex:`Klikk for  plassere frste punkt`,continueLine:`Klikk for  tegne videre`,finishLine:`Klikk p et eksisterende punkt for  fullfre`,finishPoly:`Klikk frste punkt for  fullfre`,finishRect:`Klikk for  fullfre`,startCircle:`Klikk for  sette sirkel midtpunkt`,finishCircle:`Klikk for  fullfre sirkel`,placeCircleMarker:`Klikk for  plassere sirkel`,placeText:`Klikk for  plassere tekst`},actions:{finish:`Fullfr`,cancel:`Kanseller`,removeLastVertex:`Fjern forrige punkt`},buttonTitles:{drawMarkerButton:`Tegn punkt`,drawPolyButton:`Tegn flate`,drawLineButton:`Tegn linje`,drawCircleButton:`Tegn sirkel`,drawRectButton:`Tegn rektangel`,editButton:`Rediger objekter`,dragButton:`Dra objekter`,cutButton:`Kutt objekter`,deleteButton:`Fjern objekter`,drawCircleMarkerButton:`Tegn sirkel-punkt`,snappingButton:`Fest dratt punkt til andre objekter og punkt`,pinningButton:`Pin delte punkter sammen`,rotateButton:`Rotr objekter`,drawTextButton:`Tegn tekst`,scaleButton:`Skalr objekter`,autoTracingButton:`Automatisk sporing av linje`},measurements:{totalLength:`Lengde`,segmentLength:`Segmentlengde`,area:`Omrde`,radius:`Radius`,perimeter:`Omriss`,height:`Hyde`,width:`Bredde`,coordinates:`Posisjon`,coordinatesMarker:`Posisjonsmarkr`}},fa:{tooltips:{placeMarker:`   `,firstVertex:`    `,continueLine:`   `,finishLine:`      `,finishPoly:`     `,finishRect:`  `,startCircle:`    `,finishCircle:`    `,placeCircleMarker:`    `,placeText:`   `},actions:{finish:``,cancel:``,removeLastVertex:`  `},buttonTitles:{drawMarkerButton:` `,drawPolyButton:` `,drawLineButton:` `,drawCircleButton:` `,drawRectButton:` `,editButton:` `,dragButton:` `,cutButton:` `,deleteButton:` `,drawCircleMarkerButton:`  `,snappingButton:`       `,pinningButton:`      `,rotateButton:` `,drawTextButton:` `,scaleButton:``,autoTracingButton:` `},measurements:{totalLength:``,segmentLength:` `,area:``,radius:``,perimeter:``,height:``,width:``,coordinates:``,coordinatesMarker:` `}},ua:{tooltips:{placeMarker:`,   `,firstVertex:`,    `,continueLine:`,   `,finishLine:` -    `,finishPoly:`  ,  `,finishRect:`,  `,startCircle:`,    `,finishCircle:`,   `,placeCircleMarker:`,    `},actions:{finish:``,cancel:``,removeLastVertex:`  `},buttonTitles:{drawMarkerButton:` `,drawPolyButton:` `,drawLineButton:` `,drawCircleButton:` `,drawRectButton:` `,editButton:` `,dragButton:` `,cutButton:` `,deleteButton:` `,drawCircleMarkerButton:`  `,snappingButton:`       `,pinningButton:`'   `,rotateButton:` `}},tr:{tooltips:{placeMarker:`areti yerletirmek iin tklayn`,firstVertex:`lk tepe noktasn yerletirmek iin tklayn`,continueLine:`izime devam etmek iin tklayn`,finishLine:`Bitirmek iin mevcut herhangi bir iaretiyi tklayn`,finishPoly:`Bitirmek iin ilk iaretiyi tklayn`,finishRect:`Bitirmek iin tklayn`,startCircle:`Daire merkezine yerletirmek iin tklayn`,finishCircle:`Daireyi bitirmek iin tklayn`,placeCircleMarker:`Daire iaretisi yerletirmek iin tklayn`},actions:{finish:`Bitir`,cancel:`ptal`,removeLastVertex:`Son keyi kaldr`},buttonTitles:{drawMarkerButton:`izim aretisi`,drawPolyButton:`okgenler iz`,drawLineButton:`oklu izgi iz`,drawCircleButton:`ember iz`,drawRectButton:`Dikdrtgen iz`,editButton:`Katmanlar dzenle`,dragButton:`Katmanlar srkle`,cutButton:`Katmanlar kes`,deleteButton:`Katmanlar kaldr`,drawCircleMarkerButton:`Daire iaretisi iz`,snappingButton:`Srklenen iaretiyi dier katmanlara ve kelere yaptr`,pinningButton:`Paylalan keleri birbirine sabitle`,rotateButton:`Katman dndr`}},cz:{tooltips:{placeMarker:`Kliknutm vytvote znaku`,firstVertex:`Kliknutm vytvote prvn objekt`,continueLine:`Kliknutm pokraujte v kreslen`,finishLine:`Kliknut na libovolnou existujc znaku pro dokonen`,finishPoly:`Vyberte prvn bod pro dokonen`,finishRect:`Kliknte pro dokonen`,startCircle:`Kliknutm pidejte sted kruhu`,finishCircle:`,   `,placeCircleMarker:`Kliknutm nastavte polomr`},actions:{finish:`Dokonit`,cancel:`Zruit`,removeLastVertex:`Zruit posledn akci`},buttonTitles:{drawMarkerButton:`Pidat znaku`,drawPolyButton:`Nakreslit polygon`,drawLineButton:`Nakreslit kivku`,drawCircleButton:`Nakreslit kruh`,drawRectButton:`Nakreslit obdlnk`,editButton:`Upravit vrstvu`,dragButton:`Peneste vrstvu`,cutButton:`Vyjmout vrstvu`,deleteButton:`Smazat vrstvu`,drawCircleMarkerButton:`Pidat kruhovou znaku`,snappingButton:`Navzat tanou znaku k dalm vrstvm a vrcholm`,pinningButton:`Spojit spolen body dohromady`,rotateButton:`Otote vrstvu`}},ja:{tooltips:{placeMarker:``,firstVertex:``,continueLine:``,finishLine:``,finishPoly:``,finishRect:``,startCircle:``,finishCircle:``,placeCircleMarker:``,placeText:``},actions:{finish:``,cancel:``,removeLastVertex:``},buttonTitles:{drawMarkerButton:``,drawPolyButton:``,drawLineButton:``,drawCircleButton:``,drawRectButton:``,editButton:``,dragButton:``,cutButton:``,deleteButton:``,drawCircleMarkerButton:``,snappingButton:``,pinningButton:``,rotateButton:``,drawTextButton:``}},fi:{tooltips:{placeMarker:`Klikkaa asettaaksesi merkin`,firstVertex:`Klikkaa asettaakseni ensimmisen osuuden`,continueLine:`Klikkaa jatkaaksesi piirtmist`,finishLine:`Klikkaa olemassa olevaa merkki lopettaaksesi`,finishPoly:`Klikkaa ensimmist merkki lopettaaksesi`,finishRect:`Klikkaa lopettaaksesi`,startCircle:`Klikkaa asettaaksesi ympyrn keskipisteen`,finishCircle:`Klikkaa lopettaaksesi ympyrn`,placeCircleMarker:`Klikkaa asettaaksesi ympyrmerkin`,placeText:`Klikkaa asettaaksesi tekstin`},actions:{finish:`Valmis`,cancel:`Peruuta`,removeLastVertex:`Poista viimeinen osuus`},buttonTitles:{drawMarkerButton:`Piirr merkkej`,drawPolyButton:`Piirr monikulmioita`,drawLineButton:`Piirr viivoja`,drawCircleButton:`Piirr ympyr`,drawRectButton:`Piirr neliskulmioita`,editButton:`Muokkaa`,dragButton:`Siirr`,cutButton:`Leikkaa`,deleteButton:`Poista`,drawCircleMarkerButton:`Piirr ympyrmerkki`,snappingButton:`Kiinnit siirrettv merkki toisiin muotoihin`,pinningButton:`Kiinnit jaetut muodot yhteen`,rotateButton:`Knn`,drawTextButton:`Piirr teksti`}},ko:{tooltips:{placeMarker:`  `,firstVertex:`   `,continueLine:`  `,finishLine:`   `,finishPoly:`   `,finishRect:` `,startCircle:`    `,finishCircle:`  `,placeCircleMarker:`   `,placeText:`  `},actions:{finish:``,cancel:``,removeLastVertex:`  `},buttonTitles:{drawMarkerButton:` `,drawPolyButton:` `,drawLineButton:` `,drawCircleButton:` `,drawRectButton:` `,editButton:` `,dragButton:` `,cutButton:` `,deleteButton:` `,drawCircleMarkerButton:`  `,snappingButton:`       `,pinningButton:`   `,rotateButton:` `,drawTextButton:` `}},ky:{tooltips:{placeMarker:`   `,firstVertex:`    `,continueLine:`    `,finishLine:`    `,finishPoly:`    `,finishRect:`  `,startCircle:`    `,finishCircle:`   `,placeCircleMarker:`    `,placeText:`   `},actions:{finish:``,cancel:` `,removeLastVertex:`  `},buttonTitles:{drawMarkerButton:` `,drawPolyButton:` `,drawLineButton:` `,drawCircleButton:` `,drawRectButton:` `,editButton:` `,dragButton:`  `,cutButton:`  `,deleteButton:` `,drawCircleMarkerButton:`  `,snappingButton:`     `,pinningButton:`   `,rotateButton:` `,drawTextButton:` `,scaleButton:`  `,autoTracingButton:`  `},measurements:{totalLength:``,segmentLength:` `,area:``,radius:``,perimeter:``,height:``,width:``,coordinates:``,coordinatesMarker:` `}}},Rt={_globalEditModeEnabled:!1,enableGlobalEditMode(e){let t={...e};this._globalEditModeEnabled=!0,this.Toolbar.toggleButton(`editMode`,this.globalEditModeEnabled()),L.PM.Utils.findLayers(this.map).forEach(e=>{this._isRelevantForEdit(e)&&e.pm.enable(t)}),this.throttledReInitEdit||=L.Util.throttle(this.handleLayerAdditionInGlobalEditMode,100,this),this._addedLayersEdit={},this.map.on(`layeradd`,this._layerAddedEdit,this),this.map.on(`layeradd`,this.throttledReInitEdit,this),this._fireGlobalEditModeToggled(!0)},disableGlobalEditMode(){this._globalEditModeEnabled=!1,L.PM.Utils.findLayers(this.map).forEach(e=>{e.pm.disable()}),this.map.off(`layeradd`,this._layerAddedEdit,this),this.map.off(`layeradd`,this.throttledReInitEdit,this),this.Toolbar.toggleButton(`editMode`,this.globalEditModeEnabled()),this._fireGlobalEditModeToggled(!1)},globalEditEnabled(){return this.globalEditModeEnabled()},globalEditModeEnabled(){return this._globalEditModeEnabled},toggleGlobalEditMode(e=this.globalOptions){this.globalEditModeEnabled()?this.disableGlobalEditMode():this.enableGlobalEditMode(e)},handleLayerAdditionInGlobalEditMode(){let e=this._addedLayersEdit;if(this._addedLayersEdit={},this.globalEditModeEnabled())for(let t in e){let n=e[t];this._isRelevantForEdit(n)&&n.pm.enable({...this.globalOptions})}},_layerAddedEdit({layer:e}){this._addedLayersEdit[L.stamp(e)]=e},_isRelevantForEdit(e){return e.pm&&!(e instanceof L.LayerGroup)&&(!L.PM.optIn&&!e.options.pmIgnore||L.PM.optIn&&e.options.pmIgnore===!1)&&!e._pmTempLayer&&e.pm.options.allowEditing}},U={_globalDragModeEnabled:!1,enableGlobalDragMode(){let e=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!0,this._addedLayersDrag={},e.forEach(e=>{this._isRelevantForDrag(e)&&e.pm.enableLayerDrag()}),this.throttledReInitDrag||=L.Util.throttle(this.reinitGlobalDragMode,100,this),this.map.on(`layeradd`,this._layerAddedDrag,this),this.map.on(`layeradd`,this.throttledReInitDrag,this),this.Toolbar.toggleButton(`dragMode`,this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!0)},disableGlobalDragMode(){let e=L.PM.Utils.findLayers(this.map);this._globalDragModeEnabled=!1,e.forEach(e=>{e.pm.disableLayerDrag()}),this.map.off(`layeradd`,this._layerAddedDrag,this),this.map.off(`layeradd`,this.throttledReInitDrag,this),this.Toolbar.toggleButton(`dragMode`,this.globalDragModeEnabled()),this._fireGlobalDragModeToggled(!1)},globalDragModeEnabled(){return!!this._globalDragModeEnabled},toggleGlobalDragMode(){this.globalDragModeEnabled()?this.disableGlobalDragMode():this.enableGlobalDragMode()},reinitGlobalDragMode(){let e=this._addedLayersDrag;if(this._addedLayersDrag={},this.globalDragModeEnabled())for(let t in e){let n=e[t];this._isRelevantForDrag(n)&&n.pm.enableLayerDrag()}},_layerAddedDrag({layer:e}){this._addedLayersDrag[L.stamp(e)]=e},_isRelevantForDrag(e){return e.pm&&!(e instanceof L.LayerGroup)&&(!L.PM.optIn&&!e.options.pmIgnore||L.PM.optIn&&e.options.pmIgnore===!1)&&!e._pmTempLayer&&e.pm.options.draggable}},zt={_globalRemovalModeEnabled:!1,enableGlobalRemovalMode(){this._globalRemovalModeEnabled=!0,this.map.eachLayer(e=>{this._isRelevantForRemoval(e)&&(e.pm.enabled()&&e.pm.disable(),e.on(`click`,this.removeLayer,this))}),this.throttledReInitRemoval||=L.Util.throttle(this.handleLayerAdditionInGlobalRemovalMode,100,this),this._addedLayersRemoval={},this.map.on(`layeradd`,this._layerAddedRemoval,this),this.map.on(`layeradd`,this.throttledReInitRemoval,this),this.Toolbar.toggleButton(`removalMode`,this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!0)},disableGlobalRemovalMode(){this._globalRemovalModeEnabled=!1,this.map.eachLayer(e=>{e.off(`click`,this.removeLayer,this)}),this.map.off(`layeradd`,this._layerAddedRemoval,this),this.map.off(`layeradd`,this.throttledReInitRemoval,this),this.Toolbar.toggleButton(`removalMode`,this.globalRemovalModeEnabled()),this._fireGlobalRemovalModeToggled(!1)},globalRemovalEnabled(){return this.globalRemovalModeEnabled()},globalRemovalModeEnabled(){return!!this._globalRemovalModeEnabled},toggleGlobalRemovalMode(){this.globalRemovalModeEnabled()?this.disableGlobalRemovalMode():this.enableGlobalRemovalMode()},removeLayer(e){let t=e.target;this._isRelevantForRemoval(t)&&!t.pm.dragging()&&(t.removeFrom(this.map.pm._getContainingLayer()),t.remove(),t instanceof L.LayerGroup?(this._fireRemoveLayerGroup(t),this._fireRemoveLayerGroup(this.map,t)):(t.pm._fireRemove(t),t.pm._fireRemove(this.map,t)))},_isRelevantForRemoval(e){return e.pm&&!(e instanceof L.LayerGroup)&&(!L.PM.optIn&&!e.options.pmIgnore||L.PM.optIn&&e.options.pmIgnore===!1)&&!e._pmTempLayer&&e.pm.options.allowRemoval},handleLayerAdditionInGlobalRemovalMode(){let e=this._addedLayersRemoval;if(this._addedLayersRemoval={},this.globalRemovalModeEnabled())for(let t in e){let n=e[t];this._isRelevantForRemoval(n)&&(n.pm.enabled()&&n.pm.disable(),n.on(`click`,this.removeLayer,this))}},_layerAddedRemoval({layer:e}){this._addedLayersRemoval[L.stamp(e)]=e}},Bt={_globalRotateModeEnabled:!1,enableGlobalRotateMode(){this._globalRotateModeEnabled=!0,L.PM.Utils.findLayers(this.map).filter(e=>e instanceof L.Polyline).forEach(e=>{this._isRelevantForRotate(e)&&e.pm.enableRotate()}),this.throttledReInitRotate||=L.Util.throttle(this.handleLayerAdditionInGlobalRotateMode,100,this),this._addedLayersRotate={},this.map.on(`layeradd`,this._layerAddedRotate,this),this.map.on(`layeradd`,this.throttledReInitRotate,this),this.Toolbar.toggleButton(`rotateMode`,this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},disableGlobalRotateMode(){this._globalRotateModeEnabled=!1,L.PM.Utils.findLayers(this.map).filter(e=>e instanceof L.Polyline).forEach(e=>{e.pm.disableRotate()}),this.map.off(`layeradd`,this._layerAddedRotate,this),this.map.off(`layeradd`,this.throttledReInitRotate,this),this.Toolbar.toggleButton(`rotateMode`,this.globalRotateModeEnabled()),this._fireGlobalRotateModeToggled()},globalRotateModeEnabled(){return!!this._globalRotateModeEnabled},toggleGlobalRotateMode(){this.globalRotateModeEnabled()?this.disableGlobalRotateMode():this.enableGlobalRotateMode()},_isRelevantForRotate(e){return e.pm&&e instanceof L.Polyline&&!(e instanceof L.LayerGroup)&&(!L.PM.optIn&&!e.options.pmIgnore||L.PM.optIn&&e.options.pmIgnore===!1)&&!e._pmTempLayer&&e.pm.options.allowRotation},handleLayerAdditionInGlobalRotateMode(){let e=this._addedLayersRotate;if(this._addedLayersRotate={},this.globalRotateModeEnabled())for(let t in e){let n=e[t];this._isRelevantForRemoval(n)&&n.pm.enableRotate()}},_layerAddedRotate({layer:e}){this._addedLayersRotate[L.stamp(e)]=e}},Vt=c(ut()),Ht={_fireDrawStart(e=`Draw`,t={}){this.__fire(this._map,`pm:drawstart`,{shape:this._shape,workingLayer:this._layer},e,t)},_fireDrawEnd(e=`Draw`,t={}){this.__fire(this._map,`pm:drawend`,{shape:this._shape},e,t)},_fireCreate(e,t=`Draw`,n={}){this.__fire(this._map,`pm:create`,{shape:this._shape,marker:e,layer:e},t,n)},_fireCenterPlaced(e=`Draw`,t={}){let n=e===`Draw`?this._layer:void 0,r=e===`Draw`?void 0:this._layer;this.__fire(this._layer,`pm:centerplaced`,{shape:this._shape,workingLayer:n,layer:r,latlng:this._layer.getLatLng()},e,t)},_fireCut(e,t,n,r=`Draw`,i={}){this.__fire(e,`pm:cut`,{shape:this._shape,layer:t,originalLayer:n},r,i)},_fireEdit(e=this._layer,t=`Edit`,n={}){this.__fire(e,`pm:edit`,{layer:this._layer,shape:this.getShape()},t,n)},_fireEnable(e=`Edit`,t={}){this.__fire(this._layer,`pm:enable`,{layer:this._layer,shape:this.getShape()},e,t)},_fireDisable(e=`Edit`,t={}){this.__fire(this._layer,`pm:disable`,{layer:this._layer,shape:this.getShape()},e,t)},_fireUpdate(e=`Edit`,t={}){this.__fire(this._layer,`pm:update`,{layer:this._layer,shape:this.getShape()},e,t)},_fireMarkerDragStart(e,t=void 0,n=`Edit`,r={}){this.__fire(this._layer,`pm:markerdragstart`,{layer:this._layer,markerEvent:e,shape:this.getShape(),indexPath:t},n,r)},_fireMarkerDrag(e,t=void 0,n=`Edit`,r={}){this.__fire(this._layer,`pm:markerdrag`,{layer:this._layer,markerEvent:e,shape:this.getShape(),indexPath:t},n,r)},_fireMarkerDragEnd(e,t=void 0,n=void 0,r=`Edit`,i={}){this.__fire(this._layer,`pm:markerdragend`,{layer:this._layer,markerEvent:e,shape:this.getShape(),indexPath:t,intersectionReset:n},r,i)},_fireDragStart(e=`Edit`,t={}){this.__fire(this._layer,`pm:dragstart`,{layer:this._layer,shape:this.getShape()},e,t)},_fireDrag(e,t=`Edit`,n={}){this.__fire(this._layer,`pm:drag`,{...e,shape:this.getShape()},t,n)},_fireDragEnd(e=`Edit`,t={}){this.__fire(this._layer,`pm:dragend`,{layer:this._layer,shape:this.getShape()},e,t)},_fireDragEnable(e=`Edit`,t={}){this.__fire(this._layer,`pm:dragenable`,{layer:this._layer,shape:this.getShape()},e,t)},_fireDragDisable(e=`Edit`,t={}){this.__fire(this._layer,`pm:dragdisable`,{layer:this._layer,shape:this.getShape()},e,t)},_fireRemove(e,t=e,n=`Edit`,r={}){this.__fire(e,`pm:remove`,{layer:t,shape:this.getShape()},n,r)},_fireVertexAdded(e,t,n,r=`Edit`,i={}){this.__fire(this._layer,`pm:vertexadded`,{layer:this._layer,workingLayer:this._layer,marker:e,indexPath:t,latlng:n,shape:this.getShape()},r,i)},_fireVertexRemoved(e,t,n=`Edit`,r={}){this.__fire(this._layer,`pm:vertexremoved`,{layer:this._layer,marker:e,indexPath:t,shape:this.getShape()},n,r)},_fireVertexClick(e,t,n=`Edit`,r={}){this.__fire(this._layer,`pm:vertexclick`,{layer:this._layer,markerEvent:e,indexPath:t,shape:this.getShape()},n,r)},_fireIntersect(e,t=this._layer,n=`Edit`,r={}){this.__fire(t,`pm:intersect`,{layer:this._layer,intersection:e,shape:this.getShape()},n,r)},_fireLayerReset(e,t,n=`Edit`,r={}){this.__fire(this._layer,`pm:layerreset`,{layer:this._layer,markerEvent:e,indexPath:t,shape:this.getShape()},n,r)},_fireChange(e,t=`Edit`,n={}){this.__fire(this._layer,`pm:change`,{layer:this._layer,latlngs:e,shape:this.getShape()},t,n)},_fireTextChange(e,t=`Edit`,n={}){this.__fire(this._layer,`pm:textchange`,{layer:this._layer,text:e,shape:this.getShape()},t,n)},_fireTextFocus(e=`Edit`,t={}){this.__fire(this._layer,`pm:textfocus`,{layer:this._layer,shape:this.getShape()},e,t)},_fireTextBlur(e=`Edit`,t={}){this.__fire(this._layer,`pm:textblur`,{layer:this._layer,shape:this.getShape()},e,t)},_fireSnapDrag(e,t,n=`Snapping`,r={}){this.__fire(e,`pm:snapdrag`,t,n,r)},_fireSnap(e,t,n=`Snapping`,r={}){this.__fire(e,`pm:snap`,t,n,r)},_fireUnsnap(e,t,n=`Snapping`,r={}){this.__fire(e,`pm:unsnap`,t,n,r)},_fireRotationEnable(e,t,n=`Rotation`,r={}){this.__fire(e,`pm:rotateenable`,{layer:this._layer,helpLayer:this._rotatePoly,shape:this.getShape()},n,r)},_fireRotationDisable(e,t=`Rotation`,n={}){this.__fire(e,`pm:rotatedisable`,{layer:this._layer,shape:this.getShape()},t,n)},_fireRotationStart(e,t,n=`Rotation`,r={}){this.__fire(e,`pm:rotatestart`,{layer:this._rotationLayer,helpLayer:this._layer,startAngle:this._startAngle,originLatLngs:t},n,r)},_fireRotation(e,t,n,r=this._rotationLayer,i=`Rotation`,a={}){this.__fire(e,`pm:rotate`,{layer:r,helpLayer:this._layer,startAngle:this._startAngle,angle:r.pm.getAngle(),angleDiff:t,oldLatLngs:n,newLatLngs:r.getLatLngs()},i,a)},_fireRotationEnd(e,t,n,r=`Rotation`,i={}){this.__fire(e,`pm:rotateend`,{layer:this._rotationLayer,helpLayer:this._layer,startAngle:t,angle:this._rotationLayer.pm.getAngle(),originLatLngs:n,newLatLngs:this._rotationLayer.getLatLngs()},r,i)},_fireActionClick(e,t,n,r=`Toolbar`,i={}){this.__fire(this._map,`pm:actionclick`,{text:e.text,action:e,btnName:t,button:n},r,i)},_fireButtonClick(e,t,n=`Toolbar`,r={}){this.__fire(this._map,`pm:buttonclick`,{btnName:e,button:t},n,r)},_fireLangChange(e,t,n,r,i=`Global`,a={}){this.__fire(this.map,`pm:langchange`,{oldLang:e,activeLang:t,fallback:n,translations:r},i,a)},_fireGlobalDragModeToggled(e,t=`Global`,n={}){this.__fire(this.map,`pm:globaldragmodetoggled`,{enabled:e,map:this.map},t,n)},_fireGlobalEditModeToggled(e,t=`Global`,n={}){this.__fire(this.map,`pm:globaleditmodetoggled`,{enabled:e,map:this.map},t,n)},_fireGlobalRemovalModeToggled(e,t=`Global`,n={}){this.__fire(this.map,`pm:globalremovalmodetoggled`,{enabled:e,map:this.map},t,n)},_fireGlobalCutModeToggled(e=`Global`,t={}){this.__fire(this._map,`pm:globalcutmodetoggled`,{enabled:!!this._enabled,map:this._map},e,t)},_fireGlobalDrawModeToggled(e=`Global`,t={}){this.__fire(this._map,`pm:globaldrawmodetoggled`,{enabled:this._enabled,shape:this._shape,map:this._map},e,t)},_fireGlobalRotateModeToggled(e=`Global`,t={}){this.__fire(this.map,`pm:globalrotatemodetoggled`,{enabled:this.globalRotateModeEnabled(),map:this.map},e,t)},_fireRemoveLayerGroup(e,t=e,n=`Edit`,r={}){this.__fire(e,`pm:remove`,{layer:t,shape:void 0},n,r)},_fireKeyeventEvent(e,t,n,r=`Global`,i={}){this.__fire(this.map,`pm:keyevent`,{event:e,eventType:t,focusOn:n},r,i)},__fire(e,t,n,r,i={}){n=(0,Vt.default)(n,i,{source:r}),L.PM.Utils._fireEvent(e,t,n)}},Ut=()=>({_lastEvents:{keydown:void 0,keyup:void 0,current:void 0},_initKeyListener(e){this.map=e,L.DomEvent.on(document,`keydown keyup`,this._onKeyListener,this),L.DomEvent.on(window,`blur`,this._onBlur,this),e.once(`unload`,this._unbindKeyListenerEvents,this)},_handleEscapeKey(e){let t=this.map.pm;return!t.getGlobalOptions().exitModeOnEscape||!(t.globalDrawModeEnabled()||t.globalEditModeEnabled()||t.globalDragModeEnabled()||t.globalRemovalModeEnabled()||t.globalRotateModeEnabled()||t.globalCutModeEnabled())?!1:(e.preventDefault(),t.globalDrawModeEnabled()&&t.disableDraw(),t.globalEditModeEnabled()&&t.disableGlobalEditMode(),t.globalDragModeEnabled()&&t.disableGlobalDragMode(),t.globalRemovalModeEnabled()&&t.disableGlobalRemovalMode(),t.globalRotateModeEnabled()&&t.disableGlobalRotateMode(),t.globalCutModeEnabled()&&t.disableGlobalCutMode(),!0)},_handleEnterKey(e){let t=this.map.pm;if(!t.getGlobalOptions().finishOnEnter)return!1;let n=t.Draw.getActiveShape();if(!n)return!1;let r=t.Draw[n];return!r||!r._finishShape||!this._canFinishShape(r,n)?!1:(e.preventDefault(),r._finishShape(),!0)},_canFinishShape(e,t){if([`Marker`,`CircleMarker`,`Text`].includes(t))return!1;if(t===`Rectangle`)return e._startMarker!==void 0;if(t===`Circle`)return e._centerMarker&&e._layerGroup?.hasLayer(e._centerMarker);if(e._layer&&e._layer.getLatLngs){let n=e._layer.getLatLngs();if(t===`Line`)return(n.flat?n.flat():n).length>=2;if(t===`Polygon`||t===`Cut`)return n.length>=3}return!1},_unbindKeyListenerEvents(){L.DomEvent.off(document,`keydown keyup`,this._onKeyListener,this),L.DomEvent.off(window,`blur`,this._onBlur,this)},_onKeyListener(e){let t=`document`;this.map.getContainer().contains(e.target)&&(t=`map`);let n={event:e,eventType:e.type,focusOn:t};this._lastEvents[e.type]=n,this._lastEvents.current=n,this.map.pm._fireKeyeventEvent(e,e.type,t),e.type===`keydown`&&(e.key===`Escape`&&this._handleEscapeKey(e),e.key===`Enter`&&this._handleEnterKey(e))},_onBlur(e){e.altKey=!1;let t={event:e,eventType:e.type,focusOn:`document`};this._lastEvents[e.type]=t,this._lastEvents.current=t},getLastKeyEvent(e=`current`){return this._lastEvents[e]},isShiftKeyPressed(){return this._lastEvents.current?.event.shiftKey},isAltKeyPressed(){return this._lastEvents.current?.event.altKey},isCtrlKeyPressed(){return this._lastEvents.current?.event.ctrlKey},isMetaKeyPressed(){return this._lastEvents.current?.event.metaKey},getPressedKey(){return this._lastEvents.current?.event.key}}),Wt=c(xt());function W(e){let t=L.PM.activeLang;return(0,Wt.default)(Lt[t],e)||(0,Wt.default)(Lt.en,e)||e}function Gt(e){for(let t=0;t<e.length;t+=1){let n=e[t];if(Array.isArray(n)){if(Gt(n))return!0}else if(n!=null&&n!==``)return!0}return!1}function G(e){return e.reduce((e,t)=>{if(t.length!==0){let n=Array.isArray(t)?G(t):t;Array.isArray(n)?n.length!==0&&e.push(n):e.push(n)}return e},[])}function Kt(e,t,n){let{a:r,b:i,f:a}={a:L.CRS.Earth.R,b:6356752.3142,f:.0033528106647474805},o=e.lng,s=e.lat,c=n,l=Math.PI,u=t*l/180,d=Math.sin(u),f=Math.cos(u),p=(1-a)*Math.tan(s*l/180),m=1/Math.sqrt(1+p*p),h=p*m,g=Math.atan2(p,f),_=m*d,v=1-_*_,y=v*(r*r-i*i)/(i*i),b=1+y/16384*(4096+y*(-768+y*(320-175*y))),x=y/1024*(256+y*(-128+y*(74-47*y))),S=c/(i*b),C=2*Math.PI,w,T,E;for(;Math.abs(S-C)>1e-12;){w=Math.cos(2*g+S),T=Math.sin(S),E=Math.cos(S);let e=x*T*(w+x/4*(E*(-1+2*w*w)-x/6*w*(-3+4*T*T)*(-3+4*w*w)));C=S,S=c/(i*b)+e}let D=h*T-m*E*f,O=Math.atan2(h*E+m*T*f,(1-a)*Math.sqrt(_*_+D*D)),k=Math.atan2(T*d,m*E-h*T*f),A=a/16*v*(4+a*(4-3*v)),ee=o+(k-(1-A)*a*_*(S+A*T*(w+A*E*(-1+2*w*w))))*180/l,j=O*180/l;return L.latLng(ee,j)}function K(e,t,n,r,i=!0){let a,o,s,c=[];for(let l=0;l<n;l+=1){if(i)a=l*360/n+r,o=Kt(e,a,t),s=L.latLng(o.lng,o.lat);else{let r=e.lat+Math.cos(2*l*Math.PI/n)*t,i=e.lng+Math.sin(2*l*Math.PI/n)*t;s=L.latLng(r,i)}c.push(s)}return c}function qt(e,t,n){t=(t+360)%360;let r=Math.PI/180,i=180/Math.PI,{R:a}=L.CRS.Earth,o=e.lng*r,s=e.lat*r,c=t*r,l=Math.sin(s),u=Math.cos(s),d=Math.cos(n/a),f=Math.sin(n/a),p=Math.asin(l*d+u*f*Math.cos(c)),m=o+Math.atan2(Math.sin(c)*f*u,d-l*Math.sin(p));m*=i;let h=m-360,g=m<-180?m+360:m;return m=m>180?h:g,L.latLng([p*i,m])}function Jt(e,t,n){let r=e.latLngToContainerPoint(t),i=e.latLngToContainerPoint(n),a=Math.atan2(i.y-r.y,i.x-r.x)*180/Math.PI+90;return a+=a<0?360:0,a}function Yt(e,t,n,r){return qt(t,Jt(e,t,n),r)}function Xt(e,t,n=`asc`){if(!t||Object.keys(t).length===0)return(e,t)=>e-t;let r=Object.keys(t),i,a=r.length-1,o={};for(;a>=0;)i=r[a],o[i.toLowerCase()]=t[i],--a;function s(e){if(e instanceof L.Marker)return`Marker`;if(e instanceof L.Circle)return`Circle`;if(e instanceof L.CircleMarker)return`CircleMarker`;if(e instanceof L.Rectangle)return`Rectangle`;if(e instanceof L.Polygon)return`Polygon`;if(e instanceof L.Polyline)return`Line`}return(t,r)=>{let i,a;if(e===`instanceofShape`){if(i=s(t.layer).toLowerCase(),a=s(r.layer).toLowerCase(),!i||!a)return 0}else{if(!t.hasOwnProperty(e)||!r.hasOwnProperty(e))return 0;i=t[e].toLowerCase(),a=r[e].toLowerCase()}let c=i in o?o[i]:2**53-1,l=a in o?o[a]:2**53-1,u=0;return c<l?u=-1:c>l&&(u=1),n===`desc`?u*-1:u}}function Zt(e,t=e.getLatLngs()){return e instanceof L.Polygon?L.polygon(t).getLatLngs():L.polyline(t).getLatLngs()}function Qt(e,t){if(t.options.crs?.projection?.MAX_LATITUDE){let n=t.options.crs?.projection?.MAX_LATITUDE;e.lat=Math.max(Math.min(n,e.lat),-n)}return e}function $t(e){return e.options.renderer||e._map&&(e._map._getPaneRenderer(e.options.pane)||e._map.options.renderer||e._map._renderer)||e._renderer}function en(e,t){if(e=e.trim().toLowerCase(),t[e])return e;let n=e.replace(/[-_\s]/g,`_`).match(/^([a-z]{2,3})(?:_([a-z]{2,3}))?$/);if(n){let e=[];n[2]&&e.push(`${n[1]}_${n[2]}`),e.push(n[1]);for(let n of e)if(t[n])return n}return e}var tn=L.Class.extend({includes:[Rt,U,zt,Bt,Ht],initialize(e){this.map=e,this.Draw=new L.PM.Draw(e),this.Toolbar=new L.PM.Toolbar(e),this.Keyboard=Ut(),this.globalOptions={snappable:!0,layerGroup:void 0,snappingOrder:[`Marker`,`CircleMarker`,`Circle`,`Line`,`Polygon`,`Rectangle`],panes:{vertexPane:`markerPane`,layerPane:`overlayPane`,markerPane:`markerPane`},draggable:!0,exitModeOnEscape:!1,finishOnEnter:!1},this.Keyboard._initKeyListener(e)},setLang(e=`en`,t,n=`en`){e=en(e,Lt);let r=L.PM.activeLang;t&&(Lt[e]=(0,wt.default)(Lt[n],t)),L.PM.activeLang=e,this.map.pm.Toolbar.reinit(),this._fireLangChange(r,e,n,Lt[e])},addControls(e){this.Toolbar.addControls(e)},removeControls(){this.Toolbar.removeControls()},toggleControls(){this.Toolbar.toggleControls()},controlsVisible(){return this.Toolbar.isVisible},enableDraw(e=`Polygon`,t){e===`Poly`&&(e=`Polygon`),this.Draw.enable(e,t)},disableDraw(e=`Polygon`){e===`Poly`&&(e=`Polygon`),this.Draw.disable(e)},setPathOptions(e,t={}){let n=t.ignoreShapes||[],r=t.merge||!1;this.map.pm.Draw.shapes.forEach(t=>{n.indexOf(t)===-1&&this.map.pm.Draw[t].setPathOptions(e,r)})},getGlobalOptions(){return this.globalOptions},setGlobalOptions(e){let t=(0,wt.default)(this.globalOptions,e);t.editable&&(t.resizeableCircleMarker=t.editable,delete t.editable);let n=!1;this.map.pm.Draw.CircleMarker.enabled()&&!!this.map.pm.Draw.CircleMarker.options.resizeableCircleMarker!=!!t.resizeableCircleMarker&&(this.map.pm.Draw.CircleMarker.disable(),n=!0);let r=!1;this.map.pm.Draw.Circle.enabled()&&!!this.map.pm.Draw.Circle.options.resizeableCircle!=!!t.resizeableCircle&&(this.map.pm.Draw.Circle.disable(),r=!0),this.map.pm.Draw.shapes.forEach(e=>{this.map.pm.Draw[e].setOptions(t)}),n&&this.map.pm.Draw.CircleMarker.enable(),r&&this.map.pm.Draw.Circle.enable(),L.PM.Utils.findLayers(this.map).forEach(e=>{e.pm.setOptions(t)}),this.map.fire(`pm:globaloptionschanged`),this.globalOptions=t,this.applyGlobalOptions()},applyGlobalOptions(){L.PM.Utils.findLayers(this.map).forEach(e=>{e.pm.enabled()&&e.pm.applyOptions()})},globalDrawModeEnabled(){return!!this.Draw.getActiveShape()},globalCutModeEnabled(){return!!this.Draw.Cut.enabled()},enableGlobalCutMode(e){return this.Draw.Cut.enable(e)},toggleGlobalCutMode(e){return this.Draw.Cut.toggle(e)},disableGlobalCutMode(){return this.Draw.Cut.disable()},getGeomanLayers(e=!1){let t=L.PM.Utils.findLayers(this.map);if(!e)return t;let n=L.featureGroup();return n._pmTempLayer=!0,t.forEach(e=>{n.addLayer(e)}),n},getGeomanDrawLayers(e=!1){let t=L.PM.Utils.findLayers(this.map).filter(e=>e._drawnByGeoman===!0);if(!e)return t;let n=L.featureGroup();return n._pmTempLayer=!0,t.forEach(e=>{n.addLayer(e)}),n},_getContainingLayer(){return this.globalOptions.layerGroup&&this.globalOptions.layerGroup instanceof L.LayerGroup?this.globalOptions.layerGroup:this.map},_isCRSSimple(){return this.map.options.crs===L.CRS.Simple},_touchEventCounter:0,_addTouchEvents(e){this._touchEventCounter===0&&(L.DomEvent.on(e,`touchmove`,this._canvasTouchMove,this),L.DomEvent.on(e,`touchstart touchend touchcancel`,this._canvasTouchClick,this)),this._touchEventCounter+=1},_removeTouchEvents(e){this._touchEventCounter===1&&(L.DomEvent.off(e,`touchmove`,this._canvasTouchMove,this),L.DomEvent.off(e,`touchstart touchend touchcancel`,this._canvasTouchClick,this)),this._touchEventCounter=this._touchEventCounter<=1?0:this._touchEventCounter-1},_canvasTouchMove(e){$t(this.map)._onMouseMove(this._createMouseEvent(`mousemove`,e))},_canvasTouchClick(e){let t=``;e.type===`touchstart`||e.type===`pointerdown`?t=`mousedown`:(e.type===`touchend`||e.type===`pointerup`||e.type===`touchcancel`||e.type===`pointercancel`)&&(t=`mouseup`),t&&$t(this.map)._onClick(this._createMouseEvent(t,e))},_createMouseEvent(e,t){let n,r=t.touches[0]||t.changedTouches[0];try{n=new MouseEvent(e,{bubbles:t.bubbles,cancelable:t.cancelable,view:t.view,detail:r.detail,screenX:r.screenX,screenY:r.screenY,clientX:r.clientX,clientY:r.clientY,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey,button:t.button,relatedTarget:t.relatedTarget})}catch{n=document.createEvent(`MouseEvents`),n.initMouseEvent(e,t.bubbles,t.cancelable,t.view,r.detail,r.screenX,r.screenY,r.clientX,r.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget)}return n}}),nn=L.Control.extend({includes:[Ht],options:{position:`topleft`,disableByOtherButtons:!0},initialize(e){this._button=L.Util.extend({},this.options,e)},onAdd(e){return this._map=e,this._map.pm.Toolbar.options.oneBlock?this._container=this._map.pm.Toolbar._createContainer(this.options.position):this._button.tool===`edit`?this._container=this._map.pm.Toolbar.editContainer:this._button.tool===`options`?this._container=this._map.pm.Toolbar.optionsContainer:this._button.tool===`custom`?this._container=this._map.pm.Toolbar.customContainer:this._container=this._map.pm.Toolbar.drawContainer,this._renderButton(),this._container},_renderButton(){let e=this.buttonsDomNode;this.buttonsDomNode=this._makeButton(this._button),e?e.replaceWith(this.buttonsDomNode):this._container.appendChild(this.buttonsDomNode)},onRemove(){return this.buttonsDomNode.remove(),this._container},getText(){return this._button.text},getIconUrl(){return this._button.iconUrl},destroy(){this._button={},this._update()},toggle(e){return typeof e==`boolean`?this._button.toggleStatus=e:this._button.toggleStatus=!this._button.toggleStatus,this._applyStyleClasses(),this._updateActiveAction(this._button),this._button.toggleStatus},toggled(){return this._button.toggleStatus},onCreate(){this.toggle(!1)},disable(){this.toggle(!1),this._button.disabled=!0,this._updateDisabled()},enable(){this._button.disabled=!1,this._updateDisabled(),this._updateActiveAction(this._button)},_triggerClick(e){e&&e.preventDefault(),!this._button.disabled&&(this._button.onClick(e,{button:this,event:e}),this._clicked(e),this._button.afterClick(e,{button:this,event:e}))},_makeButton(e){let t=this.options.position.indexOf(`right`)>-1?`pos-right`:``,n=L.DomUtil.create(`div`,`button-container  ${t}`,this._container);e.title&&n.setAttribute(`title`,e.title);let r=L.DomUtil.create(`a`,`leaflet-buttons-control-button`,n);r.setAttribute(`role`,`button`),r.setAttribute(`tabindex`,`0`),r.href=`#`;let i=L.DomUtil.create(`div`,`leaflet-pm-actions-container ${t}`,n),a=e.actions,o={cancel:{text:W(`actions.cancel`),title:W(`actions.cancel`),onClick(){this._triggerClick()}},finishMode:{text:W(`actions.finish`),title:W(`actions.finish`),onClick(){this._triggerClick()}},removeLastVertex:{text:W(`actions.removeLastVertex`),title:W(`actions.removeLastVertex`),onClick(){this._map.pm.Draw[e.jsClass]._removeLastVertex()}},finish:{text:W(`actions.finish`),title:W(`actions.finish`),onClick(t){this._map.pm.Draw[e.jsClass]._finishShape(t)}}};e._preparedActions=a.map(n=>{let r=typeof n==`string`?n:n.name,a;if(o[r])a=o[r];else if(n.text)a=n;else return a;let s=L.DomUtil.create(`a`,`leaflet-pm-action ${t} action-${r}`,i);return s.setAttribute(`role`,`button`),s.setAttribute(`tabindex`,`0`),s.href=`#`,a.title&&(s.title=a.title),s.innerHTML=a.text,L.DomEvent.disableClickPropagation(s),L.DomEvent.on(s,`click`,L.DomEvent.stop),a._node=s,!e.disabled&&a.onClick&&(L.DomEvent.addListener(s,`click`,t=>{t.preventDefault();let n=``,{buttons:r}=this._map.pm.Toolbar;for(let t in r)if(r[t]._button===e){n=t;break}this._fireActionClick(a,n,e)},this),L.DomEvent.addListener(s,`click`,a.onClick,this),L.DomEvent.addListener(s,`click`,()=>this._updateActiveAction(e))),a}),this._updateActiveAction(e),e.toggleStatus&&L.DomUtil.addClass(n,`active`);let s=L.DomUtil.create(`div`,`control-icon`,r);return e.iconUrl&&s.setAttribute(`src`,e.iconUrl),e.className&&L.DomUtil.addClass(s,e.className),L.DomEvent.disableClickPropagation(r),L.DomEvent.on(r,`click`,L.DomEvent.stop),e.disabled||(L.DomEvent.addListener(r,`click`,this._onBtnClick,this),L.DomEvent.addListener(r,`click`,this._triggerClick,this)),e.disabled&&(L.DomUtil.addClass(r,`pm-disabled`),r.setAttribute(`aria-disabled`,`true`)),n},_applyStyleClasses(){this._container&&(!this._button.toggleStatus||this._button.cssToggle===!1?(L.DomUtil.removeClass(this.buttonsDomNode,`active`),L.DomUtil.removeClass(this._container,`activeChild`)):(L.DomUtil.addClass(this.buttonsDomNode,`active`),L.DomUtil.addClass(this._container,`activeChild`)))},_onBtnClick(){if(this._button.disabled)return;this._button.disableOtherButtons&&this._map.pm.Toolbar.triggerClickOnToggledButtons(this);let e=``,{buttons:t}=this._map.pm.Toolbar;for(let n in t)if(t[n]._button===this._button){e=n;break}this._fireButtonClick(e,this._button)},_clicked(){this._button.doToggle&&this.toggle()},_updateDisabled(){if(!this._container)return;let e=`pm-disabled`,t=this.buttonsDomNode.children[0];this._button.disabled?(L.DomUtil.addClass(t,e),t.setAttribute(`aria-disabled`,`true`)):(L.DomUtil.removeClass(t,e),t.setAttribute(`aria-disabled`,`false`))},_updateActiveAction(e){e._preparedActions?.forEach(e=>{e?._node&&(e.isActive&&e.isActive.call(this)?L.DomUtil.addClass(e._node,`active-action`):L.DomUtil.removeClass(e._node,`active-action`))})}});L.Control.PMButton=nn;var rn=L.Class.extend({options:{drawMarker:!0,drawRectangle:!0,drawPolyline:!0,drawPolygon:!0,drawCircle:!0,drawCircleMarker:!0,drawText:!0,editMode:!0,dragMode:!0,cutPolygon:!0,removalMode:!0,rotateMode:!0,snappingOption:!0,drawControls:!0,editControls:!0,optionsControls:!0,customControls:!0,oneBlock:!1,position:`topleft`,positions:{draw:``,edit:``,options:``,custom:``}},customButtons:[],initialize(e){this.customButtons=[],this.options.positions={draw:``,edit:``,options:``,custom:``},this.init(e)},reinit(){let e=this.isVisible;this.removeControls(),this._defineButtons(),e&&this.addControls()},init(e){this.map=e,this.buttons={},this.isVisible=!1,this.drawContainer=L.DomUtil.create(`div`,`leaflet-pm-toolbar leaflet-pm-draw leaflet-bar leaflet-control`),this.editContainer=L.DomUtil.create(`div`,`leaflet-pm-toolbar leaflet-pm-edit leaflet-bar leaflet-control`),this.optionsContainer=L.DomUtil.create(`div`,`leaflet-pm-toolbar leaflet-pm-options leaflet-bar leaflet-control`),this.customContainer=L.DomUtil.create(`div`,`leaflet-pm-toolbar leaflet-pm-custom leaflet-bar leaflet-control`),this._defineButtons()},_createContainer(e){let t=`${e}Container`;return this[t]||(this[t]=L.DomUtil.create(`div`,`leaflet-pm-toolbar leaflet-pm-${e} leaflet-bar leaflet-control`)),this[t]},getButtons(){return this.buttons},addControls(e=this.options){typeof e.editPolygon<`u`&&(e.editMode=e.editPolygon),typeof e.deleteLayer<`u`&&(e.removalMode=e.deleteLayer),L.Util.setOptions(this,e),this.applyIconStyle(),this.isVisible=!0,this._showHideButtons()},applyIconStyle(){let e=this.getButtons(),t={geomanIcons:{drawMarker:`control-icon leaflet-pm-icon-marker`,drawPolyline:`control-icon leaflet-pm-icon-polyline`,drawRectangle:`control-icon leaflet-pm-icon-rectangle`,drawPolygon:`control-icon leaflet-pm-icon-polygon`,drawCircle:`control-icon leaflet-pm-icon-circle`,drawCircleMarker:`control-icon leaflet-pm-icon-circle-marker`,editMode:`control-icon leaflet-pm-icon-edit`,dragMode:`control-icon leaflet-pm-icon-drag`,cutPolygon:`control-icon leaflet-pm-icon-cut`,removalMode:`control-icon leaflet-pm-icon-delete`,drawText:`control-icon leaflet-pm-icon-text`}};for(let n in e){let r=e[n];L.Util.setOptions(r,{className:t.geomanIcons[n]})}},removeControls(){let e=this.getButtons();for(let t in e)e[t].remove();this.isVisible=!1},deleteControl(e){let t=this._btnNameMapping(e);this.buttons[t]&&(this.buttons[t].remove(),delete this.buttons[t])},toggleControls(e=this.options){this.isVisible?this.removeControls():this.addControls(e)},_addButton(e,t){return this.buttons[e]=t,this.options[e]=!!this.options[e]||!1,this.buttons[e]},triggerClickOnToggledButtons(e){for(let t in this.buttons){let n=this.buttons[t];n._button.disableByOtherButtons&&n!==e&&n.toggled()&&n._triggerClick()}},toggleButton(e,t,n=!0){e===`editPolygon`&&(e=`editMode`),e===`deleteLayer`&&(e=`removalMode`);let r=e;return n&&this.triggerClickOnToggledButtons(this.buttons[r]),this.buttons[r]?this.buttons[r].toggle(t):!1},_defineButtons(){let e={className:`control-icon leaflet-pm-icon-marker`,title:W(`buttonTitles.drawMarkerButton`),jsClass:`Marker`,onClick:()=>{},afterClick:(e,t)=>{this.map.pm.Draw[t.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:[`cancel`]},t={title:W(`buttonTitles.drawPolyButton`),className:`control-icon leaflet-pm-icon-polygon`,jsClass:`Polygon`,onClick:()=>{},afterClick:(e,t)=>{this.map.pm.Draw[t.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:[`finish`,`removeLastVertex`,`cancel`]},n={className:`control-icon leaflet-pm-icon-polyline`,title:W(`buttonTitles.drawLineButton`),jsClass:`Line`,onClick:()=>{},afterClick:(e,t)=>{this.map.pm.Draw[t.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:[`finish`,`removeLastVertex`,`cancel`]},r={title:W(`buttonTitles.drawCircleButton`),className:`control-icon leaflet-pm-icon-circle`,jsClass:`Circle`,onClick:()=>{},afterClick:(e,t)=>{this.map.pm.Draw[t.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:[`cancel`]},i={title:W(`buttonTitles.drawCircleMarkerButton`),className:`control-icon leaflet-pm-icon-circle-marker`,jsClass:`CircleMarker`,onClick:()=>{},afterClick:(e,t)=>{this.map.pm.Draw[t.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:[`cancel`]},a={title:W(`buttonTitles.drawRectButton`),className:`control-icon leaflet-pm-icon-rectangle`,jsClass:`Rectangle`,onClick:()=>{},afterClick:(e,t)=>{this.map.pm.Draw[t.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:[`cancel`]},o={title:W(`buttonTitles.editButton`),className:`control-icon leaflet-pm-icon-edit`,onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalEditMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:`edit`,actions:[`finishMode`]},s={title:W(`buttonTitles.dragButton`),className:`control-icon leaflet-pm-icon-drag`,onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalDragMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:`edit`,actions:[`finishMode`]},c={title:W(`buttonTitles.cutButton`),className:`control-icon leaflet-pm-icon-cut`,jsClass:`Cut`,onClick:()=>{},afterClick:(e,t)=>{this.map.pm.Draw[t.button._button.jsClass].toggle({snappable:!0,cursorMarker:!0,allowSelfIntersection:!1})},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:`edit`,actions:[`finish`,`removeLastVertex`,`cancel`]},l={title:W(`buttonTitles.deleteButton`),className:`control-icon leaflet-pm-icon-delete`,onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRemovalMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:`edit`,actions:[`finishMode`]},u={title:W(`buttonTitles.rotateButton`),className:`control-icon leaflet-pm-icon-rotate`,onClick:()=>{},afterClick:()=>{this.map.pm.toggleGlobalRotateMode()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,tool:`edit`,actions:[`finishMode`]},d={className:`control-icon leaflet-pm-icon-text`,title:W(`buttonTitles.drawTextButton`),jsClass:`Text`,onClick:()=>{},afterClick:(e,t)=>{this.map.pm.Draw[t.button._button.jsClass].toggle()},doToggle:!0,toggleStatus:!1,disableOtherButtons:!0,position:this.options.position,actions:[`cancel`]};this._addButton(`drawMarker`,new L.Control.PMButton(e)),this._addButton(`drawPolyline`,new L.Control.PMButton(n)),this._addButton(`drawRectangle`,new L.Control.PMButton(a)),this._addButton(`drawPolygon`,new L.Control.PMButton(t)),this._addButton(`drawCircle`,new L.Control.PMButton(r)),this._addButton(`drawCircleMarker`,new L.Control.PMButton(i)),this._addButton(`drawText`,new L.Control.PMButton(d)),this._addButton(`editMode`,new L.Control.PMButton(o)),this._addButton(`dragMode`,new L.Control.PMButton(s)),this._addButton(`cutPolygon`,new L.Control.PMButton(c)),this._addButton(`removalMode`,new L.Control.PMButton(l)),this._addButton(`rotateMode`,new L.Control.PMButton(u))},_showHideButtons(){if(!this.isVisible)return;this.removeControls(),this.isVisible=!0;let e=this.getButtons(),t=[];for(let n in this.options.drawControls===!1&&(t=t.concat(Object.keys(e).filter(t=>!e[t]._button.tool))),this.options.editControls===!1&&(t=t.concat(Object.keys(e).filter(t=>e[t]._button.tool===`edit`))),this.options.optionsControls===!1&&(t=t.concat(Object.keys(e).filter(t=>e[t]._button.tool===`options`))),this.options.customControls===!1&&(t=t.concat(Object.keys(e).filter(t=>e[t]._button.tool===`custom`))),e)if(this.options[n]&&t.indexOf(n)===-1){let t=e[n]._button.tool;t||=`draw`,e[n].setPosition(this._getBtnPosition(t)),e[n].addTo(this.map)}},_getBtnPosition(e){return this.options.positions&&this.options.positions[e]?this.options.positions[e]:this.options.position},setBlockPosition(e,t){this.options.positions[e]=t,this._showHideButtons(),this.changeControlOrder()},getBlockPositions(){return this.options.positions},copyDrawControl(e,t){if(t)typeof t!=`object`&&(t={name:t});else throw TypeError(`Button has no name`);let n=this._btnNameMapping(e);if(!t.name)throw TypeError(`Button has no name`);if(this.buttons[t.name])throw TypeError(`Button with this name already exists`);let r=this.map.pm.Draw.createNewDrawInstance(t.name,n);return t={...this.buttons[n]._button,...t},{drawInstance:r,control:this.createCustomControl(t)}},createCustomControl(e){if(!e.name)throw TypeError(`Button has no name`);if(this.buttons[e.name])throw TypeError(`Button with this name already exists`);e.onClick||=()=>{},e.afterClick||=()=>{},e.toggle!==!1&&(e.toggle=!0),e.block&&=e.block.toLowerCase(),(!e.block||e.block===`draw`)&&(e.block=``),e.className?e.className.indexOf(`control-icon`)===-1&&(e.className=`control-icon ${e.className}`):e.className=`control-icon`;let t={tool:e.block,className:e.className,title:e.title||``,jsClass:e.name,onClick:e.onClick,afterClick:e.afterClick,doToggle:e.toggle,toggleStatus:!1,disableOtherButtons:e.disableOtherButtons??!0,disableByOtherButtons:e.disableByOtherButtons??!0,cssToggle:e.toggle,position:this.options.position,actions:e.actions||[],disabled:!!e.disabled};this.options[e.name]!==!1&&(this.options[e.name]=!0);let n=this._addButton(e.name,new L.Control.PMButton(t));return this.changeControlOrder(),n},controlExists(e){return!!this.getButton(e)},getButton(e){return this.getButtons()[e]},getButtonsInBlock(e){let t={};if(e)for(let n in this.getButtons()){let r=this.getButtons()[n];(r._button.tool===e||e===`draw`&&!r._button.tool)&&(t[n]=r)}return t},changeControlOrder(e=[]){let t=this._shapeMapping(),n=[];e.forEach(e=>{t[e]?n.push(t[e]):n.push(e)});let r=this.getButtons(),i={};n.forEach(e=>{r[e]&&(i[e]=r[e])}),Object.keys(r).filter(e=>!r[e]._button.tool||r[e]._button.tool===`draw`).forEach(e=>{n.indexOf(e)===-1&&(i[e]=r[e])}),Object.keys(r).filter(e=>r[e]._button.tool===`edit`).forEach(e=>{n.indexOf(e)===-1&&(i[e]=r[e])}),Object.keys(r).filter(e=>r[e]._button.tool===`options`).forEach(e=>{n.indexOf(e)===-1&&(i[e]=r[e])}),Object.keys(r).filter(e=>r[e]._button.tool===`custom`).forEach(e=>{n.indexOf(e)===-1&&(i[e]=r[e])}),Object.keys(r).forEach(e=>{n.indexOf(e)===-1&&(i[e]=r[e])}),this.map.pm.Toolbar.buttons=i,this._showHideButtons()},getControlOrder(){let e=this.getButtons(),t=[];for(let n in e)t.push(n);return t},changeActionsOfControl(e,t){let n=this._btnNameMapping(e);if(!n)throw TypeError(`No name passed`);if(!t)throw TypeError(`No actions passed`);if(!this.buttons[n])throw TypeError(`Button with this name not exists`);this.buttons[n]._button.actions=t,this.changeControlOrder()},setButtonDisabled(e,t){let n=this._btnNameMapping(e);t?this.buttons[n].disable():this.buttons[n].enable()},_shapeMapping(){return{Marker:`drawMarker`,Circle:`drawCircle`,Polygon:`drawPolygon`,Rectangle:`drawRectangle`,Polyline:`drawPolyline`,Line:`drawPolyline`,CircleMarker:`drawCircleMarker`,Edit:`editMode`,Drag:`dragMode`,Cut:`cutPolygon`,Removal:`removalMode`,Rotate:`rotateMode`,Text:`drawText`}},_btnNameMapping(e){let t=this._shapeMapping();return t[e]?t[e]:e}}),an=c(ut()),on={_initSnappableMarkers(){this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,this._assignEvents(this._markers),this._layer.off(`pm:dragstart`,this._unsnap,this),this._layer.on(`pm:dragstart`,this._unsnap,this)},_disableSnapping(){this._layer.off(`pm:dragstart`,this._unsnap,this)},_assignEvents(e){e.forEach(e=>{if(Array.isArray(e)){this._assignEvents(e);return}e.off(`drag`,this._handleSnapping,this),e.on(`drag`,this._handleSnapping,this),e.off(`dragend`,this._cleanupSnapping,this),e.on(`dragend`,this._cleanupSnapping,this)})},_cleanupSnapping(e){if(e){let t=e.target;t._snapped=!1}delete this._snapList,this.throttledList&&=(this._map.off(`layeradd`,this.throttledList,this),void 0),this._map.off(`layerremove`,this._handleSnapLayerRemoval,this),this.debugIndicatorLines&&this.debugIndicatorLines.forEach(e=>{e.remove()})},_handleThrottleSnapping(){this.throttledList&&this._createSnapList()},_handleSnapping(e){let t=e.target;if(t._snapped=!1,this.throttledList||=L.Util.throttle(this._handleThrottleSnapping,100,this),e?.originalEvent?.altKey||this._map?.pm?.Keyboard.isAltKeyPressed()||(this._snapList===void 0&&(this._createSnapList(),this._map.off(`layeradd`,this.throttledList,this),this._map.on(`layeradd`,this.throttledList,this)),this._snapList.length<=0))return!1;let n=this._calcClosestLayer(t.getLatLng(),this._snapList);if(Object.keys(n).length===0)return!1;let r=n.layer instanceof L.Marker||n.layer instanceof L.CircleMarker||!this.options.snapSegment,i;i=r?n.latlng:this._checkPrioritiySnapping(n);let a=this.options.snapDistance,o={marker:t,shape:this._shape,snapLatLng:i,segment:n.segment,layer:this._layer,workingLayer:this._layer,layerInteractedWith:n.layer,distance:n.distance};if(this._fireSnapDrag(o.marker,o),this._fireSnapDrag(this._layer,o),n.distance<a){t._orgLatLng=t.getLatLng(),t.setLatLng(i),t._snapped=!0,t._snapInfo=o;let e=()=>{this._snapLatLng=i,this._fireSnap(t,o),this._fireSnap(this._layer,o)},n=this._snapLatLng||{},r=i||{};(n.lat!==r.lat||n.lng!==r.lng)&&e()}else this._snapLatLng&&(this._unsnap(o),t._snapped=!1,t._snapInfo=void 0,this._fireUnsnap(o.marker,o),this._fireUnsnap(this._layer,o));return!0},_createSnapList(){let e=[],t=[],n=this._map;n.off(`layerremove`,this._handleSnapLayerRemoval,this),n.on(`layerremove`,this._handleSnapLayerRemoval,this),n.eachLayer(n=>{if((n instanceof L.Polyline||n instanceof L.Marker||n instanceof L.CircleMarker||n instanceof L.ImageOverlay)&&n.options.snapIgnore!==!0){if(n.options.snapIgnore===void 0&&(!L.PM.optIn&&n.options.pmIgnore===!0||L.PM.optIn&&n.options.pmIgnore!==!1))return;(n instanceof L.Circle||n instanceof L.CircleMarker)&&n.pm&&n.pm._hiddenPolyCircle?e.push(n.pm._hiddenPolyCircle):n instanceof L.ImageOverlay&&(n=L.rectangle(n.getBounds())),e.push(n);let r=L.polyline([],{color:`red`,pmIgnore:!0});r._pmTempLayer=!0,t.push(r),(n instanceof L.Circle||n instanceof L.CircleMarker)&&t.push(r)}}),e=e.filter(e=>this._layer!==e),e=e.filter(e=>e._latlng||e._latlngs&&Gt(e._latlngs)),e=e.filter(e=>!e._pmTempLayer),this._otherSnapLayers?(this._otherSnapLayers.forEach(()=>{let e=L.polyline([],{color:`red`,pmIgnore:!0});e._pmTempLayer=!0,t.push(e)}),this._snapList=e.concat(this._otherSnapLayers)):this._snapList=e,this.debugIndicatorLines=t},_handleSnapLayerRemoval({layer:e}){if(!e._leaflet_id)return;let t=this._snapList.findIndex(t=>t._leaflet_id===e._leaflet_id);t>-1&&this._snapList.splice(t,1)},_calcClosestLayer(e,t){return this._calcClosestLayers(e,t,1)[0]},_calcClosestLayers(e,t,n=1){let r=[],i={};t.forEach((t,a)=>{if(t._parentCopy&&t._parentCopy===this._layer||t.getLatLngs?.().flat(5).length<2)return;let o=this._calcLayerDistances(e,t);if(o.distance=Math.floor(o.distance),this.debugIndicatorLines){if(!this.debugIndicatorLines[a]){let e=L.polyline([],{color:`red`,pmIgnore:!0});e._pmTempLayer=!0,this.debugIndicatorLines[a]=e}this.debugIndicatorLines[a].setLatLngs([e,o.latlng])}n===1&&(i.distance===void 0||o.distance-5<=i.distance)?(o.distance+5<i.distance&&(r=[]),i=o,i.layer=t,r.push(i)):n!==1&&(i={},i=o,i.layer=t,r.push(i))}),n!==1&&(r=r.sort((e,t)=>e.distance-t.distance)),n===-1&&(n=r.length);let a=this._getClosestLayerByPriority(r,n);return L.Util.isArray(a)?a:[a]},_calcLayerDistances(e,t){let n=this._map,r=t instanceof L.Marker||t instanceof L.CircleMarker,i=t instanceof L.Polygon,a=e;if(r){let e=t.getLatLng();return{latlng:{...e},distance:this._getDistance(n,e,a)}}return this._calcLatLngDistances(a,t.getLatLngs(),n,i)},_calcLatLngDistances(e,t,n,r=!1){let i,a,o,s=t=>{t.forEach((c,l)=>{if(Array.isArray(c)){s(c);return}if(this.options.snapSegment){let i=c,s;s=r?l+1===t.length?0:l+1:l+1===t.length?void 0:l+1;let u=t[s];if(u){let t=this._getDistanceToSegment(n,e,i,u);(a===void 0||t<a)&&(a=t,o=[i,u])}}else{let t=this._getDistance(n,e,c);(a===void 0||t<a)&&(a=t,i=c)}})};return s(t),this.options.snapSegment?{latlng:{...this._getClosestPointOnSegment(n,e,o[0],o[1])},segment:o,distance:a}:{latlng:i,distance:a}},_getClosestLayerByPriority(e,t=1){e=e.sort((e,t)=>e._leaflet_id-t._leaflet_id);let n=[`Marker`,`CircleMarker`,`Circle`,`Line`,`Polygon`,`Rectangle`],r=this._map.pm.globalOptions.snappingOrder||[],i=0,a={};return r.concat(n).forEach(e=>{a[e]||(i+=1,a[e]=i)}),e.sort(Xt(`instanceofShape`,a)),t===1?e[0]||{}:e.slice(0,t)},_checkPrioritiySnapping(e){let t=this._map,n=e.segment[0],r=e.segment[1],i=e.latlng,a=i;if(this.options.snapVertex){let e=this._getDistance(t,n,i),o=this._getDistance(t,r,i),s=e<o?n:r,c=e<o?e:o;if(this.options.snapMiddle){let a=L.PM.Utils.calcMiddleLatLng(t,n,r),l=this._getDistance(t,a,i);l<e&&l<o&&(s=a,c=l)}let l=this.options.snapDistance;c<l&&(a=s)}return{...a}},_unsnap(){delete this._snapLatLng},_getClosestPointOnSegment(e,t,n,r){let i=e.getMaxZoom();i===1/0&&(i=e.getZoom());let a=e.project(t,i),o=e.project(n,i),s=e.project(r,i),c=L.LineUtil.closestPointOnSegment(a,o,s);return e.unproject(c,i)},_getDistanceToSegment(e,t,n,r){let i=e.latLngToContainerPoint(t),a=e.latLngToContainerPoint(n),o=e.latLngToContainerPoint(r);return L.LineUtil.pointToSegmentDistance(i,a,o)},_getDistance(e,t,n){return e.latLngToContainerPoint(t).distanceTo(e.latLngToContainerPoint(n))}},q=L.Class.extend({includes:[on,Ht],options:{snappable:!0,snapDistance:20,snapMiddle:!1,allowSelfIntersection:!0,tooltips:!0,templineStyle:{},hintlineStyle:{color:`#3388ff`,dashArray:`5,5`},pathOptions:null,cursorMarker:!0,finishOn:null,markerStyle:{draggable:!0,icon:L.icon()},hideMiddleMarkers:!1,minRadiusCircle:null,maxRadiusCircle:null,minRadiusCircleMarker:null,maxRadiusCircleMarker:null,resizeableCircleMarker:!1,resizeableCircle:!0,markerEditable:!0,continueDrawing:!1,snapSegment:!0,requireSnapToFinish:!1,rectangleAngle:0,textOptions:{text:null,focusAfterDraw:null,removeIfEmpty:null,className:null},snapVertex:!0},setOptions(e){L.Util.setOptions(this,e),this.setStyle(this.options)},setStyle(){},getOptions(){return this.options},initialize(e){let t=new L.Icon.Default;t.options.tooltipAnchor=[0,0],this.options.markerStyle.icon=t,this._map=e,this.shapes=[`Marker`,`CircleMarker`,`Line`,`Polygon`,`Rectangle`,`Circle`,`Cut`,`Text`],this.shapes.forEach(e=>{this[e]=new L.PM.Draw[e](this._map)}),this.Marker.setOptions({continueDrawing:!0}),this.CircleMarker.setOptions({continueDrawing:!0})},setPathOptions(e,t=!1){t?this.options.pathOptions=(0,an.default)(this.options.pathOptions,e):this.options.pathOptions=e},getShapes(){return this.shapes},getShape(){return this._shape},enable(e,t){if(!e)throw Error(`Error: Please pass a shape as a parameter. Possible shapes are: ${this.getShapes().join(`,`)}`);this.disable(),this[e].enable(t)},disable(){this.shapes.forEach(e=>{this[e].disable()})},addControls(){this.shapes.forEach(e=>{this[e].addButton()})},getActiveShape(){let e;return this.shapes.forEach(t=>{this[t]._enabled&&(e=t)}),e},_setGlobalDrawMode(){this._shape===`Cut`?this._fireGlobalCutModeToggled():this._fireGlobalDrawModeToggled();let e=[];this._map.eachLayer(t=>{(t instanceof L.Polyline||t instanceof L.Marker||t instanceof L.Circle||t instanceof L.CircleMarker||t instanceof L.ImageOverlay)&&(t._pmTempLayer||e.push(t))}),this._enabled?e.forEach(e=>{L.PM.Utils.disablePopup(e)}):e.forEach(e=>{L.PM.Utils.enablePopup(e)})},createNewDrawInstance(e,t){let n=this._getShapeFromBtnName(t);if(this[e])throw TypeError(`Draw Type already exists`);if(!L.PM.Draw[n])throw TypeError(`There is no class L.PM.Draw.${n}`);return this[e]=new L.PM.Draw[n](this._map),this[e].toolbarButtonName=e,this[e]._shape=e,this.shapes.push(e),this[t]&&this[e].setOptions(this[t].options),this[e].setOptions(this[e].options),this[e]},_getShapeFromBtnName(e){let t={drawMarker:`Marker`,drawCircle:`Circle`,drawPolygon:`Polygon`,drawPolyline:`Line`,drawRectangle:`Rectangle`,drawCircleMarker:`CircleMarker`,editMode:`Edit`,dragMode:`Drag`,cutPolygon:`Cut`,removalMode:`Removal`,rotateMode:`Rotate`,drawText:`Text`};return t[e]?t[e]:this[e]?this[e]._shape:e},_finishLayer(e){e.pm&&(e.pm.setOptions(this.options),e.pm._shape=this._shape,e.pm._map=this._map),this._addDrawnLayerProp(e)},_addDrawnLayerProp(e){e._drawnByGeoman=!0},_setPane(e,t){t===`layerPane`?e.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||`overlayPane`:t===`vertexPane`?e.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||`markerPane`:t===`markerPane`&&(e.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||`markerPane`)},_isFirstLayer(){return(this._map||this._layer._map).pm.getGeomanLayers().length===0}});q.Marker=q.extend({initialize(e){this._map=e,this._shape=`Marker`,this.toolbarButtonName=`drawMarker`,this._layerIsDragging=!1},enable(e){L.Util.setOptions(this,e),this._enabled=!0,this._map.getContainer().classList.add(`geoman-draw-cursor`),this._map.on(`click`,this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),this.options.markerStyle),this._setPane(this._hintMarker,`markerPane`),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.tooltips&&this._hintMarker.bindTooltip(W(`tooltips.placeMarker`),{permanent:!0,offset:L.point(0,10),direction:`bottom`,opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on(`mousemove`,this._syncHintMarker,this),this.options.markerEditable&&this._map.eachLayer(e=>{this.isRelevantMarker(e)&&e.pm.enable()}),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove(`geoman-draw-cursor`),this._map.off(`click`,this._createMarker,this),this._hintMarker.remove(),this._map.off(`mousemove`,this._syncHintMarker,this),this._map.eachLayer(e=>{this.isRelevantMarker(e)&&e.pm.disable()}),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(e){this.enabled()?this.disable():this.enable(e)},isRelevantMarker(e){return e instanceof L.Marker&&e.pm&&!e._pmTempLayer&&!e.pm._initTextMarker},_syncHintMarker(e){if(this._hintMarker.setLatLng(e.latlng),this.options.snappable){let t=e;t.target=this._hintMarker,this._handleSnapping(t)}this._fireChange(this._hintMarker.getLatLng(),`Draw`)},_createMarker(e){if(!e.latlng||this._layerIsDragging||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(e.latlng);let t=this._hintMarker.getLatLng(),n=new L.Marker(t,this.options.markerStyle);this._setPane(n,`markerPane`),this._finishLayer(n),n.pm||(n.options.draggable=!1),n.addTo(this._map.pm._getContainingLayer()),n.pm&&this.options.markerEditable?n.pm.enable():n.dragging&&n.dragging.disable(),this._fireCreate(n),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},setStyle(){this.options.markerStyle?.icon&&this._hintMarker?.setIcon(this.options.markerStyle.icon)}});var sn=6371008.8,cn={centimeters:sn*100,centimetres:sn*100,degrees:360/(2*Math.PI),feet:sn*3.28084,inches:sn*39.37,kilometers:sn/1e3,kilometres:sn/1e3,meters:sn,metres:sn,miles:sn/1609.344,millimeters:sn*1e3,millimetres:sn*1e3,nauticalmiles:sn/1852,radians:1,yards:sn*1.0936};function J(e,t,n={}){let r={type:`Feature`};return(n.id===0||n.id)&&(r.id=n.id),n.bbox&&(r.bbox=n.bbox),r.properties=t||{},r.geometry=e,r}function ln(e,t,n={}){if(!e)throw Error(`coordinates is required`);if(!Array.isArray(e))throw Error(`coordinates must be an Array`);if(e.length<2)throw Error(`coordinates must be at least 2 numbers long`);if(!hn(e[0])||!hn(e[1]))throw Error(`coordinates must contain numbers`);return J({type:`Point`,coordinates:e},t,n)}function un(e,t,n={}){if(e.length<2)throw Error(`coordinates must be an array of two or more positions`);return J({type:`LineString`,coordinates:e},t,n)}function dn(e,t={}){let n={type:`FeatureCollection`};return t.id&&(n.id=t.id),t.bbox&&(n.bbox=t.bbox),n.features=e,n}function fn(e,t=`kilometers`){let n=cn[t];if(!n)throw Error(t+` units is invalid`);return e*n}function pn(e){return e%(2*Math.PI)*180/Math.PI}function mn(e){return e%360*Math.PI/180}function hn(e){return!isNaN(e)&&e!==null&&!Array.isArray(e)}function gn(e){return typeof e==`object`&&!!e&&!Array.isArray(e)}function _n(e){let t,n,r={type:`FeatureCollection`,features:[]};if(n=e.type===`Feature`?e.geometry:e,n.type===`LineString`)t=[n.coordinates];else if(n.type===`MultiLineString`)t=n.coordinates;else if(n.type===`MultiPolygon`)t=[].concat(...n.coordinates);else if(n.type===`Polygon`)t=n.coordinates;else throw Error(`Input must be a LineString, MultiLineString, Polygon, or MultiPolygon Feature or Geometry`);return t.forEach(e=>{t.forEach(t=>{for(let n=0;n<e.length-1;n++)for(let i=n;i<t.length-1;i++){if(e===t&&(Math.abs(n-i)===1||n===0&&i===e.length-2&&e[n][0]===e[e.length-1][0]&&e[n][1]===e[e.length-1][1]))continue;let a=vn(e[n][0],e[n][1],e[n+1][0],e[n+1][1],t[i][0],t[i][1],t[i+1][0],t[i+1][1]);a&&r.features.push(ln([a[0],a[1]]))}})}),r}function vn(e,t,n,r,i,a,o,s){let c,l,u,d,f,p={x:null,y:null,onLine1:!1,onLine2:!1};return c=(s-a)*(n-e)-(o-i)*(r-t),c===0?p.x!==null&&p.y!==null?p:!1:(l=t-a,u=e-i,d=(o-i)*l-(s-a)*u,f=(n-e)*l-(r-t)*u,l=d/c,u=f/c,p.x=e+l*(n-e),p.y=t+l*(r-t),l>=0&&l<=1&&(p.onLine1=!0),u>=0&&u<=1&&(p.onLine2=!0),p.onLine1&&p.onLine2?[p.x,p.y]:!1)}var yn=_n;q.Line=q.extend({initialize(e){this._map=e,this._shape=`Line`,this.toolbarButtonName=`drawPolyline`,this._doesSelfIntersect=!1},enable(e){L.Util.setOptions(this,e),this._enabled=!0,this._markers=[],this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.polyline([],{...this.options.templineStyle,pmIgnore:!1}),this._setPane(this._layer,`layerPane`),this._layer._pmTempLayer=!0,this._layerGroup.addLayer(this._layer),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,`layerPane`),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:`marker-icon cursor-marker`})}),this._setPane(this._hintMarker,`vertexPane`),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,`visible`),this.options.tooltips&&this._hintMarker.bindTooltip(W(`tooltips.firstVertex`),{permanent:!0,offset:L.point(0,10),direction:`bottom`,opacity:.8}).openTooltip(),this._map.getContainer().classList.add(`geoman-draw-cursor`),this._map.on(`click`,this._createVertex,this),this.options.finishOn&&this.options.finishOn!==`snap`&&this._map.on(this.options.finishOn,this._finishShape,this),this.options.finishOn===`dblclick`&&(this.tempMapDoubleClickZoomState=this._map.doubleClickZoom._enabled,this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.disable()),this._map.on(`mousemove`,this._syncHintMarker,this),this._hintMarker.on(`move`,this._syncHintLine,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this.isRed=!1,this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove(`geoman-draw-cursor`),this._map.off(`click`,this._createVertex,this),this._map.off(`mousemove`,this._syncHintMarker,this),this.options.finishOn&&this.options.finishOn!==`snap`&&this._map.off(this.options.finishOn,this._finishShape,this),this.tempMapDoubleClickZoomState&&this._map.doubleClickZoom.enable(),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(e){this.enabled()?this.disable():this.enable(e)},_syncHintLine(){let e=this._layer.getLatLngs();if(e.length>0){let t=e[e.length-1];this._hintline.setLatLngs([t,this._hintMarker.getLatLng()])}},_syncHintMarker(e){if(this._hintMarker.setLatLng(e.latlng),this.options.snappable){let t=e;t.target=this._hintMarker,this._handleSnapping(t)}this.options.allowSelfIntersection||this._handleSelfIntersection(!0,this._hintMarker.getLatLng());let t=this._layer._defaultShape().slice();t.push(this._hintMarker.getLatLng()),this._change(t)},hasSelfIntersection(){return yn(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersection(e,t){let n=L.polyline(this._layer.getLatLngs());e&&(t||=this._hintMarker.getLatLng(),n.addLatLng(t));let r=yn(n.toGeoJSON(15));this._doesSelfIntersect=r.features.length>0,this._doesSelfIntersect?this.isRed||(this.isRed=!0,this._hintline.setStyle({color:`#f00000ff`}),this._fireIntersect(r,this._map,`Draw`)):this._hintline.isEmpty()||(this.isRed=!1,this._hintline.setStyle(this.options.hintlineStyle))},_createVertex(e){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,e.latlng),this._doesSelfIntersect))return;this._hintMarker._snapped||this._hintMarker.setLatLng(e.latlng);let t=this._hintMarker.getLatLng(),n=this._layer.getLatLngs(),r=n[n.length-1];if(t.equals(n[0])||n.length>0&&t.equals(r)){this._finishShape();return}this._layer._latlngInfo=this._layer._latlngInfo||[],this._layer._latlngInfo.push({latlng:t,snapInfo:this._hintMarker._snapInfo}),this._layer.addLatLng(t);let i=this._createMarker(t);this._setTooltipText(),this._setHintLineAfterNewVertex(t),this._fireVertexAdded(i,void 0,t,`Draw`),this._change(this._layer.getLatLngs()),this.options.finishOn===`snap`&&this._hintMarker._snapped&&this._finishShape(e)},_setHintLineAfterNewVertex(e){this._hintline.setLatLngs([e,e])},_removeLastVertex(){let e=this._markers;if(e.length<=1){this.disable();return}let t=this._layer.getLatLngs(),n=e[e.length-1],{indexPath:r}=L.PM.Utils.findDeepMarkerIndex(e,n);e.pop(),this._layerGroup.removeLayer(n);let i=e[e.length-1],a=t.indexOf(i.getLatLng());t=t.slice(0,a+1),this._layer.setLatLngs(t),this._layer._latlngInfo.pop(),this._syncHintLine(),this._setTooltipText(),this._fireVertexRemoved(n,r,`Draw`),this._change(this._layer.getLatLngs())},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!1),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let e=this._layer.getLatLngs();if(e.length<=1)return;let t=L.polyline(e,this.options.pathOptions);this._setPane(t,`layerPane`),this._finishLayer(t),t.addTo(this._map.pm._getContainingLayer()),this._fireCreate(t),this.options.snappable&&this._cleanupSnapping();let n=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(n))},_createMarker(e){let t=new L.Marker(e,{draggable:!1,icon:L.divIcon({className:`marker-icon`})});return this._setPane(t,`vertexPane`),t._pmTempLayer=!0,this._layerGroup.addLayer(t),this._markers.push(t),t.on(`click`,this._finishShape,this),t},_setTooltipText(){let{length:e}=this._layer.getLatLngs().flat(),t=``;t=W(e<=1?`tooltips.continueLine`:`tooltips.finishLine`),this._hintMarker.setTooltipContent(t)},_change(e){this._fireChange(e,`Draw`)},setStyle(){this._layer?.setStyle(this.options.templineStyle),this._hintline?.setStyle(this.options.hintlineStyle)}}),q.Polygon=q.Line.extend({initialize(e){this._map=e,this._shape=`Polygon`,this.toolbarButtonName=`drawPolygon`},enable(e){L.PM.Draw.Line.prototype.enable.call(this,e),this._layer.pm._shape=`Polygon`},_createMarker(e){let t=new L.Marker(e,{draggable:!1,icon:L.divIcon({className:`marker-icon`})});return this._setPane(t,`vertexPane`),t._pmTempLayer=!0,this._layerGroup.addLayer(t),this._markers.push(t),this._layer.getLatLngs().flat().length===1?(t.on(`click`,this._finishShape,this),this._tempSnapLayerIndex=this._otherSnapLayers.push(t)-1,this.options.snappable&&this._cleanupSnapping()):t.on(`click`,()=>1),t},_setTooltipText(){let{length:e}=this._layer.getLatLngs().flat(),t=``;t=W(e<=2?`tooltips.continueLine`:`tooltips.finishPoly`),this._hintMarker.setTooltipContent(t)},_finishShape(){if(!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let e=this._layer.getLatLngs();if(e.length<=2)return;let t=L.polygon(e,this.options.pathOptions);this._setPane(t,`layerPane`),this._finishLayer(t),t.addTo(this._map.pm._getContainingLayer()),this._fireCreate(t),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex;let n=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(n))}}),q.Rectangle=q.extend({initialize(e){this._map=e,this._shape=`Rectangle`,this.toolbarButtonName=`drawRectangle`},enable(e){if(L.Util.setOptions(this,e),this._enabled=!0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=L.rectangle([[0,0],[0,0]],this.options.pathOptions),this._setPane(this._layer,`layerPane`),this._layer._pmTempLayer=!0,this._startMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:`marker-icon rect-start-marker`}),draggable:!1,zIndexOffset:-100,opacity:this.options.cursorMarker?1:0}),this._setPane(this._startMarker,`vertexPane`),this._startMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._startMarker),this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:150,icon:L.divIcon({className:`marker-icon cursor-marker`})}),this._setPane(this._hintMarker,`vertexPane`),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,`visible`),this.options.tooltips&&this._hintMarker.bindTooltip(W(`tooltips.firstVertex`),{permanent:!0,offset:L.point(0,10),direction:`bottom`,opacity:.8}).openTooltip(),this.options.cursorMarker){this._styleMarkers=[];for(let e=0;e<2;e+=1){let e=L.marker(this._map.getCenter(),{icon:L.divIcon({className:`marker-icon rect-style-marker`}),draggable:!1,zIndexOffset:100});this._setPane(e,`vertexPane`),e._pmTempLayer=!0,this._layerGroup.addLayer(e),this._styleMarkers.push(e)}}this._map.getContainer().classList.add(`geoman-draw-cursor`),this._map.on(`click`,this._placeStartingMarkers,this),this._map.on(`mousemove`,this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove(`geoman-draw-cursor`),this._map.off(`click`,this._finishShape,this),this._map.off(`click`,this._placeStartingMarkers,this),this._map.off(`mousemove`,this._syncHintMarker,this),this._map.removeLayer(this._layerGroup),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(e){this.enabled()?this.disable():this.enable(e)},_placeStartingMarkers(e){this._hintMarker._snapped||this._hintMarker.setLatLng(e.latlng);let t=this._hintMarker.getLatLng();L.DomUtil.addClass(this._startMarker._icon,`visible`),this._startMarker.setLatLng(t),this.options.cursorMarker&&this._styleMarkers&&this._styleMarkers.forEach(e=>{L.DomUtil.addClass(e._icon,`visible`),e.setLatLng(t)}),this._map.off(`click`,this._placeStartingMarkers,this),this._map.on(`click`,this._finishShape,this),this._hintMarker.setTooltipContent(W(`tooltips.finishRect`)),this._setRectangleOrigin()},_setRectangleOrigin(){let e=this._startMarker.getLatLng();e&&(this._layerGroup.addLayer(this._layer),this._layer.setLatLngs([e,e]),this._hintMarker.on(`move`,this._syncRectangleSize,this))},_syncHintMarker(e){if(this._hintMarker.setLatLng(e.latlng),this.options.snappable){let t=e;t.target=this._hintMarker,this._handleSnapping(t)}let t=this._layerGroup&&this._layerGroup.hasLayer(this._layer)?this._layer.getLatLngs():[this._hintMarker.getLatLng()];this._fireChange(t,`Draw`)},_syncRectangleSize(){let e=Qt(this._startMarker.getLatLng(),this._map),t=Qt(this._hintMarker.getLatLng(),this._map),n=L.PM.Utils._getRotatedRectangle(e,t,this.options.rectangleAngle||0,this._map);if(this._layer.setLatLngs(n),this.options.cursorMarker&&this._styleMarkers){let r=[];n.forEach(n=>{!n.equals(e,1e-8)&&!n.equals(t,1e-8)&&r.push(n)}),r.forEach((e,t)=>{try{this._styleMarkers[t].setLatLng(e)}catch{}})}},_findCorners(){let e=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(e[0],e[2],this.options.rectangleAngle||0,this._map)},_finishShape(e){e?.latlng&&!this._hintMarker._snapped&&this._hintMarker.setLatLng(e.latlng);let t=this._hintMarker.getLatLng(),n=this._startMarker.getLatLng();if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||n.equals(t))return;let r=L.rectangle([n,t],this.options.pathOptions);if(this.options.rectangleAngle){let e=L.PM.Utils._getRotatedRectangle(n,t,this.options.rectangleAngle||0,this._map);r.setLatLngs(e),r.pm&&r.pm._setAngle(this.options.rectangleAngle||0)}this._setPane(r,`layerPane`),this._finishLayer(r),r.addTo(this._map.pm._getContainingLayer()),this._fireCreate(r);let i=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(i))},setStyle(){this._layer?.setStyle(this.options.pathOptions)}}),q.CircleMarker=q.extend({initialize(e){this._map=e,this._shape=`CircleMarker`,this.toolbarButtonName=`drawCircleMarker`,this._layerIsDragging=!1,this._BaseCircleClass=L.CircleMarker,this._minRadiusOption=`minRadiusCircleMarker`,this._maxRadiusOption=`maxRadiusCircleMarker`,this._editableOption=`resizeableCircleMarker`,this._defaultRadius=10},enable(e){if(L.Util.setOptions(this,e),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),this._enabled=!0,this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._map.getContainer().classList.add(`geoman-draw-cursor`),this.options[this._editableOption]){let e={};L.extend(e,this.options.templineStyle),e.radius=0,this._layerGroup=new L.FeatureGroup,this._layerGroup._pmTempLayer=!0,this._layerGroup.addTo(this._map),this._layer=new this._BaseCircleClass(this._map.getCenter(),e),this._setPane(this._layer,`layerPane`),this._layer._pmTempLayer=!0,this._centerMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:`marker-icon`}),draggable:!1,zIndexOffset:100}),this._setPane(this._centerMarker,`vertexPane`),this._centerMarker._pmTempLayer=!0,this._hintMarker=L.marker(this._map.getCenter(),{zIndexOffset:110,icon:L.divIcon({className:`marker-icon cursor-marker`})}),this._setPane(this._hintMarker,`vertexPane`),this._hintMarker._pmTempLayer=!0,this._layerGroup.addLayer(this._hintMarker),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,`visible`),this.options.tooltips&&this._hintMarker.bindTooltip(W(`tooltips.startCircle`),{permanent:!0,offset:L.point(0,10),direction:`bottom`,opacity:.8}).openTooltip(),this._hintline=L.polyline([],this.options.hintlineStyle),this._setPane(this._hintline,`layerPane`),this._hintline._pmTempLayer=!0,this._layerGroup.addLayer(this._hintline),this._map.on(`click`,this._placeCenterMarker,this)}else this._map.on(`click`,this._createMarker,this),this._hintMarker=new this._BaseCircleClass(this._map.getCenter(),{radius:this._defaultRadius,...this.options.templineStyle}),this._setPane(this._hintMarker,`layerPane`),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this._layer=this._hintMarker,this.options.tooltips&&this._hintMarker.bindTooltip(W(`tooltips.placeCircleMarker`),{permanent:!0,offset:L.point(0,10),direction:`bottom`,opacity:.8}).openTooltip();this._map.on(`mousemove`,this._syncHintMarker,this),this._extendingEnable(),this._otherSnapLayers=[],this._fireDrawStart(),this._setGlobalDrawMode()},_extendingEnable(){!this.options[this._editableOption]&&this.options.markerEditable&&this._map.eachLayer(e=>{this.isRelevantMarker(e)&&e.pm.enable()}),this._layer.bringToBack()},disable(){this._enabled&&(this._enabled=!1,this._map.getContainer().classList.remove(`geoman-draw-cursor`),this.options[this._editableOption]?(this._map.off(`click`,this._finishShape,this),this._map.off(`click`,this._placeCenterMarker,this),this._map.removeLayer(this._layerGroup)):(this._map.off(`click`,this._createMarker,this),this._extendingDisable(),this._hintMarker.remove()),this._map.off(`mousemove`,this._syncHintMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},_extendingDisable(){this._map.eachLayer(e=>{this.isRelevantMarker(e)&&e.pm.disable()})},enabled(){return this._enabled},toggle(e){this.enabled()?this.disable():this.enable(e)},_placeCenterMarker(e){this._hintMarker._snapped||this._hintMarker.setLatLng(e.latlng),this._layerGroup.addLayer(this._layer),this._layerGroup.addLayer(this._centerMarker);let t=this._hintMarker.getLatLng();this._centerMarker.setLatLng(t),this._map.off(`click`,this._placeCenterMarker,this),this._map.on(`click`,this._finishShape,this),this._placeCircleCenter()},_placeCircleCenter(){let e=this._centerMarker.getLatLng();e&&(this._layer.setLatLng(e),this._hintMarker.on(`move`,this._syncHintLine,this),this._hintMarker.on(`move`,this._syncCircleRadius,this),this._hintMarker.setTooltipContent(W(`tooltips.finishCircle`)),this._fireCenterPlaced(),this._fireChange(this._layer.getLatLng(),`Draw`))},_syncHintLine(){let e=this._centerMarker.getLatLng(),t=this._getNewDestinationOfHintMarker();this._hintline.setLatLngs([e,t])},_syncCircleRadius(){let e=this._centerMarker.getLatLng(),t=this._hintMarker.getLatLng(),n=this._distanceCalculation(e,t);this.options[this._minRadiusOption]&&n<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&n>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(n)},_syncHintMarker(e){if(this._hintMarker.setLatLng(e.latlng),this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker()),this.options.snappable){let t=e;t.target=this._hintMarker,this._handleSnapping(t)}this._handleHintMarkerSnapping();let t=this._layerGroup&&this._layerGroup.hasLayer(this._centerMarker)?this._centerMarker.getLatLng():this._hintMarker.getLatLng();this._fireChange(t,`Draw`)},isRelevantMarker(e){return e instanceof L.CircleMarker&&!(e instanceof L.Circle)&&e.pm&&!e._pmTempLayer},_createMarker(e){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer()||!e.latlng||this._layerIsDragging)return;this._hintMarker._snapped||this._hintMarker.setLatLng(e.latlng);let t=this._hintMarker.getLatLng(),n=new this._BaseCircleClass(t,{radius:this._defaultRadius,...this.options.pathOptions});this._setPane(n,`layerPane`),this._finishLayer(n),n.addTo(this._map.pm._getContainingLayer()),this._extendingCreateMarker(n),this._fireCreate(n),this._cleanupSnapping(),this.options.continueDrawing||this.disable()},_extendingCreateMarker(e){e.pm&&this.options.markerEditable&&e.pm.enable()},_finishShape(e){if(this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;e?.latlng&&!this._hintMarker._snapped&&this._hintMarker.setLatLng(e.latlng);let t=this._centerMarker.getLatLng(),n=this._defaultRadius;if(this.options[this._editableOption]){let e=this._hintMarker.getLatLng();n=this._distanceCalculation(t,e),this.options[this._minRadiusOption]&&n<this.options[this._minRadiusOption]?n=this.options[this._minRadiusOption]:this.options[this._maxRadiusOption]&&n>this.options[this._maxRadiusOption]&&(n=this.options[this._maxRadiusOption])}let r={...this.options.pathOptions,radius:n},i=new this._BaseCircleClass(t,r);this._setPane(i,`layerPane`),this._finishLayer(i),i.addTo(this._map.pm._getContainingLayer()),i.pm&&i.pm._updateHiddenPolyCircle(),this._fireCreate(i);let a=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(a))},_getNewDestinationOfHintMarker(){let e=this._hintMarker.getLatLng();if(this.options[this._editableOption]){if(!this._layerGroup.hasLayer(this._centerMarker))return e;let t=this._centerMarker.getLatLng(),n=this._distanceCalculation(t,e);this.options[this._minRadiusOption]&&n<this.options[this._minRadiusOption]?e=Yt(this._map,t,e,this._getMinDistanceInMeter()):this.options[this._maxRadiusOption]&&n>this.options[this._maxRadiusOption]&&(e=Yt(this._map,t,e,this._getMaxDistanceInMeter()))}return e},_getMinDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,this._centerMarker.getLatLng())},_getMaxDistanceInMeter(){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,this._centerMarker.getLatLng())},_handleHintMarkerSnapping(){if(this.options[this._editableOption]){if(this._hintMarker._snapped){let e=this._centerMarker.getLatLng(),t=this._hintMarker.getLatLng(),n=this._distanceCalculation(e,t);this._layerGroup.hasLayer(this._centerMarker)&&(this.options[this._minRadiusOption]&&n<this.options[this._minRadiusOption]||this.options[this._maxRadiusOption]&&n>this.options[this._maxRadiusOption])&&this._hintMarker.setLatLng(this._hintMarker._orgLatLng)}this._hintMarker.setLatLng(this._getNewDestinationOfHintMarker())}},setStyle(){let e={};L.extend(e,this.options.templineStyle),this.options[this._editableOption]&&(e.radius=0),this._layer?.setStyle(e),this._hintline?.setStyle(this.options.hintlineStyle)},_distanceCalculation(e,t){return this._map.project(e).distanceTo(this._map.project(t))}}),q.Circle=q.CircleMarker.extend({initialize(e){this._map=e,this._shape=`Circle`,this.toolbarButtonName=`drawCircle`,this._BaseCircleClass=L.Circle,this._minRadiusOption=`minRadiusCircle`,this._maxRadiusOption=`maxRadiusCircle`,this._editableOption=`resizeableCircle`,this._defaultRadius=100},_extendingEnable(){},_extendingDisable(){},_extendingCreateMarker(){},isRelevantMarker(){},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_distanceCalculation(e,t){return this._map.distance(e,t)}});var bn=class{constructor(e=[],t=xn){if(this.data=e,this.length=this.data.length,this.compare=t,this.length>0)for(let e=(this.length>>1)-1;e>=0;e--)this._down(e)}push(e){this.data.push(e),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;let e=this.data[0],t=this.data.pop();return this.length--,this.length>0&&(this.data[0]=t,this._down(0)),e}peek(){return this.data[0]}_up(e){let{data:t,compare:n}=this,r=t[e];for(;e>0;){let i=e-1>>1,a=t[i];if(n(r,a)>=0)break;t[e]=a,e=i}t[e]=r}_down(e){let{data:t,compare:n}=this,r=this.length>>1,i=t[e];for(;e<r;){let r=(e<<1)+1,a=t[r],o=r+1;if(o<this.length&&n(t[o],a)<0&&(r=o,a=t[o]),n(a,i)>=0)break;t[e]=a,e=r}t[e]=i}};function xn(e,t){return e<t?-1:e>t?1:0}function Sn(e,t){return e.p.x>t.p.x?1:e.p.x<t.p.x?-1:e.p.y===t.p.y||e.p.y>t.p.y?1:-1}function Cn(e,t){return e.rightSweepEvent.p.x>t.rightSweepEvent.p.x?1:e.rightSweepEvent.p.x<t.rightSweepEvent.p.x?-1:e.rightSweepEvent.p.y===t.rightSweepEvent.p.y||e.rightSweepEvent.p.y<t.rightSweepEvent.p.y?1:-1}var wn=class{constructor(e,t,n,r){this.p={x:e[0],y:e[1]},this.featureId=t,this.ringId=n,this.eventId=r,this.otherEvent=null,this.isLeftEndpoint=null}isSamePoint(e){return this.p.x===e.p.x&&this.p.y===e.p.y}};function Tn(e,t){if(e.type===`FeatureCollection`){let n=e.features;for(let e=0;e<n.length;e++)kn(n[e],t)}else kn(e,t)}var En=0,Dn=0,On=0;function kn(e,t){let n=e.type===`Feature`?e.geometry:e,r=n.coordinates;(n.type===`Polygon`||n.type===`MultiLineString`)&&(r=[r]),n.type===`LineString`&&(r=[[r]]);for(let e=0;e<r.length;e++)for(let n=0;n<r[e].length;n++){let i=r[e][n][0],a=null;Dn+=1;for(let o=0;o<r[e][n].length-1;o++){a=r[e][n][o+1];let s=new wn(i,En,Dn,On),c=new wn(a,En,Dn,On+1);s.otherEvent=c,c.otherEvent=s,Sn(s,c)>0?(c.isLeftEndpoint=!0,s.isLeftEndpoint=!1):(s.isLeftEndpoint=!0,c.isLeftEndpoint=!1),t.push(s),t.push(c),i=a,On+=1}}En+=1}var An=class{constructor(e){this.leftSweepEvent=e,this.rightSweepEvent=e.otherEvent}};function jn(e,t){if(e===null||t===null||e.leftSweepEvent.ringId===t.leftSweepEvent.ringId&&(e.rightSweepEvent.isSamePoint(t.leftSweepEvent)||e.rightSweepEvent.isSamePoint(t.leftSweepEvent)||e.rightSweepEvent.isSamePoint(t.rightSweepEvent)||e.leftSweepEvent.isSamePoint(t.leftSweepEvent)||e.leftSweepEvent.isSamePoint(t.rightSweepEvent)))return!1;let n=e.leftSweepEvent.p.x,r=e.leftSweepEvent.p.y,i=e.rightSweepEvent.p.x,a=e.rightSweepEvent.p.y,o=t.leftSweepEvent.p.x,s=t.leftSweepEvent.p.y,c=t.rightSweepEvent.p.x,l=t.rightSweepEvent.p.y,u=(l-s)*(i-n)-(c-o)*(a-r),d=(c-o)*(r-s)-(l-s)*(n-o),f=(i-n)*(r-s)-(a-r)*(n-o);if(u===0)return!1;let p=d/u,m=f/u;return p>=0&&p<=1&&m>=0&&m<=1?[n+p*(i-n),r+p*(a-r)]:!1}function Mn(e,t){t||=!1;let n=[],r=new bn([],Cn);for(;e.length;){let i=e.pop();if(i.isLeftEndpoint){let e=new An(i);for(let a=0;a<r.data.length;a++){let o=r.data[a];if(t&&o.leftSweepEvent.featureId===i.featureId)continue;let s=jn(e,o);s!==!1&&n.push(s)}r.push(e)}else i.isLeftEndpoint===!1&&r.pop()}return n}function Nn(e,t){let n=new bn([],Sn);return Tn(e,n),Mn(n,t)}var Pn=Nn;function Fn(e,t,n={}){let{removeDuplicates:r=!0,ignoreSelfIntersections:i=!0}=n,a=[];e.type===`FeatureCollection`?a=a.concat(e.features):e.type===`Feature`?a.push(e):(e.type===`LineString`||e.type===`Polygon`||e.type===`MultiLineString`||e.type===`MultiPolygon`)&&a.push(J(e)),t.type===`FeatureCollection`?a=a.concat(t.features):t.type===`Feature`?a.push(t):(t.type===`LineString`||t.type===`Polygon`||t.type===`MultiLineString`||t.type===`MultiPolygon`)&&a.push(J(t));let o=Pn(dn(a),i),s=[];if(r){let e={};o.forEach(t=>{let n=t.join(`,`);e[n]||(e[n]=!0,s.push(t))})}else s=o;return dn(s.map(e=>ln(e)))}var In=Fn,Ln=c(St(),1);function Rn(e,t,n){if(e!==null)for(var r,i,a,o,s,c,l,u=0,d=0,f,p=e.type,m=p===`FeatureCollection`,h=p===`Feature`,g=m?e.features.length:1,_=0;_<g;_++){l=m?e.features[_].geometry:h?e.geometry:e,f=l?l.type===`GeometryCollection`:!1,s=f?l.geometries.length:1;for(var v=0;v<s;v++){var y=0,b=0;if(o=f?l.geometries[v]:l,o!==null){c=o.coordinates;var x=o.type;switch(u=n&&(x===`Polygon`||x===`MultiPolygon`)?1:0,x){case null:break;case`Point`:if(t(c,d,_,y,b)===!1)return!1;d++,y++;break;case`LineString`:case`MultiPoint`:for(r=0;r<c.length;r++){if(t(c[r],d,_,y,b)===!1)return!1;d++,x===`MultiPoint`&&y++}x===`LineString`&&y++;break;case`Polygon`:case`MultiLineString`:for(r=0;r<c.length;r++){for(i=0;i<c[r].length-u;i++){if(t(c[r][i],d,_,y,b)===!1)return!1;d++}x===`MultiLineString`&&y++,x===`Polygon`&&b++}x===`Polygon`&&y++;break;case`MultiPolygon`:for(r=0;r<c.length;r++){for(b=0,i=0;i<c[r].length;i++){for(a=0;a<c[r][i].length-u;a++){if(t(c[r][i][a],d,_,y,b)===!1)return!1;d++}b++}y++}break;case`GeometryCollection`:for(r=0;r<o.geometries.length;r++)if(Rn(o.geometries[r],t,n)===!1)return!1;break;default:throw Error(`Unknown Geometry Type`)}}}}}function zn(e,t){if(e.type===`Feature`)t(e,0);else if(e.type===`FeatureCollection`)for(var n=0;n<e.features.length&&t(e.features[n],n)!==!1;n++);}function Bn(e,t,n){var r=n;return zn(e,function(e,i){r=i===0&&n===void 0?e:t(r,e,i)}),r}function Vn(e,t){var n,r,i,a,o,s,c,l,u,d,f=0,p=e.type===`FeatureCollection`,m=e.type===`Feature`,h=p?e.features.length:1;for(n=0;n<h;n++){for(s=p?e.features[n].geometry:m?e.geometry:e,l=p?e.features[n].properties:m?e.properties:{},u=p?e.features[n].bbox:m?e.bbox:void 0,d=p?e.features[n].id:m?e.id:void 0,c=s?s.type===`GeometryCollection`:!1,o=c?s.geometries.length:1,i=0;i<o;i++){if(a=c?s.geometries[i]:s,a===null){if(t(null,f,l,u,d)===!1)return!1;continue}switch(a.type){case`Point`:case`LineString`:case`MultiPoint`:case`Polygon`:case`MultiLineString`:case`MultiPolygon`:if(t(a,f,l,u,d)===!1)return!1;break;case`GeometryCollection`:for(r=0;r<a.geometries.length;r++)if(t(a.geometries[r],f,l,u,d)===!1)return!1;break;default:throw Error(`Unknown Geometry Type`)}}f++}}function Hn(e,t){Vn(e,function(e,n,r,i,a){var o=e===null?null:e.type;switch(o){case null:case`Point`:case`LineString`:case`Polygon`:return t(J(e,r,{bbox:i,id:a}),n,0)===!1?!1:void 0}var s;switch(o){case`MultiPoint`:s=`Point`;break;case`MultiLineString`:s=`LineString`;break;case`MultiPolygon`:s=`Polygon`;break}for(var c=0;c<e.coordinates.length;c++){var l=e.coordinates[c];if(t(J({type:s,coordinates:l},r),n,c)===!1)return!1}})}function Un(e,t={}){if(e.bbox!=null&&t.recompute!==!0)return e.bbox;let n=[1/0,1/0,-1/0,-1/0];return Rn(e,e=>{n[0]>e[0]&&(n[0]=e[0]),n[1]>e[1]&&(n[1]=e[1]),n[2]<e[0]&&(n[2]=e[0]),n[3]<e[1]&&(n[3]=e[1])}),n}function Wn(e){var t=new Ln.default(e);return t.insert=function(e){if(e.type!==`Feature`)throw Error(`invalid feature`);return e.bbox=e.bbox?e.bbox:Un(e),Ln.default.prototype.insert.call(this,e)},t.load=function(e){var t=[];return Array.isArray(e)?e.forEach(function(e){if(e.type!==`Feature`)throw Error(`invalid features`);e.bbox=e.bbox?e.bbox:Un(e),t.push(e)}):zn(e,function(e){if(e.type!==`Feature`)throw Error(`invalid features`);e.bbox=e.bbox?e.bbox:Un(e),t.push(e)}),Ln.default.prototype.load.call(this,t)},t.remove=function(e,t){if(e.type!==`Feature`)throw Error(`invalid feature`);return e.bbox=e.bbox?e.bbox:Un(e),Ln.default.prototype.remove.call(this,e,t)},t.clear=function(){return Ln.default.prototype.clear.call(this)},t.search=function(e){return dn(Ln.default.prototype.search.call(this,this.toBBox(e)))},t.collides=function(e){return Ln.default.prototype.collides.call(this,this.toBBox(e))},t.all=function(){return dn(Ln.default.prototype.all.call(this))},t.toJSON=function(){return Ln.default.prototype.toJSON.call(this)},t.fromJSON=function(e){return Ln.default.prototype.fromJSON.call(this,e)},t.toBBox=function(e){var t;if(e.bbox)t=e.bbox;else if(Array.isArray(e)&&e.length===4)t=e;else if(Array.isArray(e)&&e.length===6)t=[e[0],e[1],e[3],e[4]];else if(e.type===`Feature`)t=Un(e);else if(e.type===`FeatureCollection`)t=Un(e);else throw Error(`invalid geojson`);return{minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]}},t}function Gn(e,t){if(t??={},!gn(t))throw Error(`options is invalid`);var n=t.precision,r=t.coordinates,i=t.mutate;if(n=n==null||isNaN(n)?6:n,r=r==null||isNaN(r)?3:r,!e)throw Error(`<geojson> is required`);if(typeof n!=`number`)throw Error(`<precision> must be a number`);if(typeof r!=`number`)throw Error(`<coordinates> must be a number`);(i===!1||i===void 0)&&(e=JSON.parse(JSON.stringify(e)));var a=10**n;return Rn(e,function(e){Kn(e,a,r)}),e}function Kn(e,t,n){e.length>n&&e.splice(n,e.length);for(var r=0;r<e.length;r++)e[r]=Math.round(e[r]*t)/t;return e}function qn(e){if(!e)throw Error(`coord is required`);if(!Array.isArray(e)){if(e.type===`Feature`&&e.geometry!==null&&e.geometry.type===`Point`)return[...e.geometry.coordinates];if(e.type===`Point`)return[...e.coordinates]}if(Array.isArray(e)&&e.length>=2&&!Array.isArray(e[0])&&!Array.isArray(e[1]))return[...e];throw Error(`coord must be GeoJSON Point or an Array of numbers`)}function Jn(e){if(Array.isArray(e))return e;if(e.type===`Feature`){if(e.geometry!==null)return e.geometry.coordinates}else if(e.coordinates)return e.coordinates;throw Error(`coords must be GeoJSON Feature, Geometry Object or an Array`)}function Yn(e){return e.type===`Feature`?e.geometry:e}function Xn(e,t){return e.type===`FeatureCollection`?`FeatureCollection`:e.type===`GeometryCollection`?`GeometryCollection`:e.type===`Feature`&&e.geometry!==null?e.geometry.type:e.type}function Zn(e){if(!e)throw Error(`geojson is required`);let t=[];return Hn(e,e=>{Qn(e,t)}),dn(t)}function Qn(e,t){let n=[],r=e.geometry;if(r!==null){switch(r.type){case`Polygon`:n=Jn(r);break;case`LineString`:n=[Jn(r)]}n.forEach(n=>{$n(n,e.properties).forEach(e=>{e.id=t.length,t.push(e)})})}}function $n(e,t){let n=[];return e.reduce((e,r)=>{let i=un([e,r],t);return i.bbox=er(e,r),n.push(i),r}),n}function er(e,t){let n=e[0],r=e[1],i=t[0],a=t[1];return[n<i?n:i,r<a?r:a,n>i?n:i,r>a?r:a]}function tr(e,t,n={}){var r=qn(e),i=qn(t),a=mn(i[1]-r[1]),o=mn(i[0]-r[0]),s=mn(r[1]),c=mn(i[1]),l=Math.sin(a/2)**2+Math.sin(o/2)**2*Math.cos(s)*Math.cos(c);return fn(2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l)),n.units)}var nr=Object.defineProperty,rr=Object.defineProperties,ir=Object.getOwnPropertyDescriptors,ar=Object.getOwnPropertySymbols,or=Object.prototype.hasOwnProperty,sr=Object.prototype.propertyIsEnumerable,cr=(e,t,n)=>t in e?nr(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,lr=(e,t)=>{for(var n in t||={})or.call(t,n)&&cr(e,n,t[n]);if(ar)for(var n of ar(t))sr.call(t,n)&&cr(e,n,t[n]);return e},ur=(e,t)=>rr(e,ir(t));function dr(e,t,n={}){if(!e||!t)throw Error(`lines and pt are required arguments`);let r=qn(t),i=ln([1/0,1/0],{dist:1/0,index:-1,multiFeatureIndex:-1,location:-1}),a=0;return Hn(e,function(e,o,s){let c=Jn(e);for(let e=0;e<c.length-1;e++){let o=ln(c[e]),l=qn(o),u=ln(c[e+1]),d=qn(u),f=tr(o,u,n),p,m;d[0]===r[0]&&d[1]===r[1]?[p,m]=[d,!0]:l[0]===r[0]&&l[1]===r[1]?[p,m]=[l,!1]:[p,m]=vr(l,d,r);let h=ln(p,{dist:tr(t,p,n),multiFeatureIndex:s,location:a+tr(o,p,n)});h.properties.dist<i.properties.dist&&(i=ur(lr({},h),{properties:ur(lr({},h.properties),{index:m?e+1:e})})),a+=f}}),i}function fr(e,t){let[n,r,i]=e,[a,o,s]=t;return n*a+r*o+i*s}function pr(e,t){let[n,r,i]=e,[a,o,s]=t;return[r*s-i*o,i*a-n*s,n*o-r*a]}function mr(e){return Math.sqrt(e[0]**2+e[1]**2+e[2]**2)}function hr(e){let t=mr(e);return[e[0]/t,e[1]/t,e[2]/t]}function gr(e){let t=mn(e[1]),n=mn(e[0]);return[Math.cos(t)*Math.cos(n),Math.cos(t)*Math.sin(n),Math.sin(t)]}function _r(e){let[t,n,r]=e,i=Math.min(Math.max(r,-1),1),a=pn(Math.asin(i));return[pn(Math.atan2(n,t)),a]}function vr(e,t,n){let r=gr(e),i=gr(t),a=gr(n),o=pr(r,i);if(o[0]===0&&o[1]===0&&o[2]===0)return fr(r,i)>0?[[...t],!0]:[[...n],!1];let s=pr(o,a);if(s[0]===0&&s[1]===0&&s[2]===0)return[[...t],!0];let c=hr(pr(s,o)),l=[-c[0],-c[1],-c[2]],u=fr(a,c)>fr(a,l)?c:l,d=hr(o),f=fr(pr(r,u),d),p=fr(pr(u,i),d);return f>=0&&p>=0?[_r(u),!1]:fr(r,a)>fr(i,a)?[[...e],!1]:[[...t],!0]}function yr(e,t){if(!e)throw Error(`line is required`);if(!t)throw Error(`splitter is required`);var n=Xn(e),r=Xn(t);if(n!==`LineString`)throw Error(`line must be LineString`);if(r===`FeatureCollection`)throw Error(`splitter cannot be a FeatureCollection`);if(r===`GeometryCollection`)throw Error(`splitter cannot be a GeometryCollection`);var i=Gn(t,{precision:7});switch(r){case`Point`:return xr(e,i);case`MultiPoint`:return br(e,i);case`LineString`:case`MultiLineString`:case`Polygon`:case`MultiPolygon`:return br(e,Fn(e,i,{ignoreSelfIntersections:!0}))}}function br(e,t){var n=[],r=Wn();return Hn(t,function(t){if(n.forEach(function(e,t){e.id=t}),!n.length)n=xr(e,t).features,r.load(dn(n));else{var i=r.search(t);if(i.features.length){var a=Sr(t,i);n=n.filter(function(e){return e.id!==a.id}),r.remove(a),zn(xr(a,t),function(e){n.push(e),r.insert(e)})}}}),dn(n)}function xr(e,t){var n=[],r=Jn(e)[0],i=Jn(e)[e.geometry.coordinates.length-1];if(Cr(r,qn(t))||Cr(i,qn(t)))return dn([e]);var a=Wn(),o=Zn(e);a.load(o);var s=a.search(t);if(!s.features.length)return dn([e]);var c=Sr(t,s),l=Bn(o,function(e,r,i){var a=Jn(r)[1],o=qn(t);return i===c.id?(e.push(o),n.push(un(e)),Cr(o,a)?[o]:[o,a]):(e.push(a),e)},[r]);return l.length>1&&n.push(un(l)),dn(n)}function Sr(e,t){if(!t.features.length)throw Error(`lines must contain features`);if(t.features.length===1)return t.features[0];var n,r=1/0;return zn(t,function(t){var i=dr(t,e).properties.dist;i<r&&(n=t,r=i)}),n}function Cr(e,t){return e[0]===t[0]&&e[1]===t[1]}var wr=yr,Y=11102230246251565e-32,Tr=134217729,Er=(3+8*Y)*Y;function Dr(e,t,n,r,i){let a,o,s,c,l=t[0],u=r[0],d=0,f=0;u>l==u>-l?(a=l,l=t[++d]):(a=u,u=r[++f]);let p=0;if(d<e&&f<n)for(u>l==u>-l?(o=l+a,s=a-(o-l),l=t[++d]):(o=u+a,s=a-(o-u),u=r[++f]),a=o,s!==0&&(i[p++]=s);d<e&&f<n;)u>l==u>-l?(o=a+l,c=o-a,s=a-(o-c)+(l-c),l=t[++d]):(o=a+u,c=o-a,s=a-(o-c)+(u-c),u=r[++f]),a=o,s!==0&&(i[p++]=s);for(;d<e;)o=a+l,c=o-a,s=a-(o-c)+(l-c),l=t[++d],a=o,s!==0&&(i[p++]=s);for(;f<n;)o=a+u,c=o-a,s=a-(o-c)+(u-c),u=r[++f],a=o,s!==0&&(i[p++]=s);return(a!==0||p===0)&&(i[p++]=a),p}function Or(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function X(e){return new Float64Array(e)}var kr=(3+16*Y)*Y,Ar=(2+12*Y)*Y,jr=(9+64*Y)*Y*Y,Mr=X(4),Nr=X(8),Pr=X(12),Fr=X(16),Ir=X(4);function Lr(e,t,n,r,i,a,o){let s,c,l,u,d,f,p,m,h,g,_,v,y,b,x,S,C,w,T=e-i,E=n-i,D=t-a,O=r-a;b=T*O,f=Tr*T,p=f-(f-T),m=T-p,f=Tr*O,h=f-(f-O),g=O-h,x=m*g-(b-p*h-m*h-p*g),S=D*E,f=Tr*D,p=f-(f-D),m=D-p,f=Tr*E,h=f-(f-E),g=E-h,C=m*g-(S-p*h-m*h-p*g),_=x-C,d=x-_,Mr[0]=x-(_+d)+(d-C),v=b+_,d=v-b,y=b-(v-d)+(_-d),_=y-S,d=y-_,Mr[1]=y-(_+d)+(d-S),w=v+_,d=w-v,Mr[2]=v-(w-d)+(_-d),Mr[3]=w;let k=Or(4,Mr),A=Ar*o;if(k>=A||-k>=A||(d=e-T,s=e-(T+d)+(d-i),d=n-E,l=n-(E+d)+(d-i),d=t-D,c=t-(D+d)+(d-a),d=r-O,u=r-(O+d)+(d-a),s===0&&c===0&&l===0&&u===0)||(A=jr*o+Er*Math.abs(k),k+=T*u+O*s-(D*l+E*c),k>=A||-k>=A))return k;b=s*O,f=Tr*s,p=f-(f-s),m=s-p,f=Tr*O,h=f-(f-O),g=O-h,x=m*g-(b-p*h-m*h-p*g),S=c*E,f=Tr*c,p=f-(f-c),m=c-p,f=Tr*E,h=f-(f-E),g=E-h,C=m*g-(S-p*h-m*h-p*g),_=x-C,d=x-_,Ir[0]=x-(_+d)+(d-C),v=b+_,d=v-b,y=b-(v-d)+(_-d),_=y-S,d=y-_,Ir[1]=y-(_+d)+(d-S),w=v+_,d=w-v,Ir[2]=v-(w-d)+(_-d),Ir[3]=w;let ee=Dr(4,Mr,4,Ir,Nr);b=T*u,f=Tr*T,p=f-(f-T),m=T-p,f=Tr*u,h=f-(f-u),g=u-h,x=m*g-(b-p*h-m*h-p*g),S=D*l,f=Tr*D,p=f-(f-D),m=D-p,f=Tr*l,h=f-(f-l),g=l-h,C=m*g-(S-p*h-m*h-p*g),_=x-C,d=x-_,Ir[0]=x-(_+d)+(d-C),v=b+_,d=v-b,y=b-(v-d)+(_-d),_=y-S,d=y-_,Ir[1]=y-(_+d)+(d-S),w=v+_,d=w-v,Ir[2]=v-(w-d)+(_-d),Ir[3]=w;let j=Dr(ee,Nr,4,Ir,Pr);return b=s*u,f=Tr*s,p=f-(f-s),m=s-p,f=Tr*u,h=f-(f-u),g=u-h,x=m*g-(b-p*h-m*h-p*g),S=c*l,f=Tr*c,p=f-(f-c),m=c-p,f=Tr*l,h=f-(f-l),g=l-h,C=m*g-(S-p*h-m*h-p*g),_=x-C,d=x-_,Ir[0]=x-(_+d)+(d-C),v=b+_,d=v-b,y=b-(v-d)+(_-d),_=y-S,d=y-_,Ir[1]=y-(_+d)+(d-S),w=v+_,d=w-v,Ir[2]=v-(w-d)+(_-d),Ir[3]=w,Fr[Dr(j,Pr,4,Ir,Fr)-1]}function Rr(e,t,n,r,i,a){let o=(t-a)*(n-i),s=(e-i)*(r-a),c=o-s,l=Math.abs(o+s);return Math.abs(c)>=kr*l?c:-Lr(e,t,n,r,i,a,l)}(7+56*Y)*Y,(3+28*Y)*Y,(26+288*Y)*Y*Y,X(4),X(4),X(4),X(4),X(4),X(4),X(4),X(4),X(4),X(8),X(8),X(8),X(4),X(8),X(8),X(8),X(12),X(192),X(192),(10+96*Y)*Y,(4+48*Y)*Y,(44+576*Y)*Y*Y,X(4),X(4),X(4),X(4),X(4),X(4),X(4),X(4),X(8),X(8),X(8),X(8),X(8),X(8),X(8),X(8),X(8),X(4),X(4),X(4),X(8),X(16),X(16),X(16),X(32),X(32),X(48),X(64),X(1152),X(1152),(16+224*Y)*Y,(5+72*Y)*Y,(71+1408*Y)*Y*Y,X(4),X(4),X(4),X(4),X(4),X(4),X(4),X(4),X(4),X(4),X(24),X(24),X(24),X(24),X(24),X(24),X(24),X(24),X(24),X(24),X(1152),X(1152),X(1152),X(1152),X(1152),X(2304),X(2304),X(3456),X(5760),X(8),X(8),X(8),X(16),X(24),X(48),X(48),X(96),X(192),X(384),X(384),X(384),X(768),X(96),X(96),X(96),X(1152);function zr(e,t){var n,r,i=0,a,o,s,c,l,u,d,f=e[0],p=e[1],m=t.length;for(n=0;n<m;n++){r=0;var h=t[n],g=h.length-1;if(u=h[0],u[0]!==h[g][0]&&u[1]!==h[g][1])throw Error(`First and last coordinates in a ring must be the same`);for(o=u[0]-f,s=u[1]-p;r<g;r++){if(d=h[r+1],c=d[0]-f,l=d[1]-p,s===0&&l===0){if(c<=0&&o>=0||o<=0&&c>=0)return 0}else if(l>=0&&s<=0||l<=0&&s>=0){if(a=Rr(o,c,s,l,0,0),a===0)return 0;(a>0&&l>0&&s<=0||a<0&&l<=0&&s>0)&&i++}u=d,s=l,o=c}}return i%2!=0}function Br(e,t,n={}){if(!e)throw Error(`point is required`);if(!t)throw Error(`polygon is required`);let r=qn(e),i=Yn(t),a=i.type,o=t.bbox,s=i.coordinates;if(o&&Vr(r,o)===!1)return!1;a===`Polygon`&&(s=[s]);let c=!1;for(var l=0;l<s.length;++l){let e=zr(r,s[l]);if(e===0)return!n.ignoreBoundary;e&&(c=!0)}return c}function Vr(e,t){return t[0]<=e[0]&&t[1]<=e[1]&&t[2]>=e[0]&&t[3]>=e[1]}function Hr(e,t,n={}){let r=qn(e),i=Jn(t);for(let e=0;e<i.length-1;e++){let t=!1;if(n.ignoreEndVertices&&(e===0&&(t=`start`),e===i.length-2&&(t=`end`),e===0&&e+1===i.length-1&&(t=`both`)),Ur(i[e],i[e+1],r,t,typeof n.epsilon>`u`?null:n.epsilon))return!0}return!1}function Ur(e,t,n,r,i){let a=n[0],o=n[1],s=e[0],c=e[1],l=t[0],u=t[1],d=n[0]-s,f=n[1]-c,p=l-s,m=u-c,h=d*m-f*p;if(i!==null){if(Math.abs(h)>i)return!1}else if(h!==0)return!1;if(Math.abs(p)===Math.abs(m)&&Math.abs(p)===0)return r?!1:n[0]===e[0]&&n[1]===e[1];if(r){if(r===`start`)return Math.abs(p)>=Math.abs(m)?p>0?s<a&&a<=l:l<=a&&a<s:m>0?c<o&&o<=u:u<=o&&o<c;if(r===`end`)return Math.abs(p)>=Math.abs(m)?p>0?s<=a&&a<l:l<a&&a<=s:m>0?c<=o&&o<u:u<o&&o<=c;if(r===`both`)return Math.abs(p)>=Math.abs(m)?p>0?s<a&&a<l:l<a&&a<s:m>0?c<o&&o<u:u<o&&o<c}else return Math.abs(p)>=Math.abs(m)?p>0?s<=a&&a<=l:l<=a&&a<=s:m>0?c<=o&&o<=u:u<=o&&o<=c;return!1}function Wr(e,t){let n=Yn(e),r=Yn(t),i=n.type,a=r.type,o=n.coordinates,s=r.coordinates;switch(i){case`Point`:switch(a){case`Point`:return ei(o,s);default:throw Error(`feature2 `+a+` geometry not supported`)}case`MultiPoint`:switch(a){case`Point`:return Kr(n,r);case`MultiPoint`:return qr(n,r);default:throw Error(`feature2 `+a+` geometry not supported`)}case`LineString`:switch(a){case`Point`:return Hr(r,n,{ignoreEndVertices:!0});case`LineString`:return Xr(n,r);case`MultiPoint`:return Jr(n,r);default:throw Error(`feature2 `+a+` geometry not supported`)}case`Polygon`:switch(a){case`Point`:return Br(r,n,{ignoreBoundary:!0});case`LineString`:return Zr(n,r);case`Polygon`:return Qr(n,r);case`MultiPoint`:return Yr(n,r);default:throw Error(`feature2 `+a+` geometry not supported`)}case`MultiPolygon`:switch(a){case`Polygon`:return Gr(n,r);default:throw Error(`feature2 `+a+` geometry not supported`)}default:throw Error(`feature1 `+i+` geometry not supported`)}}function Gr(e,t){return e.coordinates.some(e=>Qr({type:`Polygon`,coordinates:e},t))}function Kr(e,t){let n,r=!1;for(n=0;n<e.coordinates.length;n++)if(ei(e.coordinates[n],t.coordinates)){r=!0;break}return r}function qr(e,t){for(let n of t.coordinates){let t=!1;for(let r of e.coordinates)if(ei(n,r)){t=!0;break}if(!t)return!1}return!0}function Jr(e,t){let n=!1;for(let r of t.coordinates)if(Hr(r,e,{ignoreEndVertices:!0})&&(n=!0),!Hr(r,e))return!1;return!!n}function Yr(e,t){for(let n of t.coordinates)if(!Br(n,e,{ignoreBoundary:!0}))return!1;return!0}function Xr(e,t){let n=!1;for(let r of t.coordinates)if(Hr({type:`Point`,coordinates:r},e,{ignoreEndVertices:!0})&&(n=!0),!Hr({type:`Point`,coordinates:r},e,{ignoreEndVertices:!1}))return!1;return n}function Zr(e,t){let n=!1,r=0;if(!$r(Un(e),Un(t)))return!1;for(;r<t.coordinates.length-1;r++)if(Br({type:`Point`,coordinates:ti(t.coordinates[r],t.coordinates[r+1])},e,{ignoreBoundary:!0})){n=!0;break}return n}function Qr(e,t){if(e.type===`Feature`&&e.geometry===null||t.type===`Feature`&&t.geometry===null||!$r(Un(e),Un(t)))return!1;let n=Yn(t).coordinates;for(let t of n)for(let n of t)if(!Br(n,e))return!1;return!0}function $r(e,t){return!(e[0]>t[0]||e[2]<t[2]||e[1]>t[1]||e[3]<t[3])}function ei(e,t){return e[0]===t[0]&&e[1]===t[1]}function ti(e,t){return[(e[0]+t[0])/2,(e[1]+t[1])/2]}var ni=Wr,ri=c(xt()),ii=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,ai=Math.ceil,oi=Math.floor,si=`[BigNumber Error] `,ci=si+`Number primitive has more than 15 significant digits: `,li=0x5af3107a4000,Z=14,ui=9007199254740991,di=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,0xe8d4a51000,0x9184e72a000],fi=1e7,pi=1e9;function mi(e){var t,n,r,i=v.prototype={constructor:v,toString:null,valueOf:null},a=new v(1),o=20,s=4,c=-7,l=21,u=-1e7,d=1e7,f=!1,p=1,m=0,h={prefix:``,groupSize:3,secondaryGroupSize:0,groupSeparator:`,`,decimalSeparator:`.`,fractionGroupSize:0,fractionGroupSeparator:`\xA0`,suffix:``},g=`0123456789abcdefghijklmnopqrstuvwxyz`,_=!0;function v(e,t){var i,a,c,l,f,p,m,h,y=this;if(!(y instanceof v))return new v(e,t);if(t==null){if(e&&e._isBigNumber===!0){y.s=e.s,!e.c||e.e>d?y.c=y.e=null:e.e<u?y.c=[y.e=0]:(y.e=e.e,y.c=e.c.slice());return}if((p=typeof e==`number`)&&e*0==0){if(y.s=1/e<0?(e=-e,-1):1,e===~~e){for(l=0,f=e;f>=10;f/=10,l++);l>d?y.c=y.e=null:(y.e=l,y.c=[e]);return}h=String(e)}else{if(!ii.test(h=String(e)))return r(y,h,p);y.s=h.charCodeAt(0)==45?(h=h.slice(1),-1):1}(l=h.indexOf(`.`))>-1&&(h=h.replace(`.`,``)),(f=h.search(/e/i))>0?(l<0&&(l=f),l+=+h.slice(f+1),h=h.substring(0,f)):l<0&&(l=h.length)}else{if(Q(t,2,g.length,`Base`),t==10&&_)return y=new v(e),S(y,o+y.e+1,s);if(h=String(e),p=typeof e==`number`){if(e*0!=0)return r(y,h,p,t);if(y.s=1/e<0?(h=h.slice(1),-1):1,v.DEBUG&&h.replace(/^0\.0*|\./,``).length>15)throw Error(ci+e)}else y.s=h.charCodeAt(0)===45?(h=h.slice(1),-1):1;for(i=g.slice(0,t),l=f=0,m=h.length;f<m;f++)if(i.indexOf(a=h.charAt(f))<0){if(a==`.`){if(f>l){l=m;continue}}else if(!c&&(h==h.toUpperCase()&&(h=h.toLowerCase())||h==h.toLowerCase()&&(h=h.toUpperCase()))){c=!0,f=-1,l=0;continue}return r(y,String(e),p,t)}p=!1,h=n(h,t,10,y.s),(l=h.indexOf(`.`))>-1?h=h.replace(`.`,``):l=h.length}for(f=0;h.charCodeAt(f)===48;f++);for(m=h.length;h.charCodeAt(--m)===48;);if(h=h.slice(f,++m)){if(m-=f,p&&v.DEBUG&&m>15&&(e>ui||e!==oi(e)))throw Error(ci+y.s*e);if((l=l-f-1)>d)y.c=y.e=null;else if(l<u)y.c=[y.e=0];else{if(y.e=l,y.c=[],f=(l+1)%Z,l<0&&(f+=Z),f<m){for(f&&y.c.push(+h.slice(0,f)),m-=Z;f<m;)y.c.push(+h.slice(f,f+=Z));f=Z-(h=h.slice(f)).length}else f-=m;for(;f--;h+=`0`);y.c.push(+h)}}else y.c=[y.e=0]}v.clone=mi,v.ROUND_UP=0,v.ROUND_DOWN=1,v.ROUND_CEIL=2,v.ROUND_FLOOR=3,v.ROUND_HALF_UP=4,v.ROUND_HALF_DOWN=5,v.ROUND_HALF_EVEN=6,v.ROUND_HALF_CEIL=7,v.ROUND_HALF_FLOOR=8,v.EUCLID=9,v.config=v.set=function(e){var t,n;if(e!=null)if(typeof e==`object`){if(e.hasOwnProperty(t=`DECIMAL_PLACES`)&&(n=e[t],Q(n,0,pi,t),o=n),e.hasOwnProperty(t=`ROUNDING_MODE`)&&(n=e[t],Q(n,0,8,t),s=n),e.hasOwnProperty(t=`EXPONENTIAL_AT`)&&(n=e[t],n&&n.pop?(Q(n[0],-pi,0,t),Q(n[1],0,pi,t),c=n[0],l=n[1]):(Q(n,-pi,pi,t),c=-(l=n<0?-n:n))),e.hasOwnProperty(t=`RANGE`))if(n=e[t],n&&n.pop)Q(n[0],-pi,-1,t),Q(n[1],1,pi,t),u=n[0],d=n[1];else if(Q(n,-pi,pi,t),n)u=-(d=n<0?-n:n);else throw Error(si+t+` cannot be zero: `+n);if(e.hasOwnProperty(t=`CRYPTO`))if(n=e[t],n===!!n)if(n)if(typeof crypto<`u`&&crypto&&(crypto.getRandomValues||crypto.randomBytes))f=n;else throw f=!n,Error(si+`crypto unavailable`);else f=n;else throw Error(si+t+` not true or false: `+n);if(e.hasOwnProperty(t=`MODULO_MODE`)&&(n=e[t],Q(n,0,9,t),p=n),e.hasOwnProperty(t=`POW_PRECISION`)&&(n=e[t],Q(n,0,pi,t),m=n),e.hasOwnProperty(t=`FORMAT`))if(n=e[t],typeof n==`object`)h=n;else throw Error(si+t+` not an object: `+n);if(e.hasOwnProperty(t=`ALPHABET`))if(n=e[t],typeof n==`string`&&!/^.?$|[+\-.\s]|(.).*\1/.test(n))_=n.slice(0,10)==`0123456789`,g=n;else throw Error(si+t+` invalid: `+n)}else throw Error(si+`Object expected: `+e);return{DECIMAL_PLACES:o,ROUNDING_MODE:s,EXPONENTIAL_AT:[c,l],RANGE:[u,d],CRYPTO:f,MODULO_MODE:p,POW_PRECISION:m,FORMAT:h,ALPHABET:g}},v.isBigNumber=function(e){if(!e||e._isBigNumber!==!0)return!1;if(!v.DEBUG)return!0;var t,n,r=e.c,i=e.e,a=e.s;t:if({}.toString.call(r)==`[object Array]`){if((a===1||a===-1)&&i>=-pi&&i<=pi&&i===oi(i)){if(r[0]===0){if(i===0&&r.length===1)return!0;break t}if(t=(i+1)%Z,t<1&&(t+=Z),String(r[0]).length==t){for(t=0;t<r.length;t++)if(n=r[t],n<0||n>=li||n!==oi(n))break t;if(n!==0)return!0}}}else if(r===null&&i===null&&(a===null||a===1||a===-1))return!0;throw Error(si+`Invalid BigNumber: `+e)},v.maximum=v.max=function(){return b(arguments,-1)},v.minimum=v.min=function(){return b(arguments,1)},v.random=(function(){var e=9007199254740992,t=Math.random()*e&2097151?function(){return oi(Math.random()*e)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(e){var n,r,i,s,c,l=0,u=[],d=new v(a);if(e==null?e=o:Q(e,0,pi),s=ai(e/Z),f)if(crypto.getRandomValues){for(n=crypto.getRandomValues(new Uint32Array(s*=2));l<s;)c=n[l]*131072+(n[l+1]>>>11),c>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),n[l]=r[0],n[l+1]=r[1]):(u.push(c%0x5af3107a4000),l+=2);l=s/2}else if(crypto.randomBytes){for(n=crypto.randomBytes(s*=7);l<s;)c=(n[l]&31)*281474976710656+n[l+1]*1099511627776+n[l+2]*4294967296+n[l+3]*16777216+(n[l+4]<<16)+(n[l+5]<<8)+n[l+6],c>=9e15?crypto.randomBytes(7).copy(n,l):(u.push(c%0x5af3107a4000),l+=7);l=s/7}else throw f=!1,Error(si+`crypto unavailable`);if(!f)for(;l<s;)c=t(),c<9e15&&(u[l++]=c%0x5af3107a4000);for(s=u[--l],e%=Z,s&&e&&(c=di[Z-e],u[l]=oi(s/c)*c);u[l]===0;u.pop(),l--);if(l<0)u=[i=0];else{for(i=-1;u[0]===0;u.splice(0,1),i-=Z);for(l=1,c=u[0];c>=10;c/=10,l++);l<Z&&(i-=Z-l)}return d.e=i,d.c=u,d}})(),v.sum=function(){for(var e=1,t=arguments,n=new v(t[0]);e<t.length;)n=n.plus(t[e++]);return n},n=(function(){var e=`0123456789`;function n(e,t,n,r){for(var i,a=[0],o,s=0,c=e.length;s<c;){for(o=a.length;o--;a[o]*=t);for(a[0]+=r.indexOf(e.charAt(s++)),i=0;i<a.length;i++)a[i]>n-1&&(a[i+1]??(a[i+1]=0),a[i+1]+=a[i]/n|0,a[i]%=n)}return a.reverse()}return function(r,i,a,c,l){var u,d,f,p,h,_,y,b,x=r.indexOf(`.`),S=o,C=s;for(x>=0&&(p=m,m=0,r=r.replace(`.`,``),b=new v(i),_=b.pow(r.length-x),m=p,b.c=n(bi(gi(_.c),_.e,`0`),10,a,e),b.e=b.c.length),y=n(r,i,a,l?(u=g,e):(u=e,g)),f=p=y.length;y[--p]==0;y.pop());if(!y[0])return u.charAt(0);if(x<0?--f:(_.c=y,_.e=f,_.s=c,_=t(_,b,S,C,a),y=_.c,h=_.r,f=_.e),d=f+S+1,x=y[d],p=a/2,h=h||d<0||y[d+1]!=null,h=C<4?(x!=null||h)&&(C==0||C==(_.s<0?3:2)):x>p||x==p&&(C==4||h||C==6&&y[d-1]&1||C==(_.s<0?8:7)),d<1||!y[0])r=h?bi(u.charAt(1),-S,u.charAt(0)):u.charAt(0);else{if(y.length=d,h)for(--a;++y[--d]>a;)y[d]=0,d||(++f,y=[1].concat(y));for(p=y.length;!y[--p];);for(x=0,r=``;x<=p;r+=u.charAt(y[x++]));r=bi(r,f,u.charAt(0))}return r}})(),t=(function(){function e(e,t,n){var r,i,a,o,s=0,c=e.length,l=t%fi,u=t/fi|0;for(e=e.slice();c--;)a=e[c]%fi,o=e[c]/fi|0,r=u*a+o*l,i=l*a+r%fi*fi+s,s=(i/n|0)+(r/fi|0)+u*o,e[c]=i%n;return s&&(e=[s].concat(e)),e}function t(e,t,n,r){var i,a;if(n!=r)a=n>r?1:-1;else for(i=a=0;i<n;i++)if(e[i]!=t[i]){a=e[i]>t[i]?1:-1;break}return a}function n(e,t,n,r){for(var i=0;n--;)e[n]-=i,i=e[n]<t[n]?1:0,e[n]=i*r+e[n]-t[n];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(r,i,a,o,s){var c,l,u,d,f,p,m,h,g,_,y,b,x,C,w,T,E,D=r.s==i.s?1:-1,O=r.c,k=i.c;if(!O||!O[0]||!k||!k[0])return new v(!r.s||!i.s||(O?k&&O[0]==k[0]:!k)?NaN:O&&O[0]==0||!k?D*0:D/0);for(h=new v(D),g=h.c=[],l=r.e-i.e,D=a+l+1,s||(s=li,l=hi(r.e/Z)-hi(i.e/Z),D=D/Z|0),u=0;k[u]==(O[u]||0);u++);if(k[u]>(O[u]||0)&&l--,D<0)g.push(1),d=!0;else{for(C=O.length,T=k.length,u=0,D+=2,f=oi(s/(k[0]+1)),f>1&&(k=e(k,f,s),O=e(O,f,s),T=k.length,C=O.length),x=T,_=O.slice(0,T),y=_.length;y<T;_[y++]=0);E=k.slice(),E=[0].concat(E),w=k[0],k[1]>=s/2&&w++;do{if(f=0,c=t(k,_,T,y),c<0){if(b=_[0],T!=y&&(b=b*s+(_[1]||0)),f=oi(b/w),f>1)for(f>=s&&(f=s-1),p=e(k,f,s),m=p.length,y=_.length;t(p,_,m,y)==1;)f--,n(p,T<m?E:k,m,s),m=p.length,c=1;else f==0&&(c=f=1),p=k.slice(),m=p.length;if(m<y&&(p=[0].concat(p)),n(_,p,y,s),y=_.length,c==-1)for(;t(k,_,T,y)<1;)f++,n(_,T<y?E:k,y,s),y=_.length}else c===0&&(f++,_=[0]);g[u++]=f,_[0]?_[y++]=O[x]||0:(_=[O[x]],y=1)}while((x++<C||_[0]!=null)&&D--);d=_[0]!=null,g[0]||g.splice(0,1)}if(s==li){for(u=1,D=g[0];D>=10;D/=10,u++);S(h,a+(h.e=u+l*Z-1)+1,o,d)}else h.e=l,h.r=+d;return h}})();function y(e,t,n,r){var i,a,o,u,d;if(n==null?n=s:Q(n,0,8),!e.c)return e.toString();if(i=e.c[0],o=e.e,t==null)d=gi(e.c),d=r==1||r==2&&(o<=c||o>=l)?yi(d,o):bi(d,o,`0`);else if(e=S(new v(e),t,n),a=e.e,d=gi(e.c),u=d.length,r==1||r==2&&(t<=a||a<=c)){for(;u<t;d+=`0`,u++);d=yi(d,a)}else if(t-=o+(r===2&&a>o),d=bi(d,a,`0`),a+1>u){if(--t>0)for(d+=`.`;t--;d+=`0`);}else if(t+=a-u,t>0)for(a+1==u&&(d+=`.`);t--;d+=`0`);return e.s<0&&i?`-`+d:d}function b(e,t){for(var n,r,i=1,a=new v(e[0]);i<e.length;i++)r=new v(e[i]),(!r.s||(n=_i(a,r))===t||n===0&&a.s===t)&&(a=r);return a}function x(e,t,n){for(var r=1,i=t.length;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,r++);return(n=r+n*Z-1)>d?e.c=e.e=null:n<u?e.c=[e.e=0]:(e.e=n,e.c=t),e}r=(function(){var e=/^(-?)0([xbo])(?=\w[\w.]*$)/i,t=/^([^.]+)\.$/,n=/^\.([^.]+)$/,r=/^-?(Infinity|NaN)$/,i=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(a,o,s,c){var l,u=s?o:o.replace(i,``);if(r.test(u))a.s=isNaN(u)?null:u<0?-1:1;else{if(!s&&(u=u.replace(e,function(e,t,n){return l=(n=n.toLowerCase())==`x`?16:n==`b`?2:8,!c||c==l?t:e}),c&&(l=c,u=u.replace(t,`$1`).replace(n,`0.$1`)),o!=u))return new v(u,l);if(v.DEBUG)throw Error(si+`Not a`+(c?` base `+c:``)+` number: `+o);a.s=null}a.c=a.e=null}})();function S(e,t,n,r){var i,a,o,s,c,l,f,p=e.c,m=di;if(p){t:{for(i=1,s=p[0];s>=10;s/=10,i++);if(a=t-i,a<0)a+=Z,o=t,c=p[l=0],f=oi(c/m[i-o-1]%10);else if(l=ai((a+1)/Z),l>=p.length)if(r){for(;p.length<=l;p.push(0));c=f=0,i=1,a%=Z,o=a-Z+1}else break t;else{for(c=s=p[l],i=1;s>=10;s/=10,i++);a%=Z,o=a-Z+i,f=o<0?0:oi(c/m[i-o-1]%10)}if(r=r||t<0||p[l+1]!=null||(o<0?c:c%m[i-o-1]),r=n<4?(f||r)&&(n==0||n==(e.s<0?3:2)):f>5||f==5&&(n==4||r||n==6&&(a>0?o>0?c/m[i-o]:0:p[l-1])%10&1||n==(e.s<0?8:7)),t<1||!p[0])return p.length=0,r?(t-=e.e+1,p[0]=m[(Z-t%Z)%Z],e.e=-t||0):p[0]=e.e=0,e;if(a==0?(p.length=l,s=1,l--):(p.length=l+1,s=m[Z-a],p[l]=o>0?oi(c/m[i-o]%m[o])*s:0),r)for(;;)if(l==0){for(a=1,o=p[0];o>=10;o/=10,a++);for(o=p[0]+=s,s=1;o>=10;o/=10,s++);a!=s&&(e.e++,p[0]==li&&(p[0]=1));break}else{if(p[l]+=s,p[l]!=li)break;p[l--]=0,s=1}for(a=p.length;p[--a]===0;p.pop());}e.e>d?e.c=e.e=null:e.e<u&&(e.c=[e.e=0])}return e}function C(e){var t,n=e.e;return n===null?e.toString():(t=gi(e.c),t=n<=c||n>=l?yi(t,n):bi(t,n,`0`),e.s<0?`-`+t:t)}return i.absoluteValue=i.abs=function(){var e=new v(this);return e.s<0&&(e.s=1),e},i.comparedTo=function(e,t){return _i(this,new v(e,t))},i.decimalPlaces=i.dp=function(e,t){var n,r,i,a=this;if(e!=null)return Q(e,0,pi),t==null?t=s:Q(t,0,8),S(new v(a),e+a.e+1,t);if(!(n=a.c))return null;if(r=((i=n.length-1)-hi(this.e/Z))*Z,i=n[i])for(;i%10==0;i/=10,r--);return r<0&&(r=0),r},i.dividedBy=i.div=function(e,n){return t(this,new v(e,n),o,s)},i.dividedToIntegerBy=i.idiv=function(e,n){return t(this,new v(e,n),0,1)},i.exponentiatedBy=i.pow=function(e,t){var n,r,i,o,c,l,u,d,f,p=this;if(e=new v(e),e.c&&!e.isInteger())throw Error(si+`Exponent not an integer: `+C(e));if(t!=null&&(t=new v(t)),l=e.e>14,!p.c||!p.c[0]||p.c[0]==1&&!p.e&&p.c.length==1||!e.c||!e.c[0])return f=new v(C(p)**(l?e.s*(2-vi(e)):+C(e))),t?f.mod(t):f;if(u=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new v(NaN);r=!u&&p.isInteger()&&t.isInteger(),r&&(p=p.mod(t))}else{if(e.e>9&&(p.e>0||p.e<-1||(p.e==0?p.c[0]>1||l&&p.c[1]>=24e7:p.c[0]<8e13||l&&p.c[0]<=9999975e7)))return o=p.s<0&&vi(e)?-0:0,p.e>-1&&(o=1/o),new v(u?1/o:o);m&&(o=ai(m/Z+2))}for(l?(n=new v(.5),u&&(e.s=1),d=vi(e)):(i=Math.abs(+C(e)),d=i%2),f=new v(a);;){if(d){if(f=f.times(p),!f.c)break;o?f.c.length>o&&(f.c.length=o):r&&(f=f.mod(t))}if(i){if(i=oi(i/2),i===0)break;d=i%2}else if(e=e.times(n),S(e,e.e+1,1),e.e>14)d=vi(e);else{if(i=+C(e),i===0)break;d=i%2}p=p.times(p),o?p.c&&p.c.length>o&&(p.c.length=o):r&&(p=p.mod(t))}return r?f:(u&&(f=a.div(f)),t?f.mod(t):o?S(f,m,s,c):f)},i.integerValue=function(e){var t=new v(this);return e==null?e=s:Q(e,0,8),S(t,t.e+1,e)},i.isEqualTo=i.eq=function(e,t){return _i(this,new v(e,t))===0},i.isFinite=function(){return!!this.c},i.isGreaterThan=i.gt=function(e,t){return _i(this,new v(e,t))>0},i.isGreaterThanOrEqualTo=i.gte=function(e,t){return(t=_i(this,new v(e,t)))===1||t===0},i.isInteger=function(){return!!this.c&&hi(this.e/Z)>this.c.length-2},i.isLessThan=i.lt=function(e,t){return _i(this,new v(e,t))<0},i.isLessThanOrEqualTo=i.lte=function(e,t){return(t=_i(this,new v(e,t)))===-1||t===0},i.isNaN=function(){return!this.s},i.isNegative=function(){return this.s<0},i.isPositive=function(){return this.s>0},i.isZero=function(){return!!this.c&&this.c[0]==0},i.minus=function(e,t){var n,r,i,a,o=this,c=o.s;if(e=new v(e,t),t=e.s,!c||!t)return new v(NaN);if(c!=t)return e.s=-t,o.plus(e);var l=o.e/Z,u=e.e/Z,d=o.c,f=e.c;if(!l||!u){if(!d||!f)return d?(e.s=-t,e):new v(f?o:NaN);if(!d[0]||!f[0])return f[0]?(e.s=-t,e):new v(d[0]?o:s==3?-0:0)}if(l=hi(l),u=hi(u),d=d.slice(),c=l-u){for((a=c<0)?(c=-c,i=d):(u=l,i=f),i.reverse(),t=c;t--;i.push(0));i.reverse()}else for(r=(a=(c=d.length)<(t=f.length))?c:t,c=t=0;t<r;t++)if(d[t]!=f[t]){a=d[t]<f[t];break}if(a&&(i=d,d=f,f=i,e.s=-e.s),t=(r=f.length)-(n=d.length),t>0)for(;t--;d[n++]=0);for(t=li-1;r>c;){if(d[--r]<f[r]){for(n=r;n&&!d[--n];d[n]=t);--d[n],d[r]+=li}d[r]-=f[r]}for(;d[0]==0;d.splice(0,1),--u);return d[0]?x(e,d,u):(e.s=s==3?-1:1,e.c=[e.e=0],e)},i.modulo=i.mod=function(e,n){var r,i,a=this;return e=new v(e,n),!a.c||!e.s||e.c&&!e.c[0]?new v(NaN):!e.c||a.c&&!a.c[0]?new v(a):(p==9?(i=e.s,e.s=1,r=t(a,e,0,3),e.s=i,r.s*=i):r=t(a,e,0,p),e=a.minus(r.times(e)),!e.c[0]&&p==1&&(e.s=a.s),e)},i.multipliedBy=i.times=function(e,t){var n,r,i,a,o,s,c,l,u,d,f,p,m,h,g,_=this,y=_.c,b=(e=new v(e,t)).c;if(!y||!b||!y[0]||!b[0])return!_.s||!e.s||y&&!y[0]&&!b||b&&!b[0]&&!y?e.c=e.e=e.s=null:(e.s*=_.s,!y||!b?e.c=e.e=null:(e.c=[0],e.e=0)),e;for(r=hi(_.e/Z)+hi(e.e/Z),e.s*=_.s,c=y.length,d=b.length,c<d&&(m=y,y=b,b=m,i=c,c=d,d=i),i=c+d,m=[];i--;m.push(0));for(h=li,g=fi,i=d;--i>=0;){for(n=0,f=b[i]%g,p=b[i]/g|0,o=c,a=i+o;a>i;)l=y[--o]%g,u=y[o]/g|0,s=p*l+u*f,l=f*l+s%g*g+m[a]+n,n=(l/h|0)+(s/g|0)+p*u,m[a--]=l%h;m[a]=n}return n?++r:m.splice(0,1),x(e,m,r)},i.negated=function(){var e=new v(this);return e.s=-e.s||null,e},i.plus=function(e,t){var n,r=this,i=r.s;if(e=new v(e,t),t=e.s,!i||!t)return new v(NaN);if(i!=t)return e.s=-t,r.minus(e);var a=r.e/Z,o=e.e/Z,s=r.c,c=e.c;if(!a||!o){if(!s||!c)return new v(i/0);if(!s[0]||!c[0])return c[0]?e:new v(s[0]?r:i*0)}if(a=hi(a),o=hi(o),s=s.slice(),i=a-o){for(i>0?(o=a,n=c):(i=-i,n=s),n.reverse();i--;n.push(0));n.reverse()}for(i=s.length,t=c.length,i-t<0&&(n=c,c=s,s=n,t=i),i=0;t;)i=(s[--t]=s[t]+c[t]+i)/li|0,s[t]=li===s[t]?0:s[t]%li;return i&&(s=[i].concat(s),++o),x(e,s,o)},i.precision=i.sd=function(e,t){var n,r,i,a=this;if(e!=null&&e!==!!e)return Q(e,1,pi),t==null?t=s:Q(t,0,8),S(new v(a),e,t);if(!(n=a.c))return null;if(i=n.length-1,r=i*Z+1,i=n[i]){for(;i%10==0;i/=10,r--);for(i=n[0];i>=10;i/=10,r++);}return e&&a.e+1>r&&(r=a.e+1),r},i.shiftedBy=function(e){return Q(e,-ui,ui),this.times(`1e`+e)},i.squareRoot=i.sqrt=function(){var e,n,r,i,a,c=this,l=c.c,u=c.s,d=c.e,f=o+4,p=new v(`0.5`);if(u!==1||!l||!l[0])return new v(!u||u<0&&(!l||l[0])?NaN:l?c:1/0);if(u=Math.sqrt(+C(c)),u==0||u==1/0?(n=gi(l),(n.length+d)%2==0&&(n+=`0`),u=Math.sqrt(+n),d=hi((d+1)/2)-(d<0||d%2),u==1/0?n=`5e`+d:(n=u.toExponential(),n=n.slice(0,n.indexOf(`e`)+1)+d),r=new v(n)):r=new v(u+``),r.c[0]){for(d=r.e,u=d+f,u<3&&(u=0);;)if(a=r,r=p.times(a.plus(t(c,a,f,1))),gi(a.c).slice(0,u)===(n=gi(r.c)).slice(0,u))if(r.e<d&&--u,n=n.slice(u-3,u+1),n==`9999`||!i&&n==`4999`){if(!i&&(S(a,a.e+o+2,0),a.times(a).eq(c))){r=a;break}f+=4,u+=4,i=1}else{(!+n||!+n.slice(1)&&n.charAt(0)==`5`)&&(S(r,r.e+o+2,1),e=!r.times(r).eq(c));break}}return S(r,r.e+o+1,s,e)},i.toExponential=function(e,t){return e!=null&&(Q(e,0,pi),e++),y(this,e,t,1)},i.toFixed=function(e,t){return e!=null&&(Q(e,0,pi),e=e+this.e+1),y(this,e,t)},i.toFormat=function(e,t,n){var r,i=this;if(n==null)e!=null&&t&&typeof t==`object`?(n=t,t=null):e&&typeof e==`object`?(n=e,e=t=null):n=h;else if(typeof n!=`object`)throw Error(si+`Argument not an object: `+n);if(r=i.toFixed(e,t),i.c){var a,o=r.split(`.`),s=+n.groupSize,c=+n.secondaryGroupSize,l=n.groupSeparator||``,u=o[0],d=o[1],f=i.s<0,p=f?u.slice(1):u,m=p.length;if(c&&(a=s,s=c,c=a,m-=a),s>0&&m>0){for(a=m%s||s,u=p.substr(0,a);a<m;a+=s)u+=l+p.substr(a,s);c>0&&(u+=l+p.slice(a)),f&&(u=`-`+u)}r=d?u+(n.decimalSeparator||``)+((c=+n.fractionGroupSize)?d.replace(RegExp(`\\d{`+c+`}\\B`,`g`),`$&`+(n.fractionGroupSeparator||``)):d):u}return(n.prefix||``)+r+(n.suffix||``)},i.toFraction=function(e){var n,r,i,o,c,l,u,f,p,m,h,g,_=this,y=_.c;if(e!=null&&(u=new v(e),!u.isInteger()&&(u.c||u.s!==1)||u.lt(a)))throw Error(si+`Argument `+(u.isInteger()?`out of range: `:`not an integer: `)+C(u));if(!y)return new v(_);for(n=new v(a),p=r=new v(a),i=f=new v(a),g=gi(y),c=n.e=g.length-_.e-1,n.c[0]=di[(l=c%Z)<0?Z+l:l],e=!e||u.comparedTo(n)>0?c>0?n:p:u,l=d,d=1/0,u=new v(g),f.c[0]=0;m=t(u,n,0,1),o=r.plus(m.times(i)),o.comparedTo(e)!=1;)r=i,i=o,p=f.plus(m.times(o=p)),f=o,n=u.minus(m.times(o=n)),u=o;return o=t(e.minus(r),i,0,1),f=f.plus(o.times(p)),r=r.plus(o.times(i)),f.s=p.s=_.s,c*=2,h=t(p,i,c,s).minus(_).abs().comparedTo(t(f,r,c,s).minus(_).abs())<1?[p,i]:[f,r],d=l,h},i.toNumber=function(){return+C(this)},i.toPrecision=function(e,t){return e!=null&&Q(e,1,pi),y(this,e,t,2)},i.toString=function(e){var t,r=this,i=r.s,a=r.e;return a===null?i?(t=`Infinity`,i<0&&(t=`-`+t)):t=`NaN`:(e==null?t=a<=c||a>=l?yi(gi(r.c),a):bi(gi(r.c),a,`0`):e===10&&_?(r=S(new v(r),o+a+1,s),t=bi(gi(r.c),r.e,`0`)):(Q(e,2,g.length,`Base`),t=n(bi(gi(r.c),a,`0`),10,e,i,!0)),i<0&&r.c[0]&&(t=`-`+t)),t},i.valueOf=i.toJSON=function(){return C(this)},i._isBigNumber=!0,i[Symbol.toStringTag]=`BigNumber`,i[Symbol.for(`nodejs.util.inspect.custom`)]=i.valueOf,e!=null&&v.set(e),v}function hi(e){var t=e|0;return e>0||e===t?t:t-1}function gi(e){for(var t,n,r=1,i=e.length,a=e[0]+``;r<i;){for(t=e[r++]+``,n=Z-t.length;n--;t=`0`+t);a+=t}for(i=a.length;a.charCodeAt(--i)===48;);return a.slice(0,i+1||1)}function _i(e,t){var n,r,i=e.c,a=t.c,o=e.s,s=t.s,c=e.e,l=t.e;if(!o||!s)return null;if(n=i&&!i[0],r=a&&!a[0],n||r)return n?r?0:-s:o;if(o!=s)return o;if(n=o<0,r=c==l,!i||!a)return r?0:!i^n?1:-1;if(!r)return c>l^n?1:-1;for(s=(c=i.length)<(l=a.length)?c:l,o=0;o<s;o++)if(i[o]!=a[o])return i[o]>a[o]^n?1:-1;return c==l?0:c>l^n?1:-1}function Q(e,t,n,r){if(e<t||e>n||e!==oi(e))throw Error(si+(r||`Argument`)+(typeof e==`number`?e<t||e>n?` out of range: `:` not an integer: `:` not a primitive number: `)+String(e))}function vi(e){var t=e.c.length-1;return hi(e.e/Z)==t&&e.c[t]%2!=0}function yi(e,t){return(e.length>1?e.charAt(0)+`.`+e.slice(1):e)+(t<0?`e`:`e+`)+t}function bi(e,t,n){var r,i;if(t<0){for(i=n+`.`;++t;i+=n);e=i+e}else if(r=e.length,++t>r){for(i=n,t-=r;--t;i+=n);e+=i}else t<r&&(e=e.slice(0,t)+`.`+e.slice(t));return e}var xi=mi(),Si=class{key;left=null;right=null;constructor(e){this.key=e}},Ci=class extends Si{constructor(e){super(e)}},wi=class{size=0;modificationCount=0;splayCount=0;splay(e){let t=this.root;if(t==null)return this.compare(e,e),-1;let n=null,r=null,i=null,a=null,o=t,s=this.compare,c;for(;;)if(c=s(o.key,e),c>0){let t=o.left;if(t==null||(c=s(t.key,e),c>0&&(o.left=t.right,t.right=o,o=t,t=o.left,t==null)))break;n==null?r=o:n.left=o,n=o,o=t}else if(c<0){let t=o.right;if(t==null||(c=s(t.key,e),c<0&&(o.right=t.left,t.left=o,o=t,t=o.right,t==null)))break;i==null?a=o:i.right=o,i=o,o=t}else break;return i!=null&&(i.right=o.left,o.left=a),n!=null&&(n.left=o.right,o.right=r),this.root!==o&&(this.root=o,this.splayCount++),c}splayMin(e){let t=e,n=t.left;for(;n!=null;){let e=n;t.left=e.right,e.right=t,t=e,n=t.left}return t}splayMax(e){let t=e,n=t.right;for(;n!=null;){let e=n;t.right=e.left,e.left=t,t=e,n=t.right}return t}_delete(e){if(this.root==null||this.splay(e)!=0)return null;let t=this.root,n=t,r=t.left;if(this.size--,r==null)this.root=t.right;else{let e=t.right;t=this.splayMax(r),t.right=e,this.root=t}return this.modificationCount++,n}addNewRoot(e,t){this.size++,this.modificationCount++;let n=this.root;if(n==null){this.root=e;return}t<0?(e.left=n,e.right=n.right,n.right=null):(e.right=n,e.left=n.left,n.left=null),this.root=e}_first(){let e=this.root;return e==null?null:(this.root=this.splayMin(e),this.root)}_last(){let e=this.root;return e==null?null:(this.root=this.splayMax(e),this.root)}clear(){this.root=null,this.size=0,this.modificationCount++}has(e){return this.validKey(e)&&this.splay(e)==0}defaultCompare(){return(e,t)=>e<t?-1:e>t?1:0}wrap(){return{getRoot:()=>this.root,setRoot:e=>{this.root=e},getSize:()=>this.size,getModificationCount:()=>this.modificationCount,getSplayCount:()=>this.splayCount,setSplayCount:e=>{this.splayCount=e},splay:e=>this.splay(e),has:e=>this.has(e)}}},Ti=class e extends wi{root=null;compare;validKey;constructor(e,t){super(),this.compare=e??this.defaultCompare(),this.validKey=t??(e=>e!=null&&e!=null)}delete(e){return this.validKey(e)?this._delete(e)!=null:!1}deleteAll(e){for(let t of e)this.delete(t)}forEach(e){let t=this[Symbol.iterator](),n;for(;n=t.next(),!n.done;)e(n.value,n.value,this)}add(e){let t=this.splay(e);return t!=0&&this.addNewRoot(new Ci(e),t),this}addAndReturn(e){let t=this.splay(e);return t!=0&&this.addNewRoot(new Ci(e),t),this.root.key}addAll(e){for(let t of e)this.add(t)}isEmpty(){return this.root==null}isNotEmpty(){return this.root!=null}single(){if(this.size==0)throw`Bad state: No element`;if(this.size>1)throw`Bad state: Too many element`;return this.root.key}first(){if(this.size==0)throw`Bad state: No element`;return this._first().key}last(){if(this.size==0)throw`Bad state: No element`;return this._last().key}lastBefore(e){if(e==null)throw`Invalid arguments(s)`;if(this.root==null)return null;if(this.splay(e)<0)return this.root.key;let t=this.root.left;if(t==null)return null;let n=t.right;for(;n!=null;)t=n,n=t.right;return t.key}firstAfter(e){if(e==null)throw`Invalid arguments(s)`;if(this.root==null)return null;if(this.splay(e)>0)return this.root.key;let t=this.root.right;if(t==null)return null;let n=t.left;for(;n!=null;)t=n,n=t.left;return t.key}retainAll(t){let n=new e(this.compare,this.validKey),r=this.modificationCount;for(let e of t){if(r!=this.modificationCount)throw`Concurrent modification during iteration.`;this.validKey(e)&&this.splay(e)==0&&n.add(this.root.key)}n.size!=this.size&&(this.root=n.root,this.size=n.size,this.modificationCount++)}lookup(e){return!this.validKey(e)||this.splay(e)!=0?null:this.root.key}intersection(t){let n=new e(this.compare,this.validKey);for(let e of this)t.has(e)&&n.add(e);return n}difference(t){let n=new e(this.compare,this.validKey);for(let e of this)t.has(e)||n.add(e);return n}union(e){let t=this.clone();return t.addAll(e),t}clone(){let t=new e(this.compare,this.validKey);return t.size=this.size,t.root=this.copyNode(this.root),t}copyNode(e){if(e==null)return null;function t(e,n){let r,i;do{if(r=e.left,i=e.right,r!=null){let e=new Ci(r.key);n.left=e,t(r,e)}if(i!=null){let t=new Ci(i.key);n.right=t,e=i,n=t}}while(i!=null)}let n=new Ci(e.key);return t(e,n),n}toSet(){return this.clone()}entries(){return new Oi(this.wrap())}keys(){return this[Symbol.iterator]()}values(){return this[Symbol.iterator]()}[Symbol.iterator](){return new Di(this.wrap())}[Symbol.toStringTag]=`[object Set]`},Ei=class{tree;path=[];modificationCount=null;splayCount;constructor(e){this.tree=e,this.splayCount=e.getSplayCount()}[Symbol.iterator](){return this}next(){return this.moveNext()?{done:!1,value:this.current()}:{done:!0,value:null}}current(){if(!this.path.length)return null;let e=this.path[this.path.length-1];return this.getValue(e)}rebuildPath(e){this.path.splice(0,this.path.length),this.tree.splay(e),this.path.push(this.tree.getRoot()),this.splayCount=this.tree.getSplayCount()}findLeftMostDescendent(e){for(;e!=null;)this.path.push(e),e=e.left}moveNext(){if(this.modificationCount!=this.tree.getModificationCount()){if(this.modificationCount==null){this.modificationCount=this.tree.getModificationCount();let e=this.tree.getRoot();for(;e!=null;)this.path.push(e),e=e.left;return this.path.length>0}throw`Concurrent modification during iteration.`}if(!this.path.length)return!1;this.splayCount!=this.tree.getSplayCount()&&this.rebuildPath(this.path[this.path.length-1].key);let e=this.path[this.path.length-1],t=e.right;if(t!=null){for(;t!=null;)this.path.push(t),t=t.left;return!0}for(this.path.pop();this.path.length&&this.path[this.path.length-1].right===e;)e=this.path.pop();return this.path.length>0}},Di=class extends Ei{getValue(e){return e.key}},Oi=class extends Ei{getValue(e){return[e.key,e.key]}},ki=e=>()=>e,Ai=e=>{let t=e?(t,n)=>n.minus(t).abs().isLessThanOrEqualTo(e):ki(!1);return(e,n)=>t(e,n)?0:e.comparedTo(n)};function ji(e){let t=e?(t,n,r,i,a)=>t.exponentiatedBy(2).isLessThanOrEqualTo(i.minus(n).exponentiatedBy(2).plus(a.minus(r).exponentiatedBy(2)).times(e)):ki(!1);return(e,n,r)=>{let i=e.x,a=e.y,o=r.x,s=r.y,c=a.minus(s).times(n.x.minus(o)).minus(i.minus(o).times(n.y.minus(s)));return t(c,i,a,o,s)?0:c.comparedTo(0)}}var Mi=e=>e,Ni=e=>{if(e){let t=new Ti(Ai(e)),n=new Ti(Ai(e)),r=(e,t)=>t.addAndReturn(e),i=e=>({x:r(e.x,t),y:r(e.y,n)});return i({x:new xi(0),y:new xi(0)}),i}return Mi},$=e=>({set:e=>{Pi=$(e)},reset:()=>$(e),compare:Ai(e),snap:Ni(e),orient:ji(e)}),Pi=$(),Fi=(e,t)=>e.ll.x.isLessThanOrEqualTo(t.x)&&t.x.isLessThanOrEqualTo(e.ur.x)&&e.ll.y.isLessThanOrEqualTo(t.y)&&t.y.isLessThanOrEqualTo(e.ur.y),Ii=(e,t)=>{if(t.ur.x.isLessThan(e.ll.x)||e.ur.x.isLessThan(t.ll.x)||t.ur.y.isLessThan(e.ll.y)||e.ur.y.isLessThan(t.ll.y))return null;let n=e.ll.x.isLessThan(t.ll.x)?t.ll.x:e.ll.x,r=e.ur.x.isLessThan(t.ur.x)?e.ur.x:t.ur.x,i=e.ll.y.isLessThan(t.ll.y)?t.ll.y:e.ll.y,a=e.ur.y.isLessThan(t.ur.y)?e.ur.y:t.ur.y;return{ll:{x:n,y:i},ur:{x:r,y:a}}},Li=(e,t)=>e.x.times(t.y).minus(e.y.times(t.x)),Ri=(e,t)=>e.x.times(t.x).plus(e.y.times(t.y)),zi=e=>Ri(e,e).sqrt(),Bi=(e,t,n)=>{let r={x:t.x.minus(e.x),y:t.y.minus(e.y)},i={x:n.x.minus(e.x),y:n.y.minus(e.y)};return Li(i,r).div(zi(i)).div(zi(r))},Vi=(e,t,n)=>{let r={x:t.x.minus(e.x),y:t.y.minus(e.y)},i={x:n.x.minus(e.x),y:n.y.minus(e.y)};return Ri(i,r).div(zi(i)).div(zi(r))},Hi=(e,t,n)=>t.y.isZero()?null:{x:e.x.plus(t.x.div(t.y).times(n.minus(e.y))),y:n},Ui=(e,t,n)=>t.x.isZero()?null:{x:n,y:e.y.plus(t.y.div(t.x).times(n.minus(e.x)))},Wi=(e,t,n,r)=>{if(t.x.isZero())return Ui(n,r,e.x);if(r.x.isZero())return Ui(e,t,n.x);if(t.y.isZero())return Hi(n,r,e.y);if(r.y.isZero())return Hi(e,t,n.y);let i=Li(t,r);if(i.isZero())return null;let a={x:n.x.minus(e.x),y:n.y.minus(e.y)},o=Li(a,t).div(i),s=Li(a,r).div(i),c=e.x.plus(s.times(t.x)),l=n.x.plus(o.times(r.x)),u=e.y.plus(s.times(t.y)),d=n.y.plus(o.times(r.y));return{x:c.plus(l).div(2),y:u.plus(d).div(2)}},Gi=class e{point;isLeft;segment;otherSE;consumedBy;static compare(t,n){let r=e.comparePoints(t.point,n.point);return r===0?(t.point!==n.point&&t.link(n),t.isLeft===n.isLeft?$i.compare(t.segment,n.segment):t.isLeft?1:-1):r}static comparePoints(e,t){return e.x.isLessThan(t.x)?-1:e.x.isGreaterThan(t.x)?1:e.y.isLessThan(t.y)?-1:e.y.isGreaterThan(t.y)?1:0}constructor(e,t){e.events===void 0?e.events=[this]:e.events.push(this),this.point=e,this.isLeft=t}link(e){if(e.point===this.point)throw Error(`Tried to link already linked events`);let t=e.point.events;for(let e=0,n=t.length;e<n;e++){let n=t[e];this.point.events.push(n),n.point=this.point}this.checkForConsuming()}checkForConsuming(){let e=this.point.events.length;for(let t=0;t<e;t++){let n=this.point.events[t];if(n.segment.consumedBy===void 0)for(let r=t+1;r<e;r++){let e=this.point.events[r];e.consumedBy===void 0&&n.otherSE.point.events===e.otherSE.point.events&&n.segment.consume(e.segment)}}}getAvailableLinkedEvents(){let e=[];for(let t=0,n=this.point.events.length;t<n;t++){let n=this.point.events[t];n!==this&&!n.segment.ringOut&&n.segment.isInResult()&&e.push(n)}return e}getLeftmostComparator(e){let t=new Map,n=n=>{let r=n.otherSE;t.set(n,{sine:Bi(this.point,e.point,r.point),cosine:Vi(this.point,e.point,r.point)})};return(e,r)=>{t.has(e)||n(e),t.has(r)||n(r);let{sine:i,cosine:a}=t.get(e),{sine:o,cosine:s}=t.get(r);return i.isGreaterThanOrEqualTo(0)&&o.isGreaterThanOrEqualTo(0)?a.isLessThan(s)?1:a.isGreaterThan(s)?-1:0:i.isLessThan(0)&&o.isLessThan(0)?a.isLessThan(s)?-1:a.isGreaterThan(s)?1:0:o.isLessThan(i)?-1:o.isGreaterThan(i)?1:0}}},Ki=class e{events;poly;_isExteriorRing;_enclosingRing;static factory(t){let n=[];for(let r=0,i=t.length;r<i;r++){let i=t[r];if(!i.isInResult()||i.ringOut)continue;let a=null,o=i.leftSE,s=i.rightSE,c=[o],l=o.point,u=[];for(;a=o,o=s,c.push(o),o.point!==l;)for(;;){let t=o.getAvailableLinkedEvents();if(t.length===0){let e=c[0].point,t=c[c.length-1].point;throw Error(`Unable to complete output ring starting at [${e.x}, ${e.y}]. Last matching segment found ends at [${t.x}, ${t.y}].`)}if(t.length===1){s=t[0].otherSE;break}let r=null;for(let e=0,t=u.length;e<t;e++)if(u[e].point===o.point){r=e;break}if(r!==null){let t=u.splice(r)[0],i=c.splice(t.index);i.unshift(i[0].otherSE),n.push(new e(i.reverse()));continue}u.push({index:c.length,point:o.point});let i=o.getLeftmostComparator(a);s=t.sort(i)[0].otherSE;break}n.push(new e(c))}return n}constructor(e){this.events=e;for(let t=0,n=e.length;t<n;t++)e[t].segment.ringOut=this;this.poly=null}getGeom(){let e=this.events[0].point,t=[e];for(let n=1,r=this.events.length-1;n<r;n++){let r=this.events[n].point,i=this.events[n+1].point;Pi.orient(r,e,i)!==0&&(t.push(r),e=r)}if(t.length===1)return null;let n=t[0],r=t[1];Pi.orient(n,e,r)===0&&t.shift(),t.push(t[0]);let i=this.isExteriorRing()?1:-1,a=this.isExteriorRing()?0:t.length-1,o=this.isExteriorRing()?t.length:-1,s=[];for(let e=a;e!=o;e+=i)s.push([t[e].x.toNumber(),t[e].y.toNumber()]);return s}isExteriorRing(){if(this._isExteriorRing===void 0){let e=this.enclosingRing();this._isExteriorRing=e?!e.isExteriorRing():!0}return this._isExteriorRing}enclosingRing(){return this._enclosingRing===void 0&&(this._enclosingRing=this._calcEnclosingRing()),this._enclosingRing}_calcEnclosingRing(){let e=this.events[0];for(let t=1,n=this.events.length;t<n;t++){let n=this.events[t];Gi.compare(e,n)>0&&(e=n)}let t=e.segment.prevInResult(),n=t?t.prevInResult():null;for(;;){if(!t)return null;if(!n)return t.ringOut;if(n.ringOut!==t.ringOut)return n.ringOut?.enclosingRing()===t.ringOut?t.ringOut?.enclosingRing():t.ringOut;t=n.prevInResult(),n=t?t.prevInResult():null}}},qi=class{exteriorRing;interiorRings;constructor(e){this.exteriorRing=e,e.poly=this,this.interiorRings=[]}addInterior(e){this.interiorRings.push(e),e.poly=this}getGeom(){let e=this.exteriorRing.getGeom();if(e===null)return null;let t=[e];for(let e=0,n=this.interiorRings.length;e<n;e++){let n=this.interiorRings[e].getGeom();n!==null&&t.push(n)}return t}},Ji=class{rings;polys;constructor(e){this.rings=e,this.polys=this._composePolys(e)}getGeom(){let e=[];for(let t=0,n=this.polys.length;t<n;t++){let n=this.polys[t].getGeom();n!==null&&e.push(n)}return e}_composePolys(e){let t=[];for(let n=0,r=e.length;n<r;n++){let r=e[n];if(!r.poly)if(r.isExteriorRing())t.push(new qi(r));else{let e=r.enclosingRing();e?.poly||t.push(new qi(e)),e?.poly?.addInterior(r)}}return t}},Yi=class{queue;tree;segments;constructor(e,t=$i.compare){this.queue=e,this.tree=new Ti(t),this.segments=[]}process(e){let t=e.segment,n=[];if(e.consumedBy)return e.isLeft?this.queue.delete(e.otherSE):this.tree.delete(t),n;e.isLeft&&this.tree.add(t);let r=t,i=t;do r=this.tree.lastBefore(r);while(r!=null&&r.consumedBy!=null);do i=this.tree.firstAfter(i);while(i!=null&&i.consumedBy!=null);if(e.isLeft){let a=null;if(r){let e=r.getIntersection(t);if(e!==null&&(t.isAnEndpoint(e)||(a=e),!r.isAnEndpoint(e))){let t=this._splitSafely(r,e);for(let e=0,r=t.length;e<r;e++)n.push(t[e])}}let o=null;if(i){let e=i.getIntersection(t);if(e!==null&&(t.isAnEndpoint(e)||(o=e),!i.isAnEndpoint(e))){let t=this._splitSafely(i,e);for(let e=0,r=t.length;e<r;e++)n.push(t[e])}}if(a!==null||o!==null){let e=null;e=a===null?o:o===null||Gi.comparePoints(a,o)<=0?a:o,this.queue.delete(t.rightSE),n.push(t.rightSE);let r=t.split(e);for(let e=0,t=r.length;e<t;e++)n.push(r[e])}n.length>0?(this.tree.delete(t),n.push(e)):(this.segments.push(t),t.prev=r)}else{if(r&&i){let e=r.getIntersection(i);if(e!==null){if(!r.isAnEndpoint(e)){let t=this._splitSafely(r,e);for(let e=0,r=t.length;e<r;e++)n.push(t[e])}if(!i.isAnEndpoint(e)){let t=this._splitSafely(i,e);for(let e=0,r=t.length;e<r;e++)n.push(t[e])}}}this.tree.delete(t)}return n}_splitSafely(e,t){this.tree.delete(e);let n=e.rightSE;this.queue.delete(n);let r=e.split(t);return r.push(n),e.consumedBy===void 0&&this.tree.add(e),r}},Xi=new class{type;numMultiPolys;run(e,t,n){Xi.type=e;let r=[new na(t,!0)];for(let e=0,t=n.length;e<t;e++)r.push(new na(n[e],!1));if(Xi.numMultiPolys=r.length,Xi.type===`difference`){let e=r[0],t=1;for(;t<r.length;)Ii(r[t].bbox,e.bbox)===null?r.splice(t,1):t++}if(Xi.type===`intersection`)for(let e=0,t=r.length;e<t;e++){let t=r[e];for(let n=e+1,i=r.length;n<i;n++)if(Ii(t.bbox,r[n].bbox)===null)return[]}let i=new Ti(Gi.compare);for(let e=0,t=r.length;e<t;e++){let t=r[e].getSweepEvents();for(let e=0,n=t.length;e<n;e++)i.add(t[e])}let a=new Yi(i),o=null;for(i.size!=0&&(o=i.first(),i.delete(o));o;){let e=a.process(o);for(let t=0,n=e.length;t<n;t++){let n=e[t];n.consumedBy===void 0&&i.add(n)}i.size==0?o=null:(o=i.first(),i.delete(o))}return Pi.reset(),new Ji(Ki.factory(a.segments)).getGeom()}},Zi=Xi,Qi=0,$i=class e{id;leftSE;rightSE;rings;windings;ringOut;consumedBy;prev;_prevInResult;_beforeState;_afterState;_isInResult;static compare(e,t){let n=e.leftSE.point.x,r=t.leftSE.point.x,i=e.rightSE.point.x,a=t.rightSE.point.x;if(a.isLessThan(n))return 1;if(i.isLessThan(r))return-1;let o=e.leftSE.point.y,s=t.leftSE.point.y,c=e.rightSE.point.y,l=t.rightSE.point.y;if(n.isLessThan(r)){if(s.isLessThan(o)&&s.isLessThan(c))return 1;if(s.isGreaterThan(o)&&s.isGreaterThan(c))return-1;let n=e.comparePoint(t.leftSE.point);if(n<0)return 1;if(n>0)return-1;let r=t.comparePoint(e.rightSE.point);return r===0?-1:r}if(n.isGreaterThan(r)){if(o.isLessThan(s)&&o.isLessThan(l))return-1;if(o.isGreaterThan(s)&&o.isGreaterThan(l))return 1;let n=t.comparePoint(e.leftSE.point);if(n!==0)return n;let r=e.comparePoint(t.rightSE.point);return r<0?1:r>0?-1:1}if(o.isLessThan(s))return-1;if(o.isGreaterThan(s))return 1;if(i.isLessThan(a)){let n=t.comparePoint(e.rightSE.point);if(n!==0)return n}if(i.isGreaterThan(a)){let n=e.comparePoint(t.rightSE.point);if(n<0)return 1;if(n>0)return-1}if(!i.eq(a)){let e=c.minus(o),t=i.minus(n),u=l.minus(s),d=a.minus(r);if(e.isGreaterThan(t)&&u.isLessThan(d))return 1;if(e.isLessThan(t)&&u.isGreaterThan(d))return-1}return i.isGreaterThan(a)?1:i.isLessThan(a)||c.isLessThan(l)?-1:c.isGreaterThan(l)?1:e.id<t.id?-1:e.id>t.id?1:0}constructor(e,t,n,r){this.id=++Qi,this.leftSE=e,e.segment=this,e.otherSE=t,this.rightSE=t,t.segment=this,t.otherSE=e,this.rings=n,this.windings=r}static fromRing(t,n,r){let i,a,o,s=Gi.comparePoints(t,n);if(s<0)i=t,a=n,o=1;else if(s>0)i=n,a=t,o=-1;else throw Error(`Tried to create degenerate segment at [${t.x}, ${t.y}]`);return new e(new Gi(i,!0),new Gi(a,!1),[r],[o])}replaceRightSE(e){this.rightSE=e,this.rightSE.segment=this,this.rightSE.otherSE=this.leftSE,this.leftSE.otherSE=this.rightSE}bbox(){let e=this.leftSE.point.y,t=this.rightSE.point.y;return{ll:{x:this.leftSE.point.x,y:e.isLessThan(t)?e:t},ur:{x:this.rightSE.point.x,y:e.isGreaterThan(t)?e:t}}}vector(){return{x:this.rightSE.point.x.minus(this.leftSE.point.x),y:this.rightSE.point.y.minus(this.leftSE.point.y)}}isAnEndpoint(e){return e.x.eq(this.leftSE.point.x)&&e.y.eq(this.leftSE.point.y)||e.x.eq(this.rightSE.point.x)&&e.y.eq(this.rightSE.point.y)}comparePoint(e){return Pi.orient(this.leftSE.point,e,this.rightSE.point)}getIntersection(e){let t=this.bbox(),n=e.bbox(),r=Ii(t,n);if(r===null)return null;let i=this.leftSE.point,a=this.rightSE.point,o=e.leftSE.point,s=e.rightSE.point,c=Fi(t,o)&&this.comparePoint(o)===0,l=Fi(n,i)&&e.comparePoint(i)===0,u=Fi(t,s)&&this.comparePoint(s)===0,d=Fi(n,a)&&e.comparePoint(a)===0;if(l&&c)return d&&!u?a:!d&&u?s:null;if(l)return u&&i.x.eq(s.x)&&i.y.eq(s.y)?null:i;if(c)return d&&a.x.eq(o.x)&&a.y.eq(o.y)?null:o;if(d&&u)return null;if(d)return a;if(u)return s;let f=Wi(i,this.vector(),o,e.vector());return f===null||!Fi(r,f)?null:Pi.snap(f)}split(t){let n=[],r=t.events!==void 0,i=new Gi(t,!0),a=new Gi(t,!1),o=this.rightSE;this.replaceRightSE(a),n.push(a),n.push(i);let s=new e(i,o,this.rings.slice(),this.windings.slice());return Gi.comparePoints(s.leftSE.point,s.rightSE.point)>0&&s.swapEvents(),Gi.comparePoints(this.leftSE.point,this.rightSE.point)>0&&this.swapEvents(),r&&(i.checkForConsuming(),a.checkForConsuming()),n}swapEvents(){let e=this.rightSE;this.rightSE=this.leftSE,this.leftSE=e,this.leftSE.isLeft=!0,this.rightSE.isLeft=!1;for(let e=0,t=this.windings.length;e<t;e++)this.windings[e]*=-1}consume(t){let n=this,r=t;for(;n.consumedBy;)n=n.consumedBy;for(;r.consumedBy;)r=r.consumedBy;let i=e.compare(n,r);if(i!==0){if(i>0){let e=n;n=r,r=e}if(n.prev===r){let e=n;n=r,r=e}for(let e=0,t=r.rings.length;e<t;e++){let t=r.rings[e],i=r.windings[e],a=n.rings.indexOf(t);a===-1?(n.rings.push(t),n.windings.push(i)):n.windings[a]+=i}r.rings=null,r.windings=null,r.consumedBy=n,r.leftSE.consumedBy=n.leftSE,r.rightSE.consumedBy=n.rightSE}}prevInResult(){return this._prevInResult===void 0&&(this.prev?this.prev.isInResult()?this._prevInResult=this.prev:this._prevInResult=this.prev.prevInResult():this._prevInResult=null),this._prevInResult}beforeState(){return this._beforeState===void 0&&(this.prev?this._beforeState=(this.prev.consumedBy||this.prev).afterState():this._beforeState={rings:[],windings:[],multiPolys:[]}),this._beforeState}afterState(){if(this._afterState!==void 0)return this._afterState;let e=this.beforeState();this._afterState={rings:e.rings.slice(0),windings:e.windings.slice(0),multiPolys:[]};let t=this._afterState.rings,n=this._afterState.windings,r=this._afterState.multiPolys;for(let e=0,r=this.rings.length;e<r;e++){let r=this.rings[e],i=this.windings[e],a=t.indexOf(r);a===-1?(t.push(r),n.push(i)):n[a]+=i}let i=[],a=[];for(let e=0,r=t.length;e<r;e++){if(n[e]===0)continue;let r=t[e],o=r.poly;if(a.indexOf(o)===-1)if(r.isExterior)i.push(o);else{a.indexOf(o)===-1&&a.push(o);let e=i.indexOf(r.poly);e!==-1&&i.splice(e,1)}}for(let e=0,t=i.length;e<t;e++){let t=i[e].multiPoly;r.indexOf(t)===-1&&r.push(t)}return this._afterState}isInResult(){if(this.consumedBy)return!1;if(this._isInResult!==void 0)return this._isInResult;let e=this.beforeState().multiPolys,t=this.afterState().multiPolys;switch(Zi.type){case`union`:this._isInResult=e.length===0!=(t.length===0);break;case`intersection`:{let n,r;e.length<t.length?(n=e.length,r=t.length):(n=t.length,r=e.length),this._isInResult=r===Zi.numMultiPolys&&n<r;break}case`xor`:this._isInResult=Math.abs(e.length-t.length)%2==1;break;case`difference`:{let n=e=>e.length===1&&e[0].isSubject;this._isInResult=n(e)!==n(t);break}}return this._isInResult}},ea=class{poly;isExterior;segments;bbox;constructor(e,t,n){if(!Array.isArray(e)||e.length===0||(this.poly=t,this.isExterior=n,this.segments=[],typeof e[0][0]!=`number`||typeof e[0][1]!=`number`))throw Error(`Input geometry is not a valid Polygon or MultiPolygon`);let r=Pi.snap({x:new xi(e[0][0]),y:new xi(e[0][1])});this.bbox={ll:{x:r.x,y:r.y},ur:{x:r.x,y:r.y}};let i=r;for(let t=1,n=e.length;t<n;t++){if(typeof e[t][0]!=`number`||typeof e[t][1]!=`number`)throw Error(`Input geometry is not a valid Polygon or MultiPolygon`);let n=Pi.snap({x:new xi(e[t][0]),y:new xi(e[t][1])});n.x.eq(i.x)&&n.y.eq(i.y)||(this.segments.push($i.fromRing(i,n,this)),n.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=n.x),n.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=n.y),n.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=n.x),n.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=n.y),i=n)}(!r.x.eq(i.x)||!r.y.eq(i.y))&&this.segments.push($i.fromRing(i,r,this))}getSweepEvents(){let e=[];for(let t=0,n=this.segments.length;t<n;t++){let n=this.segments[t];e.push(n.leftSE),e.push(n.rightSE)}return e}},ta=class{multiPoly;exteriorRing;interiorRings;bbox;constructor(e,t){if(!Array.isArray(e))throw Error(`Input geometry is not a valid Polygon or MultiPolygon`);this.exteriorRing=new ea(e[0],this,!0),this.bbox={ll:{x:this.exteriorRing.bbox.ll.x,y:this.exteriorRing.bbox.ll.y},ur:{x:this.exteriorRing.bbox.ur.x,y:this.exteriorRing.bbox.ur.y}},this.interiorRings=[];for(let t=1,n=e.length;t<n;t++){let n=new ea(e[t],this,!1);n.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=n.bbox.ll.x),n.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=n.bbox.ll.y),n.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=n.bbox.ur.x),n.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=n.bbox.ur.y),this.interiorRings.push(n)}this.multiPoly=t}getSweepEvents(){let e=this.exteriorRing.getSweepEvents();for(let t=0,n=this.interiorRings.length;t<n;t++){let n=this.interiorRings[t].getSweepEvents();for(let t=0,r=n.length;t<r;t++)e.push(n[t])}return e}},na=class{isSubject;polys;bbox;constructor(e,t){if(!Array.isArray(e))throw Error(`Input geometry is not a valid Polygon or MultiPolygon`);try{typeof e[0][0][0]==`number`&&(e=[e])}catch{}this.polys=[],this.bbox={ll:{x:new xi(1/0),y:new xi(1/0)},ur:{x:new xi(-1/0),y:new xi(-1/0)}};for(let t=0,n=e.length;t<n;t++){let n=new ta(e[t],this);n.bbox.ll.x.isLessThan(this.bbox.ll.x)&&(this.bbox.ll.x=n.bbox.ll.x),n.bbox.ll.y.isLessThan(this.bbox.ll.y)&&(this.bbox.ll.y=n.bbox.ll.y),n.bbox.ur.x.isGreaterThan(this.bbox.ur.x)&&(this.bbox.ur.x=n.bbox.ur.x),n.bbox.ur.y.isGreaterThan(this.bbox.ur.y)&&(this.bbox.ur.y=n.bbox.ur.y),this.polys.push(n)}this.isSubject=t}getSweepEvents(){let e=[];for(let t=0,n=this.polys.length;t<n;t++){let n=this.polys[t].getSweepEvents();for(let t=0,r=n.length;t<r;t++)e.push(n[t])}return e}},ra=(e,...t)=>Zi.run(`intersection`,e,t),ia=(e,...t)=>Zi.run(`difference`,e,t);Pi.set;function aa(e){let t={type:`Feature`};return t.geometry=e,t}function oa(e){return e.type===`Feature`?e.geometry:e}function sa(e){return e&&e.geometry&&e.geometry.coordinates?e.geometry.coordinates:e}function ca(e){return aa({type:`LineString`,coordinates:e})}function la(e){return aa({type:`MultiLineString`,coordinates:e})}function ua(e){return aa({type:`Polygon`,coordinates:e})}function da(e){return aa({type:`MultiPolygon`,coordinates:e})}function fa(e,t){let n=oa(e),r=oa(t),i=ra(n.coordinates,r.coordinates);return i.length===0?null:i.length===1?ua(i[0]):da(i)}function pa(e,t){let n=oa(e),r=oa(t),i=ia(n.coordinates,r.coordinates);return i.length===0?null:i.length===1?ua(i[0]):da(i)}function ma(e){return Array.isArray(e)?1+ma(e[0]):-1}function ha(e){e instanceof L.Polyline&&(e=e.toGeoJSON(15));let t=sa(e),n=ma(t),r=[];return n>1?t.forEach(e=>{r.push(ca(e))}):r.push(e),r}function ga(e){let t=[];return e.eachLayer(e=>{t.push(sa(e.toGeoJSON(15)))}),la(t)}q.Cut=q.Polygon.extend({initialize(e){this._map=e,this._shape=`Cut`,this.toolbarButtonName=`cutPolygon`},_finishShape(){if(this._editedLayers=[],!this.options.allowSelfIntersection&&(this._handleSelfIntersection(!0,this._layer.getLatLngs()[0]),this._doesSelfIntersect)||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;let e=this._layer.getLatLngs();if(e.length<=2)return;let t=L.polygon(e,this.options.pathOptions);t._latlngInfos=this._layer._latlngInfo,this.cut(t),this._cleanupSnapping(),this._otherSnapLayers.splice(this._tempSnapLayerIndex,1),delete this._tempSnapLayerIndex,this._editedLayers.forEach(({layer:e,originalLayer:t})=>{this._fireCut(t,e,t),this._fireCut(this._map,e,t),t.pm._fireEdit()}),this._editedLayers=[];let n=this._hintMarker.getLatLng();this.disable(),this.options.continueDrawing&&(this.enable(),this._hintMarker.setLatLng(n))},cut(e){let t=this._map._layers,n=e._latlngInfos||[];Object.keys(t).map(e=>t[e]).filter(e=>e.pm).filter(e=>!e._pmTempLayer).filter(e=>!L.PM.optIn&&!e.options.pmIgnore||L.PM.optIn&&e.options.pmIgnore===!1).filter(e=>e instanceof L.Polyline).filter(t=>t!==e).filter(e=>e.pm.options.allowCutting).filter(e=>this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0?this.options.layersToCut.indexOf(e)>-1:!0).filter(e=>!this._layerGroup.hasLayer(e)).filter(t=>{try{let n=!!In(e.toGeoJSON(15),t.toGeoJSON(15)).features.length>0;return n||t instanceof L.Polyline&&!(t instanceof L.Polygon)?n:!!fa(e.toGeoJSON(15),t.toGeoJSON(15))}catch{return t instanceof L.Polygon&&console.error(`You can't cut polygons with self-intersections`),!1}}).forEach(t=>{let r;if(t instanceof L.Polygon){r=L.polygon(t.getLatLngs());let e=r.getLatLngs();n.forEach(t=>{if(t&&t.snapInfo){let{latlng:n}=t,i=this._calcClosestLayer(n,[r]);if(i&&i.segment&&i.distance<this.options.snapDistance){let{segment:t}=i;if(t&&t.length===2){let{indexPath:r,parentPath:i,newIndex:a}=L.PM.Utils._getIndexFromSegment(e,t);(r.length>1?(0,ri.default)(e,i):e).splice(a,0,n)}}}})}else r=t;let i=this._cutLayer(e,r),a=L.geoJSON(i,t.options);a.getLayers().length===1&&([a]=a.getLayers()),this._setPane(a,`layerPane`);let o=a.addTo(this._map.pm._getContainingLayer());if(o.pm.enable(t.pm.options),o.pm.disable(),t._pmTempLayer=!0,e._pmTempLayer=!0,t.remove(),t.removeFrom(this._map.pm._getContainingLayer()),e.remove(),e.removeFrom(this._map.pm._getContainingLayer()),o.getLayers&&o.getLayers().length===0&&this._map.pm.removeLayer({target:o}),o instanceof L.LayerGroup&&o.eachLayer(e=>{this._addDrawnLayerProp(e)}),this._addDrawnLayerProp(o),this.options.layersToCut&&L.Util.isArray(this.options.layersToCut)&&this.options.layersToCut.length>0){let e=this.options.layersToCut.indexOf(t);e>-1&&this.options.layersToCut.splice(e,1)}this._editedLayers.push({layer:o,originalLayer:t})})},_cutLayer(e,t){let n=L.geoJSON(),r;if(t instanceof L.Polygon)r=pa(t.toGeoJSON(15),e.toGeoJSON(15));else{let i=ha(t);i.forEach(t=>{let r=wr(t,e.toGeoJSON(15)),i;i=r&&r.features.length>0?L.geoJSON(r):L.geoJSON(t),i.getLayers().forEach(t=>{ni(e.toGeoJSON(15),t.toGeoJSON(15))||t.addTo(n)})}),r=i.length>1?ga(n):n.toGeoJSON(15)}return r},_change:L.Util.falseFn}),q.Text=q.extend({initialize(e){this._map=e,this._shape=`Text`,this.toolbarButtonName=`drawText`},enable(e){L.Util.setOptions(this,e),this._enabled=!0,this._map.on(`click`,this._createMarker,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!0),this._hintMarker=L.marker(this._map.getCenter(),{interactive:!1,zIndexOffset:100,icon:L.divIcon({className:`marker-icon cursor-marker`})}),this._setPane(this._hintMarker,`vertexPane`),this._hintMarker._pmTempLayer=!0,this._hintMarker.addTo(this._map),this.options.cursorMarker&&L.DomUtil.addClass(this._hintMarker._icon,`visible`),this.options.tooltips&&this._hintMarker.bindTooltip(W(`tooltips.placeText`),{permanent:!0,offset:L.point(0,10),direction:`bottom`,opacity:.8}).openTooltip(),this._layer=this._hintMarker,this._map.on(`mousemove`,this._syncHintMarker,this),this._map.getContainer().classList.add(`geoman-draw-cursor`),this._fireDrawStart(),this._setGlobalDrawMode()},disable(){this._enabled&&(this._enabled=!1,this._map.off(`click`,this._createMarker,this),this._hintMarker?.remove(),this._map.getContainer().classList.remove(`geoman-draw-cursor`),this._map.off(`mousemove`,this._syncHintMarker,this),this._map.off(`mousemove`,this._showHintMarkerAfterMoving,this),this._map.pm.Toolbar.toggleButton(this.toolbarButtonName,!1),this.options.snappable&&this._cleanupSnapping(),this._fireDrawEnd(),this._setGlobalDrawMode())},enabled(){return this._enabled},toggle(e){this.enabled()?this.disable():this.enable(e)},_syncHintMarker(e){if(this._hintMarker.setLatLng(e.latlng),this.options.snappable){let t=e;t.target=this._hintMarker,this._handleSnapping(t)}},_createMarker(e){if(!e.latlng||this.options.requireSnapToFinish&&!this._hintMarker._snapped&&!this._isFirstLayer())return;this._hintMarker._snapped||this._hintMarker.setLatLng(e.latlng);let t=this._hintMarker.getLatLng();if(this.textArea=this._createTextArea(),this.options.textOptions?.className){let e=this.options.textOptions.className.split(` `);this.textArea.classList.add(...e)}let n=this._createTextIcon(this.textArea),r=new L.Marker(t,{textMarker:!0,_textMarkerOverPM:!0,icon:n});if(this._setPane(r,`markerPane`),this._finishLayer(r),r.pm||(r.options.draggable=!1),r.addTo(this._map.pm._getContainingLayer()),r.pm){r.pm.textArea=this.textArea,L.setOptions(r.pm,{removeIfEmpty:this.options.textOptions?.removeIfEmpty??!0});let e=this.options.textOptions?.focusAfterDraw??!0;r.pm._createTextMarker(e),this.options.textOptions?.text&&r.pm.setText(this.options.textOptions.text)}this._fireCreate(r),this._cleanupSnapping(),this.disable(),this.options.continueDrawing&&this._map.once(`mousemove`,this._showHintMarkerAfterMoving,this)},_showHintMarkerAfterMoving(e){this.enable(),this._hintMarker.setLatLng(e.latlng)},_createTextArea(){let e=document.createElement(`textarea`);return e.readOnly=!0,e.classList.add(`pm-textarea`,`pm-disabled`),e},_createTextIcon(e){return L.divIcon({className:`pm-text-marker`,html:e})}});var _a={enableLayerDrag(){if(!this.options.draggable||!this._layer._map)return;this.disable(),this._layerDragEnabled=!0,this._map||=this._layer._map,(this._layer instanceof L.Marker||this._layer instanceof L.ImageOverlay)&&L.DomEvent.on(this._getDOMElem(),`dragstart`,this._stopDOMImageDrag),this._layer.dragging&&this._layer.dragging.disable(),this._tempDragCoord=null,$t(this._layer)instanceof L.Canvas?(this._layer.on(`mouseout`,this.removeDraggingClass,this),this._layer.on(`mouseover`,this.addDraggingClass,this)):this.addDraggingClass(),this._originalMapDragState=this._layer._map.dragging._enabled,this._safeToCacheDragState=!0;let e=this._getDOMElem();e&&($t(this._layer)instanceof L.Canvas?(this._layer.on(`touchstart mousedown`,this._dragMixinOnMouseDown,this),this._map.pm._addTouchEvents(e)):L.DomEvent.on(e,`touchstart mousedown`,this._simulateMouseDownEvent,this)),this._fireDragEnable()},disableLayerDrag(){this._layerDragEnabled=!1,$t(this._layer)instanceof L.Canvas?(this._layer.off(`mouseout`,this.removeDraggingClass,this),this._layer.off(`mouseover`,this.addDraggingClass,this)):this.removeDraggingClass(),this._originalMapDragState&&this._dragging&&this._map.dragging.enable(),this._safeToCacheDragState=!1,this._layer.dragging&&this._layer.dragging.disable();let e=this._getDOMElem();e&&($t(this._layer)instanceof L.Canvas?(this._layer.off(`touchstart mousedown`,this._dragMixinOnMouseDown,this),this._map.pm._removeTouchEvents(e)):L.DomEvent.off(e,`touchstart mousedown`,this._simulateMouseDownEvent,this)),this._layerDragged&&this._fireUpdate(),this._layerDragged=!1,this._fireDragDisable()},dragging(){return this._dragging},layerDragEnabled(){return!!this._layerDragEnabled},_simulateMouseDownEvent(e){let t=e.touches?e.touches[0]:e,n={originalEvent:t,target:this._layer};return n.containerPoint=this._map.mouseEventToContainerPoint(t),n.latlng=this._map.containerPointToLatLng(n.containerPoint),this._dragMixinOnMouseDown(n),!1},_simulateMouseMoveEvent(e){let t=e.touches?e.touches[0]:e,n={originalEvent:t,target:this._layer};return n.containerPoint=this._map.mouseEventToContainerPoint(t),n.latlng=this._map.containerPointToLatLng(n.containerPoint),this._dragMixinOnMouseMove(n),!1},_simulateMouseUpEvent(e){let t={originalEvent:e.touches?e.touches[0]:e,target:this._layer};return e.type.indexOf(`touch`)===-1&&(t.containerPoint=this._map.mouseEventToContainerPoint(e),t.latlng=this._map.containerPointToLatLng(t.containerPoint)),this._dragMixinOnMouseUp(t),!1},_dragMixinOnMouseDown(e){if(e.originalEvent.button>0)return;this._overwriteEventIfItComesFromMarker(e);let t=e._fromLayerSync,n=this._syncLayers(`_dragMixinOnMouseDown`,e);if(this._layer instanceof L.Marker&&(this.options.snappable&&!t&&!n?this._initSnappableMarkers():this._disableSnapping()),this._layer instanceof L.CircleMarker){let e=`resizeableCircleMarker`;this._layer instanceof L.Circle&&(e=`resizeableCircle`),this.options.snappable&&!t&&!n?this._layer.pm.options[e]||this._initSnappableMarkersDrag():this._layer.pm.options[e]?this._layer.pm._disableSnapping():this._layer.pm._disableSnappingDrag()}this._safeToCacheDragState&&=(this._originalMapDragState=this._layer._map.dragging._enabled,!1),this._tempDragCoord=e.latlng,L.DomEvent.on(this._map.getContainer(),`touchend mouseup`,this._simulateMouseUpEvent,this),L.DomEvent.on(this._map.getContainer(),`touchmove mousemove`,this._simulateMouseMoveEvent,this)},_dragMixinOnMouseMove(e){this._overwriteEventIfItComesFromMarker(e);let t=this._getDOMElem();this._syncLayers(`_dragMixinOnMouseMove`,e),this._dragging||(this._dragging=!0,L.DomUtil.addClass(t,`leaflet-pm-dragging`),this._layer instanceof L.Marker||this._layer.bringToFront(),this._originalMapDragState&&this._map.dragging.disable(),this._fireDragStart()),this._tempDragCoord||=e.latlng,this._onLayerDrag(e),this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle()},_dragMixinOnMouseUp(e){let t=this._getDOMElem();return this._syncLayers(`_dragMixinOnMouseUp`,e),this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0,L.DomEvent.off(this._map.getContainer(),`touchmove mousemove`,this._simulateMouseMoveEvent,this),L.DomEvent.off(this._map.getContainer(),`touchend mouseup`,this._simulateMouseUpEvent,this),this._dragging?(this._layer instanceof L.CircleMarker&&this._layer.pm._updateHiddenPolyCircle(),this._layerDragged=!0,window.setTimeout(()=>{this._dragging=!1,t&&L.DomUtil.removeClass(t,`leaflet-pm-dragging`),this._fireDragEnd(),this._fireEdit(),this._layerEdited=!0},10),!0):!1},_onLayerDrag(e){let{latlng:t}=e,n={lat:t.lat-this._tempDragCoord.lat,lng:t.lng-this._tempDragCoord.lng},r=e=>e.map(e=>{if(Array.isArray(e))return r(e);let t={lat:e.lat+n.lat,lng:e.lng+n.lng};return(e.alt||e.alt===0)&&(t.alt=e.alt),t});if(this._layer instanceof L.Circle&&this._layer.options.resizeableCircle||this._layer instanceof L.CircleMarker&&this._layer.options.resizeableCircleMarker){let e=r([this._layer.getLatLng()]);this._layer.setLatLng(e[0]),this._fireChange(this._layer.getLatLng(),`Edit`)}else if(this._layer instanceof L.CircleMarker||this._layer instanceof L.Marker){let e=this._layer.getLatLng();this._layer._snapped&&(e=this._layer._orgLatLng);let t=r([e]);this._layer.setLatLng(t[0]),this._fireChange(this._layer.getLatLng(),`Edit`)}else if(this._layer instanceof L.ImageOverlay){let e=r([this._layer.getBounds().getNorthWest(),this._layer.getBounds().getSouthEast()]);this._layer.setBounds(e),this._fireChange(this._layer.getBounds(),`Edit`)}else{let e=r(this._layer.getLatLngs());this._layer.setLatLngs(e),this._fireChange(this._layer.getLatLngs(),`Edit`)}this._tempDragCoord=t,e.layer=this._layer,this._fireDrag(e)},addDraggingClass(){let e=this._getDOMElem();e&&L.DomUtil.addClass(e,`leaflet-pm-draggable`)},removeDraggingClass(){let e=this._getDOMElem();e&&L.DomUtil.removeClass(e,`leaflet-pm-draggable`)},_getDOMElem(){let e=null;return this._layer._path?e=this._layer._path:this._layer._renderer&&this._layer._renderer._container?e=this._layer._renderer._container:this._layer._image?e=this._layer._image:this._layer._icon&&(e=this._layer._icon),e},_overwriteEventIfItComesFromMarker(e){e.target.getLatLng&&(!e.target._radius||e.target._radius<=10)&&(e.containerPoint=this._map.mouseEventToContainerPoint(e.originalEvent),e.latlng=this._map.containerPointToLatLng(e.containerPoint))},_syncLayers(e,t){if(this.enabled())return!1;if(!t._fromLayerSync&&this._layer===t.target&&this.options.syncLayersOnDrag){t._fromLayerSync=!0;let n=[];if(L.Util.isArray(this.options.syncLayersOnDrag))n=this.options.syncLayersOnDrag,this.options.syncLayersOnDrag.forEach(e=>{e instanceof L.LayerGroup&&(n=n.concat(e.pm.getLayers(!0)))});else if(this.options.syncLayersOnDrag===!0&&this._parentLayerGroup)for(let e in this._parentLayerGroup){let t=this._parentLayerGroup[e];t.pm&&(n=t.pm.getLayers(!0))}return L.Util.isArray(n)&&n.length>0&&(n=n.filter(e=>!!e.pm).filter(e=>!!e.pm.options.draggable),n.forEach(n=>{n!==this._layer&&n.pm[e]&&(n._snapped=!1,n.pm[e](t))})),n.length>0}return!1},_stopDOMImageDrag(e){return e.preventDefault(),!1}},va=c(xt());function ya(e,t,n,r){return n.unproject(t.transform(n.project(e,r)),r)}function ba(e,t,n){let r=n.getMaxZoom();if(r===1/0&&(r=n.getZoom()),L.Util.isArray(e)){let r=[];return e.forEach(e=>{r.push(ba(e,t,n))}),r}return e instanceof L.LatLng?ya(e,t,n,r):null}function xa(e,t){t instanceof L.Layer&&(t=t.getLatLng());let n=e.getMaxZoom();return n===1/0&&(n=e.getZoom()),e.project(t,n)}function Sa(e,t){let n=e.getMaxZoom();return n===1/0&&(n=e.getZoom()),e.unproject(t,n)}var Ca=L.Class.extend({includes:[_a,on,{_onRotateStart(e){this._preventRenderingMarkers(!0),this._rotationOriginLatLng=this._getRotationCenter().clone(),this._rotationOriginPoint=xa(this._map,this._rotationOriginLatLng),this._rotationStartPoint=xa(this._map,e.target.getLatLng()),this._initialRotateLatLng=Zt(this._layer),this._startAngle=this.getAngle();let t=Zt(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._fireRotationStart(this._rotationLayer,t),this._fireRotationStart(this._map,t)},_onRotate(e){let t=xa(this._map,e.target.getLatLng()),n=this._rotationStartPoint,r=this._rotationOriginPoint,i=Math.atan2(t.y-r.y,t.x-r.x)-Math.atan2(n.y-r.y,n.x-r.x);this._layer.setLatLngs(this._rotateLayer(i,this._initialRotateLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let a=this;function o(e,t=[],n=-1){if(n>-1&&t.push(n),L.Util.isArray(e[0]))e.forEach((e,n)=>o(e,t.slice(),n));else{let n=t.length>0?(0,va.default)(a._markers,t):a._markers[0];e.forEach((e,t)=>{n[t].setLatLng(e)})}}o(this._layer.getLatLngs());let s=Zt(this._rotationLayer);this._rotationLayer.setLatLngs(this._rotateLayer(i,this._rotationLayer.pm._rotateOrgLatLng,this._rotationOriginLatLng,L.PM.Matrix.init(),this._map));let c=i*180/Math.PI;c=c<0?c+360:c;let l=c+this._startAngle;this._setAngle(l),this._rotationLayer.pm._setAngle(l),this._fireRotation(this._rotationLayer,c,s),this._fireRotation(this._map,c,s),this._rotationLayer.pm._fireChange(this._rotationLayer.getLatLngs(),`Rotation`)},_onRotateEnd(){let e=this._startAngle;delete this._rotationOriginLatLng,delete this._rotationOriginPoint,delete this._rotationStartPoint,delete this._initialRotateLatLng,delete this._startAngle;let t=Zt(this._rotationLayer,this._rotationLayer.pm._rotateOrgLatLng);this._rotationLayer.pm._rotateOrgLatLng=Zt(this._rotationLayer),this._fireRotationEnd(this._rotationLayer,e,t),this._fireRotationEnd(this._map,e,t),this._rotationLayer.pm._fireEdit(this._rotationLayer,`Rotation`),this._preventRenderingMarkers(!1),this._layerRotated=!0},_rotateLayer(e,t,n,r,i){let a=xa(i,n);return this._matrix=r.clone().rotate(e,a).flip(),ba(t,this._matrix,i)},_setAngle(e){e=e<0?e+360:e,this._angle=e%360},_getRotationCenter(){if(this._rotationCenter)return this._rotationCenter;let e=L.polygon(this._layer.getLatLngs(),{stroke:!1,fill:!1,pmIgnore:!0}).addTo(this._layer._map),t=e.getCenter();return e.removeFrom(this._layer._map),t},enableRotate(){if(!this.options.allowRotation){this.disableRotate();return}this.rotateEnabled()&&this.disableRotate(),this._layer instanceof L.Rectangle&&this._angle===void 0&&this.setInitAngle(Jt(this._layer._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0),this._rotatePoly=L.polygon(this._layer.getLatLngs(),{fill:!1,stroke:!1,pmIgnore:!1,snapIgnore:!0}),this._rotatePoly._pmTempLayer=!0,this._rotatePoly.addTo(this._layer._map),this._rotatePoly.pm._setAngle(this.getAngle()),this._rotatePoly.pm.setRotationCenter(this.getRotationCenter()),this._rotatePoly.pm.setOptions(this._layer._map.pm.getGlobalOptions()),this._rotatePoly.pm.setOptions({rotate:!0,snappable:!1,hideMiddleMarkers:!0}),this._rotatePoly.pm._rotationLayer=this._layer,this._rotatePoly.pm.enable(),this._rotateOrgLatLng=Zt(this._layer),this._rotateEnabled=!0,this._layer.on(`remove`,this.disableRotate,this),this._fireRotationEnable(this._layer),this._fireRotationEnable(this._layer._map)},disableRotate(){this.rotateEnabled()&&(this._rotatePoly.pm._layerRotated&&this._fireUpdate(),this._rotatePoly.pm._layerRotated=!1,this._rotatePoly.pm.disable(),this._rotatePoly.remove(),this._rotatePoly.pm.setOptions({rotate:!1}),this._rotatePoly=void 0,this._rotateOrgLatLng=void 0,this._layer.off(`remove`,this.disableRotate,this),this._rotateEnabled=!1,this._fireRotationDisable(this._layer),this._fireRotationDisable(this._layer._map))},rotateEnabled(){return!!this._rotateEnabled},rotateLayer(e){let t=this.getAngle(),n=this._layer.getLatLngs(),r=e*(Math.PI/180);this._layer.setLatLngs(this._rotateLayer(r,this._layer.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._layer._map)),this._rotateOrgLatLng=L.polygon(this._layer.getLatLngs()).getLatLngs(),this._setAngle(this.getAngle()+e),this.rotateEnabled()&&this._rotatePoly&&this._rotatePoly.pm.enabled()&&(this._rotatePoly.setLatLngs(this._rotateLayer(r,this._rotatePoly.getLatLngs(),this._getRotationCenter(),L.PM.Matrix.init(),this._rotatePoly._map)),this._rotatePoly.pm._initMarkers());let i=this.getAngle()-t;i=i<0?i+360:i,this._startAngle=t,this._fireRotation(this._layer,i,n,this._layer),this._fireRotation(this._map||this._layer._map,i,n,this._layer),delete this._startAngle,this._fireChange(this._layer.getLatLngs(),`Rotation`)},rotateLayerToAngle(e){let t=e-this.getAngle();this.rotateLayer(t)},getAngle(){return this._angle||0},setInitAngle(e){this._setAngle(e)},getRotationCenter(){return this._getRotationCenter()},setRotationCenter(e){this._rotationCenter=e,this._rotatePoly&&this._rotatePoly.pm.setRotationCenter(e)}},Ht],options:{snappable:!0,snapDistance:20,allowSelfIntersection:!0,allowSelfIntersectionEdit:!1,preventMarkerRemoval:!1,removeLayerBelowMinVertexCount:!0,limitMarkersToCount:-1,hideMiddleMarkers:!1,snapSegment:!0,syncLayersOnDrag:!1,draggable:!0,allowEditing:!0,allowRemoval:!0,allowCutting:!0,allowRotation:!0,addVertexOn:`click`,removeVertexOn:`contextmenu`,removeVertexValidation:void 0,addVertexValidation:void 0,moveVertexValidation:void 0,resizeableCircleMarker:!1,resizeableCircle:!0,snapMiddle:!1,snapVertex:!0},setOptions(e){L.Util.setOptions(this,e)},getOptions(){return this.options},applyOptions(){},isPolygon(){return this._layer instanceof L.Polygon},getShape(){return this._shape},_setPane(e,t){t===`layerPane`?e.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.layerPane||`overlayPane`:t===`vertexPane`?e.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.vertexPane||`markerPane`:t===`markerPane`&&(e.options.pane=this._map.pm.globalOptions.panes&&this._map.pm.globalOptions.panes.markerPane||`markerPane`)},remove(){(this._map||this._layer._map).pm.removeLayer({target:this._layer})},_vertexValidation(e,t){let n=t.target,r={layer:this._layer,marker:n,event:t},i=``;return e===`move`?i=`moveVertexValidation`:e===`add`?i=`addVertexValidation`:e===`remove`&&(i=`removeVertexValidation`),this.options[i]&&typeof this.options[i]==`function`&&!this.options[i](r)?(e===`move`&&(n._cancelDragEventChain=n.getLatLng()),!1):(n._cancelDragEventChain=null,!0)},_vertexValidationDrag(e){return e._cancelDragEventChain?(e._latlng=e._cancelDragEventChain,e.update(),!1):!0},_vertexValidationDragEnd(e){return e._cancelDragEventChain?(e._cancelDragEventChain=null,!1):!0}});Ca.LayerGroup=L.Class.extend({initialize(e){this._layerGroup=e,this._layers=this.getLayers(),this._getMap(),this._layers.forEach(e=>this._initLayer(e)),this._layerGroup.on(`layeradd`,L.Util.throttle(e=>{if(e.layer._pmTempLayer)return;this._layers=this.getLayers();let t=this._layers.filter(e=>!e.pm._parentLayerGroup||!(this._layerGroup._leaflet_id in e.pm._parentLayerGroup));t.forEach(e=>{this._initLayer(e)}),t.length>0&&this._getMap()&&this._getMap().pm.globalEditModeEnabled()&&this.enabled()&&this.enable(this.getOptions())},100,this),this),this._layerGroup.on(`layerremove`,e=>{this._removeLayerFromGroup(e.target)},this),this._layerGroup.on(`layerremove`,L.Util.throttle(e=>{e.target._pmTempLayer||(this._layers=this.getLayers())},100,this),this)},enable(e,t=[]){t.length===0&&(this._layers=this.getLayers()),this._options=e,this._layers.forEach(n=>{n instanceof L.LayerGroup?t.indexOf(n._leaflet_id)===-1&&(t.push(n._leaflet_id),n.pm.enable(e,t)):n.pm.enable(e)})},disable(e=[]){e.length===0&&(this._layers=this.getLayers()),this._layers.forEach(t=>{t instanceof L.LayerGroup?e.indexOf(t._leaflet_id)===-1&&(e.push(t._leaflet_id),t.pm.disable(e)):t.pm.disable()})},enabled(e=[]){return e.length===0&&(this._layers=this.getLayers()),!!this._layers.find(t=>t instanceof L.LayerGroup?e.indexOf(t._leaflet_id)===-1?(e.push(t._leaflet_id),t.pm.enabled(e)):!1:t.pm.enabled())},toggleEdit(e,t=[]){t.length===0&&(this._layers=this.getLayers()),this._options=e,this._layers.forEach(n=>{n instanceof L.LayerGroup?t.indexOf(n._leaflet_id)===-1&&(t.push(n._leaflet_id),n.pm.toggleEdit(e,t)):n.pm.toggleEdit(e)})},_initLayer(e){let t=L.Util.stamp(this._layerGroup);e.pm._parentLayerGroup||(e.pm._parentLayerGroup={}),e.pm._parentLayerGroup[t]=this._layerGroup},_removeLayerFromGroup(e){if(e.pm&&e.pm._layerGroup){let t=L.Util.stamp(this._layerGroup);delete e.pm._layerGroup[t]}},dragging(){return this._layers=this.getLayers(),this._layers?!!this._layers.find(e=>e.pm.dragging()):!1},getOptions(){return this.options},_getMap(){return this._map||this._layers.find(e=>!!e._map)?._map||null},getLayers(e=!1,t=!0,n=!0,r=[]){let i=[];return e?this._layerGroup.getLayers().forEach(e=>{i.push(e),e instanceof L.LayerGroup&&r.indexOf(e._leaflet_id)===-1&&(r.push(e._leaflet_id),i=i.concat(e.pm.getLayers(!0,!0,!0,r)))}):i=this._layerGroup.getLayers(),n&&(i=i.filter(e=>!(e instanceof L.LayerGroup))),t&&(i=i.filter(e=>!!e.pm),i=i.filter(e=>!e._pmTempLayer),i=i.filter(e=>!L.PM.optIn&&!e.options.pmIgnore||L.PM.optIn&&e.options.pmIgnore===!1)),i},setOptions(e,t=[]){t.length===0&&(this._layers=this.getLayers()),this.options=e,this._layers.forEach(n=>{n.pm&&(n instanceof L.LayerGroup?t.indexOf(n._leaflet_id)===-1&&(t.push(n._leaflet_id),n.pm.setOptions(e,t)):n.pm.setOptions(e))})}}),Ca.Marker=Ca.extend({_shape:`Marker`,initialize(e){this._layer=e,this._enabled=!1,this._layer.on(`dragend`,this._onDragEnd,this)},enable(e={draggable:!0}){if(L.Util.setOptions(this,e),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on(`remove`,this.disable,this),this._enabled=!0,this._layer.on(`pm:dragstart`,this._onDragStart,this),this._layer.on(`pm:dragend`,this._onMarkerDragEnd,this),this._fireEnable()},disable(){this.enabled()&&(this.disableLayerDrag(),this._layer.off(`remove`,this.disable,this),this._layer.off(`contextmenu`,this._removeMarker,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1)},enabled(){return this._enabled},toggleEdit(e){this.enabled()?this.disable():this.enable(e)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this.options.draggable?this.enableLayerDrag():this.disableLayerDrag(),this.options.preventMarkerRemoval||this._layer.on(`contextmenu`,this._removeMarker,this)},_removeMarker(e){let t=e.target;t.remove(),this._fireRemove(t),this._fireRemove(this._map,t)},_onDragStart(){this._map.pm.Draw.Marker._layerIsDragging=!0},_onMarkerDragEnd(){this._map.pm.Draw.Marker._layerIsDragging=!1},_onDragEnd(){this._fireEdit(),this._layerEdited=!0},_initSnappableMarkers(){let e=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,e.off(`pm:drag`,this._handleSnapping,this),e.on(`pm:drag`,this._handleSnapping,this),e.off(`pm:dragend`,this._cleanupSnapping,this),e.on(`pm:dragend`,this._cleanupSnapping,this),e.off(`pm:dragstart`,this._unsnap,this),e.on(`pm:dragstart`,this._unsnap,this)},_disableSnapping(){let e=this._layer;e.off(`pm:drag`,this._handleSnapping,this),e.off(`pm:dragend`,this._cleanupSnapping,this),e.off(`pm:dragstart`,this._unsnap,this)}});var wa=c(xt());Ca.Line=Ca.extend({includes:[{filterMarkerGroup(){this.markerCache=[],this.createCache(),this._layer.on(`pm:edit`,this.createCache,this),this.applyLimitFilters({}),this.throttledApplyLimitFilters||=L.Util.throttle(this.applyLimitFilters,100,this),this._layer.on(`pm:disable`,this._removeMarkerLimitEvents,this),this._layer.on(`remove`,this._removeMarkerLimitEvents,this),this.options.limitMarkersToCount>-1&&(this._layer.on(`pm:vertexremoved`,this._initMarkers,this),this._map.on(`mousemove`,this.throttledApplyLimitFilters,this))},_removeMarkerLimitEvents(){this._map.off(`mousemove`,this.throttledApplyLimitFilters,this),this._layer.off(`pm:edit`,this.createCache,this),this._layer.off(`pm:disable`,this._removeMarkerLimitEvents,this),this._layer.off(`pm:vertexremoved`,this._initMarkers,this)},createCache(){this.markerCache=[...this._markerGroup.getLayers(),...this.markerCache].filter((e,t,n)=>n.indexOf(e)===t)},_removeFromCache(e){let t=this.markerCache.indexOf(e);t>-1&&this.markerCache.splice(t,1)},renderLimits(e){this.markerCache.forEach(t=>{e.includes(t)?this._markerGroup.addLayer(t):this._markerGroup.removeLayer(t)})},applyLimitFilters({latlng:e={lat:0,lng:0}}){if(this._preventRenderMarkers)return;let t=[...this._filterClosestMarkers(e)];this.renderLimits(t)},_filterClosestMarkers(e){let t=[...this.markerCache],n=this.options.limitMarkersToCount;return n===-1?t:(t.sort((t,n)=>t._latlng.distanceTo(e)-n._latlng.distanceTo(e)),t.filter((e,t)=>n>-1?t<n:!0))},_preventRenderMarkers:!1,_preventRenderingMarkers(e){this._preventRenderMarkers=!!e}}],_shape:`Line`,initialize(e){this._layer=e,this._enabled=!1},enable(e){if(L.Util.setOptions(this,e),this._map=this._layer._map,this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()&&this.disable(),this._enabled=!0,this._initMarkers(),this.applyOptions(),this._layer.on(`remove`,this.disable,this),this.options.allowSelfIntersection||this._layer.on(`pm:vertexremoved`,this._handleSelfIntersectionOnVertexRemoval,this),this.options.allowSelfIntersection?this.cachedColor=void 0:(this._layer.options.color===`#f00000ff`?this.isRed=!0:(this.cachedColor=this._layer.options.color,this.isRed=!1),this._handleLayerStyle()),this._fireEnable()}},disable(){if(!this.enabled()||this._dragging)return;this._enabled=!1,this._markerGroup.clearLayers(),this._markerGroup.removeFrom(this._map),this._layer.off(`remove`,this.disable,this),this.options.allowSelfIntersection||this._layer.off(`pm:vertexremoved`,this._handleSelfIntersectionOnVertexRemoval,this);let e=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(e,`leaflet-pm-draggable`),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()},enabled(){return this._enabled},toggleEdit(e){return this.enabled()?this.disable():this.enable(e),this.enabled()},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initMarkers(){let e=this._map,t=this._layer.getLatLngs();this._markerGroup&&(this._markerGroup.removeFrom(e),this._markerGroup.clearLayers()),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0;let n=e=>{if(Array.isArray(e[0]))return e.map(n,this);let t=e.map(this._createMarker,this);return this.options.hideMiddleMarkers!==!0&&e.map((n,r)=>{let i=this.isPolygon()?(r+1)%e.length:r+1;return this._createMiddleMarker(t[r],t[i])}),t};this._markers=n(t),this.filterMarkerGroup(),e.addLayer(this._markerGroup)},_createMarker(e){let t=new L.Marker(e,{draggable:!0,icon:L.divIcon({className:`marker-icon`})});return this._setPane(t,`vertexPane`),t._pmTempLayer=!0,this.options.rotate?(t.on(`dragstart`,this._onRotateStart,this),t.on(`drag`,this._onRotate,this),t.on(`dragend`,this._onRotateEnd,this)):(t.on(`click`,this._onVertexClick,this),t.on(`dragstart`,this._onMarkerDragStart,this),t.on(`move`,this._onMarkerDrag,this),t.on(`dragend`,this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||t.on(this.options.removeVertexOn,this._removeMarker,this)),this._markerGroup.addLayer(t),t},_createMiddleMarker(e,t){if(!e||!t)return!1;let n=L.PM.Utils.calcMiddleLatLng(this._map,e.getLatLng(),t.getLatLng()),r=this._createMarker(n),i=L.divIcon({className:`marker-icon marker-icon-middle`});return r.setIcon(i),r.leftM=e,r.rightM=t,e._middleMarkerNext=r,t._middleMarkerPrev=r,r.on(this.options.addVertexOn,this._onMiddleMarkerClick,this),r.on(`movestart`,this._onMiddleMarkerMoveStart,this),r},_onMiddleMarkerClick(e){let t=e.target;if(!this._vertexValidation(`add`,e))return;let n=L.divIcon({className:`marker-icon`});t.setIcon(n),this._addMarker(t,t.leftM,t.rightM)},_onMiddleMarkerMoveStart(e){let t=e.target;if(t.on(`moveend`,this._onMiddleMarkerMoveEnd,this),!this._vertexValidation(`add`,e)){t.on(`move`,this._onMiddleMarkerMovePrevent,this);return}t._dragging=!0,this._addMarker(t,t.leftM,t.rightM)},_onMiddleMarkerMovePrevent(e){let t=e.target;this._vertexValidationDrag(t)},_onMiddleMarkerMoveEnd(e){let t=e.target;if(t.off(`move`,this._onMiddleMarkerMovePrevent,this),t.off(`moveend`,this._onMiddleMarkerMoveEnd,this),!this._vertexValidationDragEnd(t))return;let n=L.divIcon({className:`marker-icon`});t.setIcon(n),setTimeout(()=>{delete t._dragging},100)},_addMarker(e,t,n){e.off(`movestart`,this._onMiddleMarkerMoveStart,this),e.off(this.options.addVertexOn,this._onMiddleMarkerClick,this);let r=e.getLatLng(),i=this._layer._latlngs;delete e.leftM,delete e.rightM;let{indexPath:a,index:o,parentPath:s}=L.PM.Utils.findDeepMarkerIndex(this._markers,t),c=a.length>1?(0,wa.default)(i,s):i,l=a.length>1?(0,wa.default)(this._markers,s):this._markers;c.splice(o+1,0,r),l.splice(o+1,0,e),this._layer.setLatLngs(i),this.options.hideMiddleMarkers!==!0&&(this._createMiddleMarker(t,e),this._createMiddleMarker(e,n)),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),`Edit`),this._fireVertexAdded(e,L.PM.Utils.findDeepMarkerIndex(this._markers,e).indexPath,r),this.options.snappable&&this._initSnappableMarkers()},hasSelfIntersection(){return yn(this._layer.toGeoJSON(15)).features.length>0},_handleSelfIntersectionOnVertexRemoval(){this._handleLayerStyle(!0)&&(this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers())},_handleLayerStyle(e){let t=this._layer,n,r;if(this.options.allowSelfIntersection?n=!1:(r=yn(this._layer.toGeoJSON(15)),n=r.features.length>0),n){if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!0),this.isRed)return n;e?this._flashLayer():(t.setStyle({color:`#f00000ff`}),this.isRed=!0),this._fireIntersect(r)}else t.setStyle({color:this.cachedColor}),this.isRed=!1,!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._updateDisabledMarkerStyle(this._markers,!1);return n},_flashLayer(){this.cachedColor||=this._layer.options.color,this._layer.setStyle({color:`#f00000ff`}),this.isRed=!0,window.setTimeout(()=>{this._layer.setStyle({color:this.cachedColor}),this.isRed=!1},200)},_updateDisabledMarkerStyle(e,t){e.forEach(e=>{Array.isArray(e)?this._updateDisabledMarkerStyle(e,t):e._icon&&(t&&!this._checkMarkerAllowedToDrag(e)?L.DomUtil.addClass(e._icon,`vertexmarker-disabled`):L.DomUtil.removeClass(e._icon,`vertexmarker-disabled`))})},_removeMarker(e){let t=e.target;if(!this._vertexValidation(`remove`,e))return;this.options.allowSelfIntersection||(this._coordsBeforeEdit=Zt(this._layer,this._layer.getLatLngs()));let n=this._layer.getLatLngs(),{indexPath:r,index:i,parentPath:a}=L.PM.Utils.findDeepMarkerIndex(this._markers,t);if(!r)return;let o=r.length>1?(0,wa.default)(n,a):n,s=r.length>1?(0,wa.default)(this._markers,a):this._markers,c=a[a.length-1]>0&&this._layer instanceof L.Polygon;if(!this.options.removeLayerBelowMinVertexCount&&!c&&(o.length<=2||this.isPolygon()&&o.length<=3)){this._flashLayer();return}o.splice(i,1),this._layer.setLatLngs(n),this.isPolygon()&&o.length<=2&&o.splice(0,o.length);let l=!1;if(o.length<=1&&(o.splice(0,o.length),a.length>1&&r.length>1&&(n=G(n)),this._layer.setLatLngs(n),this._initMarkers(),l=!0),Gt(n)||this._layer.remove(),n=G(n),this._layer.setLatLngs(n),this._markers=G(this._markers),!l&&(s=r.length>1?(0,wa.default)(this._markers,a):this._markers,t._middleMarkerPrev&&(this._markerGroup.removeLayer(t._middleMarkerPrev),this._removeFromCache(t._middleMarkerPrev)),t._middleMarkerNext&&(this._markerGroup.removeLayer(t._middleMarkerNext),this._removeFromCache(t._middleMarkerNext)),this._markerGroup.removeLayer(t),this._removeFromCache(t),s)){let e,t;if(this.isPolygon()?(e=(i+1)%s.length,t=(i+(s.length-1))%s.length):(t=i-1<0?void 0:i-1,e=i+1>=s.length?void 0:i+1),e!==t){let n=s[t],r=s[e];this.options.hideMiddleMarkers!==!0&&this._createMiddleMarker(n,r)}s.splice(i,1)}this._fireEdit(),this._layerEdited=!0,this._fireVertexRemoved(t,r),this._fireChange(this._layer.getLatLngs(),`Edit`)},updatePolygonCoordsFromMarkerDrag(e){let t=this._layer.getLatLngs(),n=e.getLatLng(),{indexPath:r,index:i,parentPath:a}=L.PM.Utils.findDeepMarkerIndex(this._markers,e),o=r.length>1?(0,wa.default)(t,a):t;n.alt=o[i].alt,o.splice(i,1,n),this._layer.setLatLngs(t)},_getNeighborMarkers(e){let{indexPath:t,index:n,parentPath:r}=L.PM.Utils.findDeepMarkerIndex(this._markers,e),i=t.length>1?(0,wa.default)(this._markers,r):this._markers,a=(n+1)%i.length;return{prevMarker:i[(n+(i.length-1))%i.length],nextMarker:i[a]}},_checkMarkerAllowedToDrag(e){let{prevMarker:t,nextMarker:n}=this._getNeighborMarkers(e),r=L.polyline([t.getLatLng(),e.getLatLng()]),i=L.polyline([e.getLatLng(),n.getLatLng()]),a=In(this._layer.toGeoJSON(15),r.toGeoJSON(15)).features.filter(n=>{let r=n.geometry.coordinates,i=L.latLng(r[1],r[0]);return!i.equals(t.getLatLng())&&!i.equals(e.getLatLng())}).length,o=In(this._layer.toGeoJSON(15),i.toGeoJSON(15)).features.filter(t=>{let r=t.geometry.coordinates,i=L.latLng(r[1],r[0]);return!i.equals(n.getLatLng())&&!i.equals(e.getLatLng())}).length;return!(a<1&&o<1)},_onMarkerDragStart(e){let t=e.target;if(this._preventRenderingMarkers(!0),this.cachedColor||=this._layer.options.color,!this._vertexValidation(`move`,e))return;let{indexPath:n}=L.PM.Utils.findDeepMarkerIndex(this._markers,t);this._fireMarkerDragStart(e,n),this.options.allowSelfIntersection||(this._coordsBeforeEdit=Zt(this._layer,this._layer.getLatLngs())),!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()?this._markerAllowedToDrag=this._checkMarkerAllowedToDrag(t):this._markerAllowedToDrag=null},_onMarkerDrag(e){let t=e.target;if(!this._vertexValidationDrag(t))return;let{indexPath:n,index:r,parentPath:i}=L.PM.Utils.findDeepMarkerIndex(this._markers,t);if(!n)return;if(!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this.hasSelfIntersection()&&this._markerAllowedToDrag===!1){this._layer.setLatLngs(this._coordsBeforeEdit),this._initMarkers(),this._handleLayerStyle();return}this.updatePolygonCoordsFromMarkerDrag(t);let a=n.length>1?(0,wa.default)(this._markers,i):this._markers,o=(r+1)%a.length,s=(r+(a.length-1))%a.length,c=t.getLatLng(),l=a[s].getLatLng(),u=a[o].getLatLng();if(t._middleMarkerNext){let e=L.PM.Utils.calcMiddleLatLng(this._map,c,u);t._middleMarkerNext.setLatLng(e)}if(t._middleMarkerPrev){let e=L.PM.Utils.calcMiddleLatLng(this._map,c,l);t._middleMarkerPrev.setLatLng(e)}this.options.allowSelfIntersection||this._handleLayerStyle(),this._fireMarkerDrag(e,n),this._fireChange(this._layer.getLatLngs(),`Edit`)},_onMarkerDragEnd(e){let t=e.target;if(this._preventRenderingMarkers(!1),!this._vertexValidationDragEnd(t))return;let{indexPath:n}=L.PM.Utils.findDeepMarkerIndex(this._markers,t),r=!this.options.allowSelfIntersection&&this.hasSelfIntersection();r&&this.options.allowSelfIntersectionEdit&&this._markerAllowedToDrag&&(r=!1);let i=!this.options.allowSelfIntersection&&r;if(this._fireMarkerDragEnd(e,n,i),i){this._layer.setLatLngs(this._coordsBeforeEdit),this._coordsBeforeEdit=null,this._initMarkers(),this.options.snappable&&this._initSnappableMarkers(),this._handleLayerStyle(),this._fireLayerReset(e,n);return}!this.options.allowSelfIntersection&&this.options.allowSelfIntersectionEdit&&this._handleLayerStyle(),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),`Edit`)},_onVertexClick(e){let t=e.target;if(t._dragging)return;let{indexPath:n}=L.PM.Utils.findDeepMarkerIndex(this._markers,t);this._fireVertexClick(e,n)}}),Ca.Polygon=Ca.Line.extend({_shape:`Polygon`,_checkMarkerAllowedToDrag(e){let{prevMarker:t,nextMarker:n}=this._getNeighborMarkers(e),r=L.polyline([t.getLatLng(),e.getLatLng()]),i=L.polyline([e.getLatLng(),n.getLatLng()]),a=In(this._layer.toGeoJSON(15),r.toGeoJSON(15)).features.filter(n=>{let r=n.geometry.coordinates,i=L.latLng(r[1],r[0]);return!i.equals(t.getLatLng())&&!i.equals(e.getLatLng())}).length,o=In(this._layer.toGeoJSON(15),i.toGeoJSON(15)).features.filter(t=>{let r=t.geometry.coordinates,i=L.latLng(r[1],r[0]);return!i.equals(n.getLatLng())&&!i.equals(e.getLatLng())}).length;return!(a<1&&o<1)}}),Ca.Rectangle=Ca.Polygon.extend({_shape:`Rectangle`,_initMarkers(){let e=this._map,t=this._findCorners();this._markerGroup&&this._markerGroup.clearLayers(),this._markerGroup=new L.FeatureGroup,this._markerGroup._pmTempLayer=!0,e.addLayer(this._markerGroup),this._markers=[],this._markers[0]=t.map(this._createMarker,this),[this._cornerMarkers]=this._markers,this._layer.getLatLngs()[0].forEach((e,t)=>{let n=this._cornerMarkers.find(e=>e._index===t);n&&n.setLatLng(e)})},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping(),this._addMarkerEvents()},_createMarker(e,t){let n=new L.Marker(e,{draggable:!0,icon:L.divIcon({className:`marker-icon`})});return this._setPane(n,`vertexPane`),n._origLatLng=e,n._index=t,n._pmTempLayer=!0,n.on(`click`,this._onVertexClick,this),this._markerGroup.addLayer(n),n},_addMarkerEvents(){this._markers[0].forEach(e=>{e.on(`dragstart`,this._onMarkerDragStart,this),e.on(`drag`,this._onMarkerDrag,this),e.on(`dragend`,this._onMarkerDragEnd,this),this.options.preventMarkerRemoval||e.on(`contextmenu`,this._removeMarker,this)})},_removeMarker(){return null},_onMarkerDragStart(e){if(!this._vertexValidation(`move`,e))return;let t=e.target;t._oppositeCornerLatLng=this._cornerMarkers.find(e=>e._index===(t._index+2)%4).getLatLng(),t._snapped=!1;let{indexPath:n}=L.PM.Utils.findDeepMarkerIndex(this._markers,t);this._fireMarkerDragStart(e,n)},_onMarkerDrag(e){let t=e.target;if(!this._vertexValidationDrag(t)||t._index===void 0)return;this._adjustRectangleForMarkerMove(t);let{indexPath:n}=L.PM.Utils.findDeepMarkerIndex(this._markers,t);this._fireMarkerDrag(e,n),this._fireChange(this._layer.getLatLngs(),`Edit`)},_onMarkerDragEnd(e){let t=e.target;if(!this._vertexValidationDragEnd(t))return;this._cornerMarkers.forEach(e=>{delete e._oppositeCornerLatLng});let{indexPath:n}=L.PM.Utils.findDeepMarkerIndex(this._markers,t);this._fireMarkerDragEnd(e,n),this._fireEdit(),this._layerEdited=!0,this._fireChange(this._layer.getLatLngs(),`Edit`)},_adjustRectangleForMarkerMove(e){L.extend(e._origLatLng,e._latlng);let t=L.PM.Utils._getRotatedRectangle(e.getLatLng(),e._oppositeCornerLatLng,this.getAngle(),this._map);this._layer.setLatLngs(t),this._adjustAllMarkers(e),this._layer.redraw()},_adjustAllMarkers(e){let t=this._layer.getLatLngs()[0];if(t&&t.length!==4&&t.length>0)t.forEach((e,t)=>{this._cornerMarkers[t].setLatLng(e)}),this._cornerMarkers.slice(t.length).forEach(e=>{e.setLatLng(t[0])});else if(!t||!t.length)console.error(`The layer has no LatLngs`);else{let n=t.findIndex(t=>e.getLatLng().equals(t));n>-1?(this._cornerMarkers[(e._index+1)%4].setLatLng(t[(n+1)%4]),this._cornerMarkers[(e._index+2)%4].setLatLng(t[(n+2)%4]),this._cornerMarkers[(e._index+3)%4].setLatLng(t[(n+3)%4])):this._cornerMarkers.forEach(e=>{e.setLatLng(t[e._index])})}},_findCorners(){this._angle===void 0&&this.setInitAngle(Jt(this._map,this._layer.getLatLngs()[0][0],this._layer.getLatLngs()[0][1])||0);let e=this._layer.getLatLngs()[0];return L.PM.Utils._getRotatedRectangle(e[0],e[2],this.getAngle(),this._map||this)}}),Ca.CircleMarker=Ca.extend({_shape:`CircleMarker`,initialize(e){this._layer=e,this._enabled=!1,this._minRadiusOption=`minRadiusCircleMarker`,this._maxRadiusOption=`maxRadiusCircleMarker`,this._editableOption=`resizeableCircleMarker`,this._updateHiddenPolyCircle()},enable(e={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,e),this.options.editable&&(this.options.resizeableCircleMarker=this.options.editable,delete this.options.editable),!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._layer.on(`remove`,this.disable,this),this._enabled=!0,this._extendingEnable(),this._updateHiddenPolyCircle(),this._fireEnable()},_extendingEnable(){this._layer.on(`pm:dragstart`,this._onDragStart,this),this._layer.on(`pm:drag`,this._onMarkerDrag,this),this._layer.on(`pm:dragend`,this._onMarkerDragEnd,this)},disable(){this.dragging()||(this._map||=this._layer._map,this._map&&this.enabled()&&(this.layerDragEnabled()&&this.disableLayerDrag(),this._helperLayers&&(this._helperLayers.clearLayers(),this._helperLayers.removeFrom(this._map)),this.options[this._editableOption]?(this._map.off(`move`,this._syncMarkers,this),this._outerMarker.off(`drag`,this._handleOuterMarkerSnapping,this)):this._map.off(`move`,this._updateHiddenPolyCircle,this),this._extendingDisable(),this._layer.off(`remove`,this.disable,this),this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1))},_extendingDisable(){this._layer.off(`contextmenu`,this._removeMarker,this)},enabled(){return this._enabled},toggleEdit(e){this.enabled()?this.disable():this.enable(e)},applyOptions(){this.options[this._editableOption]?(this._initMarkers(),this._map.on(`move`,this._syncMarkers,this),this.options.snappable?(this._initSnappableMarkers(),this._outerMarker.on(`drag`,this._handleOuterMarkerSnapping,this),this._outerMarker.on(`move`,this._syncHintLine,this),this._outerMarker.on(`move`,this._syncCircleRadius,this)):this._disableSnapping()):(this.options.draggable&&this.enableLayerDrag(),this._map.on(`move`,this._updateHiddenPolyCircle,this),this.options.snappable?this._initSnappableMarkersDrag():this._disableSnappingDrag()),this._extendingApplyOptions()},_extendingApplyOptions(){this.options.preventMarkerRemoval||this._layer.on(`contextmenu`,this._removeMarker,this)},_initMarkers(){let e=this._map;this._helperLayers&&(this._helperLayers.removeFrom(e),this._helperLayers.clearLayers()),this._helperLayers=new L.FeatureGroup,this._helperLayers._pmTempLayer=!0,this._helperLayers.addTo(e);let t=this._layer.getLatLng(),n=this._layer._radius,r=this._getLatLngOnCircle(t,n);this._centerMarker=this._createCenterMarker(t),this._outerMarker=this._createOuterMarker(r),this._markers=[this._centerMarker,this._outerMarker],this._createHintLine(this._centerMarker,this._outerMarker)},_getLatLngOnCircle(e,t){let n=this._map.project(e),r=L.point(n.x+t,n.y);return this._map.unproject(r)},_createHintLine(e,t){let n=e.getLatLng(),r=t.getLatLng();this._hintline=L.polyline([n,r],this.options.hintlineStyle),this._setPane(this._hintline,`layerPane`),this._hintline._pmTempLayer=!0,this._helperLayers.addLayer(this._hintline)},_createCenterMarker(e){let t=this._createMarker(e);return this.options.draggable?(L.DomUtil.addClass(t._icon,`leaflet-pm-draggable`),t.on(`move`,this._moveCircle,this)):t.dragging.disable(),t},_createOuterMarker(e){let t=this._createMarker(e);return t.on(`drag`,this._resizeCircle,this),t},_createMarker(e){let t=new L.Marker(e,{draggable:!0,icon:L.divIcon({className:`marker-icon`})});return this._setPane(t,`vertexPane`),t._origLatLng=e,t._pmTempLayer=!0,t.on(`dragstart`,this._onMarkerDragStart,this),t.on(`drag`,this._onMarkerDrag,this),t.on(`dragend`,this._onMarkerDragEnd,this),t.on(`click`,this._onVertexClick,this),this._helperLayers.addLayer(t),t},_moveCircle(e){if(e.target._cancelDragEventChain)return;let t=this._centerMarker.getLatLng();this._layer.setLatLng(t);let n=this._layer._radius,r=this._getLatLngOnCircle(t,n);this._outerMarker._latlng=r,this._outerMarker.update(),this._syncHintLine(),this._updateHiddenPolyCircle(),this._fireCenterPlaced(`Edit`),this._fireChange(this._layer.getLatLng(),`Edit`)},_syncMarkers(){let e=this._layer.getLatLng(),t=this._layer._radius,n=this._getLatLngOnCircle(e,t);this._outerMarker.setLatLng(n),this._centerMarker.setLatLng(e),this._syncHintLine(),this._updateHiddenPolyCircle()},_resizeCircle(){this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker()),this._syncHintLine(),this._syncCircleRadius()},_syncCircleRadius(){let e=this._centerMarker.getLatLng(),t=this._outerMarker.getLatLng(),n=this._distanceCalculation(e,t);this.options[this._minRadiusOption]&&n<this.options[this._minRadiusOption]?this._layer.setRadius(this.options[this._minRadiusOption]):this.options[this._maxRadiusOption]&&n>this.options[this._maxRadiusOption]?this._layer.setRadius(this.options[this._maxRadiusOption]):this._layer.setRadius(n),this._updateHiddenPolyCircle(),this._fireChange(this._layer.getLatLng(),`Edit`)},_syncHintLine(){let e=this._centerMarker.getLatLng(),t=this._outerMarker.getLatLng();this._hintline.setLatLngs([e,t])},_removeMarker(){this.options[this._editableOption]&&this.disable(),this._layer.remove(),this._fireRemove(this._layer),this._fireRemove(this._map,this._layer)},_onDragStart(){this._map.pm.Draw.CircleMarker._layerIsDragging=!0},_onMarkerDragStart(e){this._vertexValidation(`move`,e)&&this._fireMarkerDragStart(e)},_onMarkerDrag(e){let t=e.target;t instanceof L.Marker&&!this._vertexValidationDrag(t)||this._fireMarkerDrag(e)},_onMarkerDragEnd(e){this._extedingMarkerDragEnd();let t=e.target;this._vertexValidationDragEnd(t)&&(this.options[this._editableOption]&&(this._fireEdit(),this._layerEdited=!0),this._fireMarkerDragEnd(e))},_extedingMarkerDragEnd(){this._map.pm.Draw.CircleMarker._layerIsDragging=!1},_initSnappableMarkersDrag(){let e=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,e.off(`pm:drag`,this._handleSnapping,this),e.on(`pm:drag`,this._handleSnapping,this),e.off(`pm:dragend`,this._cleanupSnapping,this),e.on(`pm:dragend`,this._cleanupSnapping,this),e.off(`pm:dragstart`,this._unsnap,this),e.on(`pm:dragstart`,this._unsnap,this)},_disableSnappingDrag(){let e=this._layer;e.off(`pm:drag`,this._handleSnapping,this),e.off(`pm:dragend`,this._cleanupSnapping,this),e.off(`pm:dragstart`,this._unsnap,this)},_updateHiddenPolyCircle(){let e=this._layer._map||this._map;if(e){let t=L.PM.Utils.pxRadiusToMeterRadius(this._layer.getRadius(),e,this._layer.getLatLng()),n=L.circle(this._layer.getLatLng(),this._layer.options);n.setRadius(t);let r=e&&e.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(n,200,!r).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(n,200,!r),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)}},_getNewDestinationOfOuterMarker(){let e=this._centerMarker.getLatLng(),t=this._outerMarker.getLatLng(),n=this._distanceCalculation(e,t);return this.options[this._minRadiusOption]&&n<this.options[this._minRadiusOption]?t=Yt(this._map,e,t,this._getMinDistanceInMeter(e)):this.options[this._maxRadiusOption]&&n>this.options[this._maxRadiusOption]&&(t=Yt(this._map,e,t,this._getMaxDistanceInMeter(e))),t},_handleOuterMarkerSnapping(){if(this._outerMarker._snapped){let e=this._centerMarker.getLatLng(),t=this._outerMarker.getLatLng(),n=this._distanceCalculation(e,t);(this.options[this._minRadiusOption]&&n<this.options[this._minRadiusOption]||this.options[this._maxRadiusOption]&&n>this.options[this._maxRadiusOption])&&this._outerMarker.setLatLng(this._outerMarker._orgLatLng)}this._outerMarker.setLatLng(this._getNewDestinationOfOuterMarker())},_distanceCalculation(e,t){return this._map.project(e).distanceTo(this._map.project(t))},_getMinDistanceInMeter(e){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._minRadiusOption],this._map,e)},_getMaxDistanceInMeter(e){return L.PM.Utils.pxRadiusToMeterRadius(this.options[this._maxRadiusOption],this._map,e)},_onVertexClick(e){e.target._dragging||this._fireVertexClick(e,void 0)}}),Ca.Circle=Ca.CircleMarker.extend({_shape:`Circle`,initialize(e){this._layer=e,this._enabled=!1,this._minRadiusOption=`minRadiusCircle`,this._maxRadiusOption=`maxRadiusCircle`,this._editableOption=`resizeableCircle`,this._updateHiddenPolyCircle()},enable(e){L.PM.Edit.CircleMarker.prototype.enable.call(this,e||{})},_extendingEnable(){},_extendingDisable(){this._layer.off(`remove`,this.disable,this);let e=this._layer._path?this._layer._path:this._layer._renderer._container;L.DomUtil.removeClass(e,`leaflet-pm-draggable`)},_extendingApplyOptions(){},_syncMarkers(){},_removeMarker(){},_onDragStart(){},_extedingMarkerDragEnd(){},_updateHiddenPolyCircle(){let e=this._map&&this._map.pm._isCRSSimple();this._hiddenPolyCircle?this._hiddenPolyCircle.setLatLngs(L.PM.Utils.circleToPolygon(this._layer,200,!e).getLatLngs()):this._hiddenPolyCircle=L.PM.Utils.circleToPolygon(this._layer,200,!e),this._hiddenPolyCircle._parentCopy||(this._hiddenPolyCircle._parentCopy=this._layer)},_distanceCalculation(e,t){return this._map.distance(e,t)},_getMinDistanceInMeter(){return this.options[this._minRadiusOption]},_getMaxDistanceInMeter(){return this.options[this._maxRadiusOption]},_onVertexClick(e){e.target._dragging||this._fireVertexClick(e,void 0)}}),Ca.ImageOverlay=Ca.extend({_shape:`ImageOverlay`,initialize(e){this._layer=e,this._enabled=!1},toggleEdit(e){this.enabled()?this.disable():this.enable(e)},enabled(){return this._enabled},enable(e={draggable:!0,snappable:!0}){if(L.Util.setOptions(this,e),this._map=this._layer._map,this._map){if(!this.options.allowEditing){this.disable();return}this.enabled()||this.disable(),this.enableLayerDrag(),this._layer.on(`remove`,this.disable,this),this._enabled=!0,this._otherSnapLayers=this._findCorners(),this._fireEnable()}},disable(){this._dragging||(this._map||=this._layer._map,this.disableLayerDrag(),this._layer.off(`remove`,this.disable,this),this.enabled()||(this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable()),this._enabled=!1)},_findCorners(){let e=this._layer.getBounds();return[e.getNorthWest(),e.getNorthEast(),e.getSouthEast(),e.getSouthWest()]}}),Ca.Text=Ca.extend({_shape:`Text`,initialize(e){this._layer=e,this._enabled=!1},enable(e){if(L.Util.setOptions(this,e),this.textArea){if(!this.options.allowEditing||!this._layer._map){this.disable();return}this._map=this._layer._map,this.enabled()&&this.disable(),this.applyOptions(),this._safeToCacheDragState=!0,this._focusChange(),this.textArea.readOnly=!1,this.textArea.classList.remove(`pm-disabled`),this._layer.on(`remove`,this.disable,this),L.DomEvent.on(this.textArea,`input`,this._autoResize,this),L.DomEvent.on(this.textArea,`focus`,this._focusChange,this),L.DomEvent.on(this.textArea,`blur`,this._focusChange,this),this._layer.on(`dblclick`,L.DomEvent.stop),L.DomEvent.off(this.textArea,`mousedown`,this._preventTextSelection),this._enabled=!0,this._fireEnable()}},disable(){if(!this.enabled())return;this._layer.off(`remove`,this.disable,this),L.DomEvent.off(this.textArea,`input`,this._autoResize,this),L.DomEvent.off(this.textArea,`focus`,this._focusChange,this),L.DomEvent.off(this.textArea,`blur`,this._focusChange,this),document.removeEventListener(`click`,this._documentClickThis,{capture:!0}),this._focusChange(),this.textArea.readOnly=!0,this.textArea.classList.add(`pm-disabled`);let e=document.activeElement;this.textArea.focus(),this.textArea.selectionStart=0,this.textArea.selectionEnd=0,L.DomEvent.on(this.textArea,`mousedown`,this._preventTextSelection),e.focus(),this._disableOnBlurActive=!1,this._layerEdited&&this._fireUpdate(),this._layerEdited=!1,this._fireDisable(),this._enabled=!1},enabled(){return this._enabled},toggleEdit(e){this.enabled()?this.disable():this.enable(e)},applyOptions(){this.options.snappable?this._initSnappableMarkers():this._disableSnapping()},_initSnappableMarkers(){let e=this._layer;this.options.snapDistance=this.options.snapDistance||30,this.options.snapSegment=this.options.snapSegment===void 0?!0:this.options.snapSegment,e.off(`pm:drag`,this._handleSnapping,this),e.on(`pm:drag`,this._handleSnapping,this),e.off(`pm:dragend`,this._cleanupSnapping,this),e.on(`pm:dragend`,this._cleanupSnapping,this),e.off(`pm:dragstart`,this._unsnap,this),e.on(`pm:dragstart`,this._unsnap,this)},_disableSnapping(){let e=this._layer;e.off(`pm:drag`,this._handleSnapping,this),e.off(`pm:dragend`,this._cleanupSnapping,this),e.off(`pm:dragstart`,this._unsnap,this)},_autoResize(){this.textArea.style.height=`1px`,this.textArea.style.width=`1px`;let e=this.textArea.scrollHeight>21?this.textArea.scrollHeight:21,t=this.textArea.scrollWidth>16?this.textArea.scrollWidth:16;this.textArea.style.height=`${e}px`,this.textArea.style.width=`${t}px`,this._layer.options.text=this.getText(),this._fireTextChange(this.getText())},_disableOnBlur(){this._disableOnBlurActive=!0,setTimeout(()=>{this.enabled()&&(this._documentClickThis=this._documentClickThis||this._documentClick.bind(this),document.addEventListener(`click`,this._documentClickThis,{capture:!0}))},100)},_documentClick(e){e.target!==this.textArea&&(this.disable(),!this.getText()&&this.options.removeIfEmpty&&this.remove())},_focusChange(e={}){let t=this._hasFocus;this._hasFocus=e.type===`focus`,!t!=!this._hasFocus&&(this._hasFocus?(this._applyFocus(),this._focusText=this.getText(),this._fireTextFocus()):(this._removeFocus(),this._fireTextBlur(),this._focusText!==this.getText()&&(this._fireEdit(),this._layerEdited=!0)))},_applyFocus(){this.textArea.classList.add(`pm-hasfocus`),this._map.dragging&&(this._safeToCacheDragState&&=(this._originalMapDragState=this._map.dragging._enabled,!1),this._map.dragging.disable())},_removeFocus(){this._map.dragging&&(this._originalMapDragState&&this._map.dragging.enable(),this._safeToCacheDragState=!0),this.textArea.classList.remove(`pm-hasfocus`)},focus(){if(!this.enabled())throw TypeError(`Layer is not enabled`);this.textArea.focus()},blur(){if(!this.enabled())throw TypeError(`Layer is not enabled`);this.textArea.blur(),this._disableOnBlurActive&&this.disable()},hasFocus(){return this._hasFocus},getElement(){return this.textArea},setText(e){e&&(this.textArea.value=e),this._autoResize()},getText(){return this.textArea.value},_initTextMarker(){if(this.textArea=L.PM.Draw.Text.prototype._createTextArea.call(this),this.options.className){let e=this.options.className.split(` `);this.textArea.classList.add(...e)}let e=L.PM.Draw.Text.prototype._createTextIcon.call(this,this.textArea);this._layer.setIcon(e),this._layer.once(`add`,this._createTextMarker,this)},_createTextMarker(e=!1){this._layer.off(`add`,this._createTextMarker,this),this._layer.getElement().tabIndex=-1,this.textArea.wrap=`off`,this.textArea.style.overflow=`hidden`,this.textArea.style.height=L.DomUtil.getStyle(this.textArea,`font-size`),this.textArea.style.width=`1px`,this._layer.options.text&&this.setText(this._layer.options.text),this._autoResize(),e===!0&&(this.enable(),this.focus(),this._disableOnBlur())},_preventTextSelection(e){e.preventDefault()}});var Ta=function(e,t,n,r,i,a){this._matrix=[e,t,n,r,i,a]};Ta.init=()=>new L.PM.Matrix(1,0,0,1,0,0),Ta.prototype={transform(e){return this._transform(e.clone())},_transform(e){let t=this._matrix,{x:n,y:r}=e;return e.x=t[0]*n+t[1]*r+t[4],e.y=t[2]*n+t[3]*r+t[5],e},untransform(e){let t=this._matrix;return new L.Point((e.x/t[0]-t[4])/t[0],(e.y/t[2]-t[5])/t[2])},clone(){let e=this._matrix;return new L.PM.Matrix(e[0],e[1],e[2],e[3],e[4],e[5])},translate(e){if(e===void 0)return new L.Point(this._matrix[4],this._matrix[5]);let t,n;return typeof e==`number`?(t=e,n=e):(t=e.x,n=e.y),this._add(1,0,0,1,t,n)},scale(e,t){if(e===void 0)return new L.Point(this._matrix[0],this._matrix[3]);let n,r;return t||=L.point(0,0),typeof e==`number`?(n=e,r=e):(n=e.x,r=e.y),this._add(n,0,0,r,t.x,t.y)._add(1,0,0,1,-t.x,-t.y)},rotate(e,t){let n=Math.cos(e),r=Math.sin(e);return t||=new L.Point(0,0),this._add(n,r,-r,n,t.x,t.y)._add(1,0,0,1,-t.x,-t.y)},flip(){return this._matrix[1]*=-1,this._matrix[2]*=-1,this},_add(e,t,n,r,i,a){let o=[[],[],[]],s=this._matrix,c=[[s[0],s[2],s[4]],[s[1],s[3],s[5]],[0,0,1]],l=[[e,n,i],[t,r,a],[0,0,1]],u;e&&e instanceof L.PM.Matrix&&(s=e._matrix,l=[[s[0],s[2],s[4]],[s[1],s[3],s[5]],[0,0,1]]);for(let e=0;e<3;e+=1)for(let t=0;t<3;t+=1){u=0;for(let n=0;n<3;n+=1)u+=c[e][n]*l[n][t];o[e][t]=u}return this._matrix=[o[0][0],o[1][0],o[0][1],o[1][1],o[0][2],o[1][2]],this}};var Ea=Ta,Da={calcMiddleLatLng(e,t,n){let r=e.project(t),i=e.project(n);return e.unproject(r._add(i)._divideBy(2))},findLayers(e){let t=[];return e.eachLayer(e=>{(e instanceof L.Polyline||e instanceof L.Marker||e instanceof L.Circle||e instanceof L.CircleMarker||e instanceof L.ImageOverlay)&&t.push(e)}),t=t.filter(e=>!!e.pm),t=t.filter(e=>!e._pmTempLayer),t=t.filter(e=>!L.PM.optIn&&!e.options.pmIgnore||L.PM.optIn&&e.options.pmIgnore===!1),t},circleToPolygon(e,t=60,n=!0){let r=K(e.getLatLng(),e.getRadius(),t,0,n),i=[];for(let e=0;e<r.length;e+=1){let t=[r[e].lat,r[e].lng];i.push(t)}return L.polygon(i,e.options)},disablePopup(e){e.getPopup()&&(e._tempPopupCopy=e.getPopup(),e.unbindPopup())},enablePopup(e){e._tempPopupCopy&&(e.bindPopup(e._tempPopupCopy),delete e._tempPopupCopy)},_fireEvent(e,t,n,r=!1){e.fire(t,n,r);let{groups:i}=this.getAllParentGroups(e);i.forEach(e=>{e.fire(t,n,r)})},getAllParentGroups(e){let t=[],n=[],r=e=>{for(let i in e._eventParents)if(t.indexOf(i)===-1){t.push(i);let a=e._eventParents[i];n.push(a),r(a)}};return!e._pmLastGroupFetch||!e._pmLastGroupFetch.time||new Date().getTime()-e._pmLastGroupFetch.time>1e3?(r(e),e._pmLastGroupFetch={time:new Date().getTime(),groups:n,groupIds:t},{groupIds:t,groups:n}):{groups:e._pmLastGroupFetch.groups,groupIds:e._pmLastGroupFetch.groupIds}},createGeodesicPolygon:K,getTranslation:W,findDeepCoordIndex(e,t,n=!0){let r,i=e=>(a,o)=>{let s=e.concat(o);if(n){if(a.lat&&a.lat===t.lat&&a.lng===t.lng)return r=s,!0}else if(a.lat&&L.latLng(a).equals(t))return r=s,!0;return Array.isArray(a)&&a.some(i(s))};e.some(i([]));let a={};return r&&(a={indexPath:r,index:r[r.length-1],parentPath:r.slice(0,r.length-1)}),a},findDeepMarkerIndex(e,t){let n,r=e=>(i,a)=>{let o=e.concat(a);return i._leaflet_id===t._leaflet_id?(n=o,!0):Array.isArray(i)&&i.some(r(o))};e.some(r([]));let i={};return n&&(i={indexPath:n,index:n[n.length-1],parentPath:n.slice(0,n.length-1)}),i},_getIndexFromSegment(e,t){if(t&&t.length===2){let n=this.findDeepCoordIndex(e,t[0]),r=this.findDeepCoordIndex(e,t[1]),i=Math.max(n.index,r.index);return(n.index===0||r.index===0)&&i!==1&&(i+=1),{indexA:n,indexB:r,newIndex:i,indexPath:n.indexPath,parentPath:n.parentPath}}return null},_getRotatedRectangle(e,t,n,r){let i=xa(r,e),a=xa(r,t),o=n*Math.PI/180,s=Math.cos(o),c=Math.sin(o),l=(a.x-i.x)*s+(a.y-i.y)*c,u=(a.y-i.y)*s-(a.x-i.x)*c,d=l*s+i.x,f=l*c+i.y,p=-u*c+i.x,m=u*s+i.y;return[Sa(r,i),Sa(r,{x:d,y:f}),Sa(r,a),Sa(r,{x:p,y:m})]},pxRadiusToMeterRadius(e,t,n){let r=t.project(n),i=L.point(r.x+e,r.y);return t.distance(t.unproject(i),n)}};L.PM=L.PM||{version:Ct.version,Map:tn,Toolbar:rn,Draw:q,Edit:Ca,Utils:Da,Matrix:Ea,activeLang:`en`,optIn:!1,initialize(e){this.addInitHooks(e)},setOptIn(e){this.optIn=!!e},addInitHooks(){function e(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Map(this)):this.options.pmIgnore||(this.pm=new L.PM.Map(this)),this.pm&&this.pm.setGlobalOptions({})}L.Map.addInitHook(e);function t(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.LayerGroup(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.LayerGroup(this))}L.LayerGroup.addInitHook(t);function n(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this)):this.options.pmIgnore||(this.options.textMarker?(this.pm=new L.PM.Edit.Text(this),this.options._textMarkerOverPM||this.pm._initTextMarker(),delete this.options._textMarkerOverPM):this.pm=new L.PM.Edit.Marker(this))}L.Marker.addInitHook(n);function r(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.CircleMarker(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.CircleMarker(this))}L.CircleMarker.addInitHook(r);function i(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Line(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Line(this))}L.Polyline.addInitHook(i);function a(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Polygon(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Polygon(this))}L.Polygon.addInitHook(a);function o(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Rectangle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Rectangle(this))}L.Rectangle.addInitHook(o);function s(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.Circle(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.Circle(this))}L.Circle.addInitHook(s);function c(){this.pm=void 0,L.PM.optIn?this.options.pmIgnore===!1&&(this.pm=new L.PM.Edit.ImageOverlay(this)):this.options.pmIgnore||(this.pm=new L.PM.Edit.ImageOverlay(this))}L.ImageOverlay.addInitHook(c)},reInitLayer(e){e instanceof L.LayerGroup&&e.eachLayer(e=>{this.reInitLayer(e)}),e.pm||L.PM.optIn&&e.options.pmIgnore!==!1||e.options.pmIgnore||(e instanceof L.Map?e.pm=new L.PM.Map(e):e instanceof L.Marker?e.options.textMarker?(e.pm=new L.PM.Edit.Text(e),e.pm._initTextMarker(),e.pm._createTextMarker(!1)):e.pm=new L.PM.Edit.Marker(e):e instanceof L.Circle?e.pm=new L.PM.Edit.Circle(e):e instanceof L.CircleMarker?e.pm=new L.PM.Edit.CircleMarker(e):e instanceof L.Rectangle?e.pm=new L.PM.Edit.Rectangle(e):e instanceof L.Polygon?e.pm=new L.PM.Edit.Polygon(e):e instanceof L.Polyline?e.pm=new L.PM.Edit.Line(e):e instanceof L.LayerGroup?e.pm=new L.PM.Edit.LayerGroup(e):e instanceof L.ImageOverlay&&(e.pm=new L.PM.Edit.ImageOverlay(e)))}},L.version===`1.7.1`&&L.Canvas.include({_onClick(e){let t=this._map.mouseEventToLayerPoint(e),n,r;for(let i=this._drawFirst;i;i=i.next)n=i.layer,n.options.interactive&&n._containsPoint(t)&&(!(e.type===`click`||e.type===`preclick`)||!this._map._draggableMoved(n))&&(r=n);r&&(L.DomEvent.fakeStop(e),this._fireEvent([r],e))}}),L.PM.initialize()})();var Do={class:`flex h-screen w-screen overflow-hidden font-sans text-gray-700 bg-gray-100`},Oo={class:`flex flex-col w-96 bg-white shadow-2xl z-1000 overflow-y-auto border-r border-gray-200`},ko={class:`flex-1 p-5 flex flex-col gap-6`},Ao={class:`bg-white rounded-xl border border-gray-100 shadow-sm p-4 hover:shadow-md transition-shadow`},jo={class:`bg-white rounded-xl border border-gray-100 shadow-sm p-4`},Mo={class:`mb-2 flex justify-between items-center`},No={class:`text-xs font-bold text-blue-600 bg-blue-50 px-2 py-0.5 rounded`},Po={key:0,class:`mt-3 text-xs bg-amber-50 text-amber-700 p-2 rounded border border-amber-100 flex items-start gap-1`},Fo={class:`mt-4`},Io={class:`grid grid-cols-3 gap-2`},Lo=[`onClick`],Ro={class:`p-5 mt-auto`},zo=[`disabled`],Bo={key:0,class:`mt-3 h-2 w-full bg-gray-200 rounded-full overflow-hidden`},Vo={class:`text-center mt-3 text-xs text-gray-400 font-medium min-h-4`};po(wo(Rn({__name:`App`,setup(e){let t=Ut(null),n=Wt(null),r=Wt(null),i=Wt(null),a=Wt(null),o=Wt(null),s=Ut(),c=Ut([]),l=Ut(!1),u=Ut(``),d=Ut(!1),f=Ut(``),p=Ut(13),m=Ut(null),h=Ut(null),g=Ut(0),_=Ut(!1),v=Ut(0),y=Ut(`...`),b=Ut(`gaode_vector`),x=[{id:`gaode_vector`,name:``,url:`https://webst01.is.autonavi.com/appmaptile?style=6&x={x}&y={y}&z={z}`},{id:`esri_light_gray`,name:``,url:`https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Light_Gray_Base/MapServer/tile/{z}/{y}/{x}`},{id:`esri_dark_gray`,name:``,url:`https://server.arcgisonline.com/ArcGIS/rest/services/Canvas/World_Dark_Gray_Base/MapServer/tile/{z}/{y}/{x}`},{id:`esri_imagery`,name:`ESRI `,url:`https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}`},{id:`esri_hill_shade`,name:``,url:`https://server.arcgisonline.com/arcgis/rest/services/Elevation/World_Hillshade/MapServer/tile/{z}/{y}/{x}`},{id:`esri_imagery_firefly`,name:``,url:`https://fly.maptiles.arcgis.com/arcgis/rest/services/World_Imagery_Firefly/MapServer/tile/{z}/{y}/{x}`},{id:`google_satellite`,name:`Google `,url:`http://mt0.google.com/vt/lyrs=s&hl=en&x={x}&y={y}&z={z}`}],S=pa(()=>c.value.find(e=>e.adcode===s.value)),C=pa(()=>m.value===`rect`?`: `:m.value===`polygon`?`:  (${S.value?.name})`:`: `);An(p,()=>A());let w=e=>{if(!n.value||b.value===e&&a.value)return;b.value=e,a.value&&=(n.value.removeLayer(a.value),null),o.value&&=(n.value.removeLayer(o.value),null);let t=x.find(t=>t.id===e);if(!t)return;let r=Eo.default.tileLayer(t.url,{maxZoom:19,crossOrigin:`anonymous`});r.addTo(n.value),a.value=r},T=async()=>{l.value=!0,u.value=``;try{let e=await fetch(`https://geo.datav.aliyun.com/areas_v3/bound/all.json`);if(!e.ok)throw Error(`Failed to load address data: ${e.status}`);if(!(e.headers.get(`content-type`)||``).includes(`application/json`))throw Error(`Invalid content type for address data`);let t=await e.json();Array.isArray(t)?c.value=t:(c.value=[],u.value=``)}catch(e){u.value=``,console.error(e)}finally{l.value=!1}};Qn(()=>{if(!t.value)return;let e=Eo.default.map(t.value).setView([39.9042,116.4074],10);n.value=e,w(b.value),e.pm.addControls({position:`topleft`,drawCircleMarker:!1,drawMarker:!1,drawCircle:!1,drawPolyline:!1,drawPolygon:!1,drawText:!1,drawRectangle:!0,editMode:!0,dragMode:!1,cutPolygon:!1,removalMode:!0,rotateMode:!1}),e.pm.setPathOptions({color:`#3b82f6`,fillColor:`#3b82f6`,fillOpacity:.2,weight:2}),e.pm.setLang(`zh`),e.on(`pm:create`,e=>{E();let t=e.layer;i.value=t,D(`rect`),t.on(`pm:edit`,()=>{A()})}),e.on(`pm:remove`,e=>{e.layer===i.value&&(i.value=null,D(null))}),T()});let E=(e=!0)=>{r.value&&n.value&&(n.value.removeLayer(r.value),r.value=null),i.value&&n.value&&(n.value.removeLayer(i.value),i.value=null),h.value=null,e&&D(null)},D=e=>{m.value=e,A()},O=e=>{s.value=e,f.value=``;let t={country:6,province:10,city:10,district:14}?.[S.value?.level??``];t&&(p.value=t),k(e)},k=async e=>{E(!1),D(`polygon`),y.value=`...`;try{let t=`https://geo.datav.aliyun.com/areas_v3/bound/${e}.json`,i=await fetch(t);if(!i.ok)throw Error(`Failed to fetch boundary: ${i.status}`);if(!(i.headers.get(`content-type`)||``).includes(`application/json`))throw Error(`Invalid content type for boundary data`);let a=await i.json(),o=null;if(a&&a.type===`FeatureCollection`&&Array.isArray(a.features)){let e=[];a.features.forEach(t=>{t&&t.geometry&&(t.geometry.type===`Polygon`?e.push(t.geometry.coordinates):t.geometry.type===`MultiPolygon`&&e.push(...t.geometry.coordinates))}),e.length>0&&(o={type:`MultiPolygon`,coordinates:e})}else a&&(a.type===`Polygon`||a.type===`MultiPolygon`)&&(o={type:a.type,coordinates:a.coordinates});if(!o){f.value=``,D(null);return}if(h.value=o,n.value&&h.value){let e=Eo.default.geoJSON(h.value,{style:{color:`#ef4444`,weight:2,fillOpacity:.1}}).addTo(n.value);r.value=e,n.value.fitBounds(e.getBounds()),A(),y.value=`: ${S.value?.name}`}}catch(e){f.value=``,console.error(e),D(null)}finally{d.value=!1}},A=()=>{let e=null;if(m.value===`rect`&&i.value?e=i.value.getBounds():m.value===`polygon`&&r.value&&(e=r.value.getBounds()),!e){g.value=0,y.value=`...`;return}let t=p.value,n=e.getNorthWest(),a=e.getSouthEast(),o=j(n.lat,n.lng,t),s=j(a.lat,a.lng,t);g.value=(Math.abs(s.x-o.x)+1)*(Math.abs(s.y-o.y)+1),y.value=`: ${g.value} `},ee=async()=>{let e;if(m.value===`rect`&&i.value?e=i.value.getBounds():m.value===`polygon`&&r.value&&(e=r.value.getBounds()),!e)return;if(g.value>1500){alert(` Zoom `);return}_.value=!0,v.value=0,y.value=`...`;let t=p.value,n=e.getNorthWest(),a=e.getSouthEast(),o=j(n.lat,n.lng,t),c=j(a.lat,a.lng,t),l=Math.min(o.x,c.x),u=Math.max(o.x,c.x),d=Math.min(o.y,c.y),f=Math.max(o.y,c.y),S=u-l+1,C=f-d+1,w=S*C,T=document.createElement(`canvas`);T.width=S*256,T.height=C*256;let E=T.getContext(`2d`);if(!E){_.value=!1;return}let D=0,O=[],k=x.find(e=>e.id===b.value)||x[0];if(!k){_.value=!1;return}let A=k.url;for(let e=l;e<=u;e++)for(let n=d;n<=f;n++)O.push(new Promise(r=>{let i=new Image;i.crossOrigin=`Anonymous`,i.src=A.replace(`{z}`,t.toString()).replace(`{y}`,n.toString()).replace(`{x}`,e.toString()),i.onload=()=>{E.drawImage(i,(e-l)*256,(n-d)*256),D++,v.value=Math.floor(D/w*100),r()},i.onerror=()=>r()}));if(await Promise.all(O),m.value===`polygon`&&h.value){y.value=`...`,E.globalCompositeOperation=`destination-in`,E.beginPath();let e=l*256,n=d*256;M(E,h.value,(r,i)=>{let a=te(r,i,t);return{x:a.x-e,y:a.y-n}}),E.fill(),E.globalCompositeOperation=`source-over`}y.value=`...`;let ee=te(n.lat,n.lng,t),N=te(a.lat,a.lng,t),P=l*256,ne=d*256,F=ee.x-P,I=ee.y-ne,R=N.x-ee.x,re=N.y-ee.y;F=Math.max(0,F),I=Math.max(0,I),F+R>T.width&&(R=T.width-F),I+re>T.height&&(re=T.height-I);let ie=document.createElement(`canvas`);ie.width=R,ie.height=re;let ae=ie.getContext(`2d`);ae&&(ae.drawImage(T,F,I,R,re,0,0,R,re),ie.toBlob(e=>{if(e){let n=URL.createObjectURL(e),r=document.createElement(`a`);r.href=n,r.download=`${m.value===`polygon`?s.value:`terra_snap_map`}_z${t}.png`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}_.value=!1,y.value=``},`image/png`))},j=(e,t,n)=>({x:Math.floor((t+180)/360*2**n),y:Math.floor((1-Math.log(Math.tan(e*Math.PI/180)+1/Math.cos(e*Math.PI/180))/Math.PI)/2*2**n)}),te=(e,t,n)=>{let r=Math.sin(e*Math.PI/180);return r=Math.min(Math.max(r,-.9999),.9999),{x:256*2**n*(t+180)/360,y:256*2**n*(.5-Math.log((1+r)/(1-r))/(4*Math.PI))}},M=(e,t,n)=>{t.type===`Polygon`?N(e,t.coordinates,n):t.type===`MultiPolygon`&&t.coordinates.forEach(t=>{N(e,t,n)})},N=(e,t,n)=>{t.forEach(t=>{t.forEach((t,r)=>{let i=n(t[1],t[0]);r===0?e.moveTo(i.x,i.y):e.lineTo(i.x,i.y)}),e.closePath()})};return(e,n)=>(Ci(),Oi(`div`,Do,[$(`aside`,Oo,[n[10]||=zi(`<div class="p-5 border-b border-gray-100" data-v-c3d356e1><h2 class="text-xl font-bold text-gray-800 flex items-center gap-2" data-v-c3d356e1><svg width="40" height="40" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-c3d356e1><circle cx="50" cy="50" r="35" stroke="#3B82F6" stroke-width="2" stroke-dasharray="4 4" data-v-c3d356e1></circle><circle cx="50" cy="50" r="22" fill="#DBEAFE" data-v-c3d356e1></circle><path d="M50 35V65M50 65L40 55M50 65L60 55" stroke="#1D4ED8" stroke-width="5" stroke-linecap="round" stroke-linejoin="round" data-v-c3d356e1></path><rect x="75" y="25" width="10" height="10" rx="2" fill="#1D4ED8" data-v-c3d356e1><animateTransform attributeName="transform" type="rotate" from="0 50 50" to="360 50 50" dur="10s" repeatCount="indefinite" data-v-c3d356e1></animateTransform></rect></svg>  <span class="text-xs bg-blue-100 text-blue-700 px-2 py-0.5 rounded-full" data-v-c3d356e1> Pro </span></h2></div>`,1),$(`div`,ko,[$(`div`,{class:me([`text-xs h-8 font-bold text-center py-2 px-3 rounded-md border transition-colors duration-300`,[m.value===`polygon`?`bg-green-50 text-green-700 border-green-200`:m.value===`rect`?`bg-gray-100 text-gray-600 border-gray-200`:`bg-yellow-50 text-yellow-600 border-yellow-100`]])},ye(C.value),3),$(`div`,Ao,[n[1]||=$(`div`,{class:`text-sm font-bold text-gray-800 mb-3 flex items-center gap-2`},[$(`span`,{class:`text-lg`},``),Ri(`  `)],-1),Pi(To,{modelValue:s.value,options:c.value,"onUpdate:modelValue":O,placeholder:``},null,8,[`modelValue`,`options`])]),n[9]||=zi(`<div class="bg-white rounded-xl border border-gray-100 shadow-sm p-4" data-v-c3d356e1><div class="text-sm font-bold text-gray-800 mb-2 flex items-center gap-2" data-v-c3d356e1><span class="text-lg" data-v-c3d356e1></span>  </div><p class="text-xs text-gray-500 leading-relaxed" data-v-c3d356e1>  <strong class="text-gray-900 bg-gray-200 px-1 rounded" data-v-c3d356e1>   </strong>  <br data-v-c3d356e1><span class="text-blue-500" data-v-c3d356e1>  </span></p></div>`,1),$(`div`,jo,[n[7]||=$(`div`,{class:`text-sm font-bold text-gray-800 mb-3 flex items-center gap-2`},[$(`span`,{class:`text-lg`},``),Ri(`  `)],-1),$(`div`,Mo,[n[2]||=$(`label`,{class:`text-xs font-medium text-gray-600`},`  (Zoom) `,-1),$(`span`,No,ye(p.value),1)]),wn($(`input`,{type:`range`,min:`6`,max:`18`,"onUpdate:modelValue":n[0]||=e=>p.value=e,class:`w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-600`},null,512),[[ao,p.value,void 0,{number:!0}]]),n[8]||=$(`div`,{class:`flex justify-between mt-2 text-[10px] text-gray-400`},[$(`span`,null,` (6)`),$(`span`,null,` (10)`),$(`span`,null,` (18)`)],-1),g.value>1e3?(Ci(),Oi(`div`,Po,[n[5]||=Ri(`  `,-1),$(`span`,null,[n[3]||=Ri(`  `,-1),$(`strong`,null,ye(g.value),1),n[4]||=Ri(`  `,-1)])])):Bi(``,!0),$(`div`,Fo,[n[6]||=$(`div`,{class:`mb-2 flex justify-between items-center`},[$(`label`,{class:`text-xs font-medium text-gray-600`},``)],-1),$(`div`,Io,[(Ci(),Oi(Q,null,cr(x,e=>$(`button`,{key:e.id,class:me([`flex-1 py-1.5 px-1 text-xs rounded-lg border transition-colors cursor-pointer truncate`,e.id===b.value?`bg-blue-600 text-white border-blue-600`:`bg-white text-gray-600 border-gray-200 hover:bg-gray-50`]),onClick:t=>w(e.id)},ye(e.name),11,Lo)),64))])])])]),$(`div`,Ro,[$(`button`,{class:`w-full py-3 px-4 cursor-pointer bg-blue-600 hover:bg-blue-700 text-white text-sm font-bold rounded-xl shadow-lg shadow-blue-200 disabled:bg-gray-300 disabled:text-gray-500 disabled:shadow-none disabled:cursor-not-allowed transition-all transform active:scale-[0.98]`,disabled:!m.value||_.value,onClick:ee},ye(_.value?` ${v.value}%`:``),9,zo),_.value?(Ci(),Oi(`div`,Bo,[$(`div`,{class:`h-full bg-green-500 transition-all duration-300 ease-out`,style:le({width:v.value+`%`})},null,4)])):Bi(``,!0),$(`div`,Vo,ye(y.value),1)])]),$(`div`,{id:`map`,ref_key:`mapContainer`,ref:t,class:`flex-1 h-full z-0 bg-gray-900`},null,512)]))}}),[[`__scopeId`,`data-v-c3d356e1`]])).mount(`#app`);